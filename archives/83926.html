
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>[翻译]Ruby教程8——表达式 - 龍昌博客</title>
  <meta name="author" content="龍昌">

  
  <meta name="description" content="表达式 在这章的教程将介绍Ruby的表达式。 表达式是由操作数和操作符构成的。表达式的操作符表明了对操作数应用什么操作。表达式中操作符的求值顺序由操作符的优先级和结合律决定的。 操作符是一个特殊的符号表明了要执行的确切操作。编程语言中的操作符取自数学运算。程序员使用数据，操作符用于处理数据。 &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://www.xefan.com/archives/83926.html">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="龍昌博客" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.useso.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.useso.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.useso.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">龍昌博客</a></h1>
  
    <h2>从Pythoner转向Rubist</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:www.xefan.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Home</a></li>
  <li><a href="/blog/archives">Archives</a></li>
 <li><a href="/about/">About</a></li>  <li><a href="/gbook/">留言板</a></li> 
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      <h1 class="entry-title">[翻译]Ruby教程8——表达式</h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-11-10T00:00:00+08:00'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>10</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>12:00 am</span></time>
        
           | <a href="#disqus_thread"
             data-disqus-identifier="http://www.xefan.com">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><h1>表达式</h1>


<p>在这章的教程将介绍Ruby的表达式。</p>


<p>表达式是由操作数和操作符构成的。表达式的操作符表明了对操作数应用什么操作。表达式中操作符的求值顺序由操作符的优先级和结合律决定的。</p>


<p>操作符是一个特殊的符号表明了要执行的确切操作。编程语言中的操作符取自数学运算。程序员使用数据，操作符用于处理数据。操作数是操作符的参数。</p>


<p>以下表格中按优先级展示Ruby的操作符（高优先级在前）：</p>


<table>
    <thead>
        <tr>
            <td>分类</td>
            <td>符号</td>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>解析，访问操作符</td>
            <td>:: .</td>
        </tr>
        <tr>
            <td>数组操作符</td>
            <td>[] []=</td>
        </tr>
        <tr>
            <td>求幂</td>
            <td>**</td>
        </tr>
        <tr>
            <td>非，反，一元加、减</td>
            <td>! ~ + -</td>
        </tr>
        <tr>
            <td>乘、除、模</td>
            <td>* / %</td>
        </tr>
        <tr>
            <td>加、减</td>
            <td>+ -</td>
        </tr>
        <tr>
            <td>移位</td>
            <td><< >></td>
        </tr>
        <tr>
            <td>位与</td>
            <td>&</td>
        </tr>
        <tr>
            <td>位或、逻辑或</td>
            <td>^ |</td>
        </tr>
        <tr>
            <td>关系运算</td>
            <td>> >= < <=</td>
        </tr>
        <tr>
            <td>相等、模式匹配</td>
            <td><=> == === != =~ !~</td>
        </tr>
        <tr>
            <td>逻辑与</td>
            <td>&&</td>
        </tr>
        <tr>
            <td>逻辑或</td>
            <td>||</td>
        </tr>
        <tr>
            <td>范围操作符</td>
            <td>.. &#8230;</td>
        </tr>
        <tr>
            <td>三目运算</td>
            <td>?:</td>
        </tr>
        <tr>
            <td>分配操作</td>
            <td>= += -= *= **= /= %= &= |= ^= <<= >>= ||= &&=</td>
        </tr>
        <tr>
            <td>否定</td>
            <td>not</td>
        </tr>
        <tr>
            <td>逻辑或、与</td>
            <td>or and</td>
        </tr>
    </tbody>
</table>




<p>同一行的操作符具有相同的优先级。</p>


<p>一个操作符通常有两个操作数。那些只有一个操作数的操作符称为一元操作符。有两个操作数的称为二元操作符。有一个三元操作符(?:)有三个操作数。</p>


<p>操作符可能用于不同的上下文。例如+操作符，从上面的表格可知它能用于不同情况。数字求和、连接字符串、作为数字的符号。我们称这个操作符被重载了。</p>


<h2>正负号操作符</h2>


<p>有两个正负号操作符，+和-，用于指定或者修改值的符号。</p>


<pre><code>#!/usr/bin/ruby

puts +2
puts -2
</code></pre>


<p>+和-指明了值的符号。加号表明是正数，通常可省略。</p>


<hr>


<p>接下来的例子我们使用减号。</p>


<pre><code>#!/usr/bin/ruby

a = 1

puts a
puts -(a)
puts -(-(a))
</code></pre>


<p>减号改变了值的符号。</p>


<p>$ ./sign.rb<br>
1<br>
-1<br>
1  </p>


<p>输出结果。</p>


<h2>分配操作符</h2>


<p>分配操作符<em>=</em>将一个值分配给一个变量。变量是这个值的点位符。数学运算中<em>=</em>操作符有不同的意义。在方程式中<em>=</em>是相等操作，左边的值等于右边的值。</p>


<pre><code>x = 1
puts x # prints 1
</code></pre>


<p>这里分配的一个数字给<em>x</em>变量。</p>


<pre><code>x = x + 1
puts x # prints 2
</code></pre>


<p>前一个表达式中数学运算中是行不通的。但是在程序中是合法的。这个表达式是将<em>x</em>变量加1，右边等于2,并把2赋值给x。</p>


<pre><code>3 = x;
</code></pre>


<p>这个语法是错误的，我们不能组值分配字面符。</p>


<h2>解析，成员访问操作符</h2>


<p>有两个操作符具有最高的优先级，这意味着它们总是先求解。</p>


<pre><code>#!/usr/bin/ruby

class MyMath
    Pi = 3.1415926535    
end

module People
    Name = "People"
end

puts MyMath::Pi
puts People::Name
</code></pre>


<p>第一个例子展示了<em>::</em>命名空间解析操作符。它可以访问一个定义在其它类或模块里的常量、模块或者类。它用于提供命名空间，这样方法和类的名字就不会与其他作者的类冲突了。</p>


<pre><code>class MyMath
    Pi = 3.1415926535    
end

module People
    Name = "People"
end
</code></pre>


<p>这里创建了一个模块的一个类，分别定义了一个常量。</p>


<pre><code>puts MyMath::Pi
puts People::Name
</code></pre>


<p>我们使用<em>::</em>操作符访问它们的常量。</p>


<p>$ ./resolution.rb<br>
3.1415926535<br>
People  </p>


<p><em>resolution.rb</em>脚本的输出结果。</p>


<hr>


<p>点(.)操作符是成员访问，用于调用对象的方法。</p>


<pre><code>#!/usr/bin/ruby

class Person

   def initialize name, age
       @name = name
       @age = age       
   end

   def info
       "#{@name} is #{@age} years old"
   end

end

p = Person.new "Jane", 17
puts p.info

puts "ZetCode".reverse
</code></pre>


<p>这个例子中我们创建了两个对象，一个是用户定义的，一个是预定义的。我们对这些对象使用点操作符。</p>


<pre><code>p = Person.new "Jane", 17
puts p.info
</code></pre>


<p>在这行使用点操作符调用了两个方法：new和info。</p>


<pre><code>puts "ZetCode".reverse
</code></pre>


<p>字符串是内建对象，具有一个<em>reverse</em>方法。</p>


<p>$ ./memberaccess.rb<br>
Jane is 17 years old<br>
edoCteZ  </p>


<p>输出结果。</p>


<h2>字符串连接</h2>


<p>Ruby中<em>+</em>操作符同样可以用于字符串连接。在不同上下文中操作符作用不同，我们称这个为重载。</p>


<pre><code>#!/usr/bin/ruby

puts "Return " + "of " + "the " + "King"
puts "Return ".+"of ".+ "the ".+"King"
</code></pre>


<p>我们将三个字符串连接在一起。</p>


<pre><code>puts "Return " + "of " + "the " + "King"
</code></pre>


<p>我们使用<em>+</em>操作符连接字符串。</p>


<pre><code>puts "Return ".+"of ".+ "the ".+"King"
</code></pre>


<p><em>+</em>操作符也是Ruby的一个方法。我们可以使用访问操作符(.)来调用它。</p>


<p>$ ./catstrings.rb <br>
Return of the King<br>
Return of the King  </p>


<p><em>catstrings.rb</em>程序的运行结果。</p>


<h2>增、减操作符</h2>


<p>Ruby中没有如下操作。<br>
x++;<br>
&#8230;<br>
y&#8211;;  </p>


<p>这些是C语言的增、减操作。</p>


<p>如果你熟悉Java、C、C++，你可能了解这些操作符。但是这些在Ruby中无效的。同样在Python中也没有。</p>


<h2>算术操作符</h2>


<p>下面的表格是Ruby中的算术操作符。  </p>


<table>
<thead>
<tr>
<th align="left">符号</th>
<th align="left">名字</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">+</td>
<td align="left">加</td>
</tr>
<tr>
<td align="left">-</td>
<td align="left">减</td>
</tr>
<tr>
<td align="left">*</td>
<td align="left">乘</td>
</tr>
<tr>
<td align="left">/</td>
<td align="left">除</td>
</tr>
<tr>
<td align="left">%</td>
<td align="left">模</td>
</tr>
<tr>
<td align="left">**</td>
<td align="left">幂</td>
</tr>
</tbody>
</table>


<p>下面的例子中我们使用了算术操作符。</p>


<pre><code>#!/usr/bin/ruby

a = 10
b = 11
c = 12

puts a + b + c
puts c - a
puts a * b
puts c / 3
puts c % a
puts c ** a
</code></pre>


<p>在前面的例子我们使用了加、减、乘、除和取余操作。这些与数学上的是相同的。</p>


<pre><code>puts c % a
</code></pre>


<p><em>%</em>操作符是取余或者求模。</p>


<p>$ ./arithmetic.rb<br>
33<br>
2<br>
110<br>
4<br>
2<br>
61917364224  </p>


<p>输出结果。</p>


<hr>


<p>接下来展示整数和浮点数除法的区别。</p>


<pre><code>#!/usr/bin/ruby

puts 5 / 2

puts 5 / 2.0
puts 5.0 / 2
puts 5.to_f / 2
</code></pre>


<p>上面的例子我们将两个数相除。</p>


<pre><code>puts 5 / 2
</code></pre>


<p>这个表达式中的操作数都是整数，我们进行的是整数相除。结果返回的也是整数。</p>


<pre><code>puts 5 / 2.0
puts 5.0 / 2
puts 5.to_f / 2
</code></pre>


<p>如果其中一个或两个是浮点数，我们进行的是浮点数相除。</p>


<p>$ ./division.rb<br>
2<br>
2.5<br>
2.5<br>
2.5  </p>


<p><em>division.rb</em>程序的运行结果。</p>


<hr>


<p>Ruby有其他方式进行除运算。这些都是有效的方法调用。</p>


<pre><code>#!/usr/bin/ruby

puts 5.div 2.0
puts 5.fdiv 2
puts 5.quo 2
puts 5.0.quo 2.0
</code></pre>


<p>上面例子中我们使用了<em>div</em>、<em>fdiv</em>和<em>quo</em>方法。</p>


<pre><code>puts 5.div 2.0
</code></pre>


<p><em>div</em>总是进行整数除，即使操作数是浮点数。</p>


<pre><code>puts 5.fdiv 2
</code></pre>


<p><em>fdiv</em>总是进行浮点数除法。</p>


<pre><code>puts 5.quo 2
puts 5.0.quo 2.0
</code></pre>


<p><em>quo</em>方法进行精确的除法。如果操作数是浮点数则返回浮点数，否则是有理数。</p>


<p>$ ./otherdivision.rb<br>
2<br>
2.5<br>
5/2<br>
2.5  </p>


<h2>布尔操作符</h2>


<p>Ruby中有以下布尔操作符。</p>


<table>
    <thead>
        <tr>
            <td>符号</td>
            <td>名字</td>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>&&</td>
            <td>逻辑与</td>
        </tr>
        <tr>
            <td>||</td>
            <td>逻辑或</td>
        </tr>
        <tr>
            <td>!</td>
            <td>否</td>
        </tr>
    </tbody>
</table>




<p>布尔操作符处理真假值。Ruby中有额外的布尔操作符，<em>and</em>、<em>or</em>、<em>&amp;</em>、<em>not</em>。它们操作是相同的，只是优先级低一些。与Perl语言不同，这需要一个低优先级的布尔操作符。</p>


<pre><code>#!/usr/bin/ruby

x = 3
y = 8

puts x == y
puts y &gt; x

if y &gt; x then
    puts "y is greater than x"
end
</code></pre>


<p>许多表达式的结果都是一个布尔值。布尔值用于条件语句。</p>


<pre><code>puts x == y
puts y &gt; x
</code></pre>


<p>返回布尔值的相关操作符。这两行打印为false和true。</p>


<pre><code>if y &gt; x then
    puts "y is greater than x"
end
</code></pre>


<p>仅当月<em>if</em>条件为真时<em>if</em>里的语句才会执行。x &gt; y返回true，因此&#8221;y is greater than x&#8221;会在终端上打印。</p>


<hr>


<p>下面的例子展示逻辑与操作符。</p>


<pre><code>#!/usr/bin/ruby

puts true &amp;&amp; true
puts true &amp;&amp; false
puts false &amp;&amp; true
puts false &amp;&amp; false
</code></pre>


<p>与操作只有在操作数都为true才返回true。</p>


<p>$ ./andoperator.rb<br>
true<br>
false<br>
false<br>
false  </p>


<p>只有一个表达式的结果为true。</p>


<hr>


<p>逻辑或操作符当有一个操作数为true则返回true。</p>


<pre><code>#!/usr/bin/ruby

puts true || true
puts true || false
puts false || true
puts false || false
</code></pre>


<p>如果有一边是true，操作的结果就是true。</p>


<p>$ ./oroperator.rb<br>
true<br>
true<br>
true<br>
false  </p>


<p>三个表达式结果为true。</p>


<hr>


<p>非操作进行真假反转。</p>


<pre><code>#!/usr/bin/ruby

puts !0
puts !1
puts !true
puts !false

puts ! (4&lt;3)
puts ! "Ruby".include?("a")
</code></pre>


<p>这个例子展示了非操作符的用法。</p>


<p>$ ./not.rb<br>
false<br>
false<br>
false<br>
true<br>
true<br>
true  </p>


<p>输出结果。</p>


<hr>


<p><em>||</em>和<em>&amp;&amp;</em>操作符是短路求值（short circuit evaluated）。短路求值意味着只有在第一个参数不足以确定表达式的值时第二个参数才会进行求值。短求值主要用于提高执行效率。</p>


<p>用一个例子解释。</p>


<pre><code>#!/usr/bin/ruby

def one
    puts "Inside one"
    false
end

def two
    puts "Inside two"
    true
end

puts "Short circuit"

if one &amp;&amp; two
    puts "Pass"
end

puts "##############################"

if two || one
    puts "Pass"
end
</code></pre>


<p>在例子中定义了两个方法，用于在布尔操作中作为操作数。我们将看到它们是否被调用了。</p>


<pre><code>if one &amp;&amp; two
    puts "Pass"
end
</code></pre>


<p>第一个方法返回false，短路求值不会计算第二个方法。一旦一个操作数是false，那么这个逻辑的结果总是false。</p>


<pre><code>puts "##############################"

if two || one
    puts "Pass"
end
</code></pre>


<p>第二种情况我们使用<em>||</em>操作符，并且第一个操作数为<em>tow</em>方法。这里同样没有必要对第二个操作数求值，只要第一个操作数为true，那么逻辑或总是为true。</p>


<pre><code>$ ./shortcircuit.rb
Short circuit
Inside one
##############################
Inside two
Pass
</code></pre>


<p><em>shortcircuit.rb</em>程序的运行结果。</p>


<h2>关系操作符</h2>


<p>关系操作符用于值的比较，其总是返回布尔值。</p>


<table>
<thead>
<tr>
<th align="left">符号</th>
<th align="left">含义</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">&lt;</td>
<td align="left">小于</td>
</tr>
<tr>
<td align="left">&lt;=</td>
<td align="left">小于等于</td>
</tr>
<tr>
<td align="left">&gt;</td>
<td align="left">大于</td>
</tr>
<tr>
<td align="left">&gt;=</td>
<td align="left">大于等于</td>
</tr>
</tbody>
</table>


<p>关系操作符又称为比较操作符。</p>


<pre><code>#!/usr/bin/ruby

p 3 &lt; 4
p 3 &gt; 5
p 3 &gt;= 3
</code></pre>


<p>表达式<em>3 &lt; 4</em>返回true，因为3小于4。表达式<em>3 &gt; 5</em>返回false，因为3不大于5。</p>


<h2>位操作符</h2>


<p>人类用的是十进制数字，计算机原生的是二进制数。二进制、八进制、十进制和十六进制只是数字的符号。位操作符针对的是二进制数。</p>


<table>
    <thead>
        <tr>
            <td>符号</td>
            <td>含义</td>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td>~</td>
            <td>按位取反</td>
        </tr>
        <tr>
            <td>^</td>
            <td>按位异或</td>
        </tr>
        <tr>
            <td>&</td>
            <td>按位与</td>
        </tr>
        <tr>
            <td>|</td>
            <td>按位与或</td>
        </tr>
        <tr>
            <td>&lt;&lt;</td>
            <td>左移位</td>
        </tr>
        <tr>
            <td>&gt;&gt;</td>
            <td>右移位</td>
        </tr>
    </tbody>
</table>




<p>位操作在高级语言中很少使用。</p>


<pre><code>#!/usr/bin/ruby

puts ~ 7   # prints -8 
puts ~ -8  # prints 7

puts 6 &amp; 3  # prints 2
puts 3 &amp; 6  # prints 2

puts 6 ^ 3  # prints 5
puts 3 ^ 6  # prints 5

puts 6 | 3  # prints 7
puts 3 | 6  # prints 7

puts 6 &lt;&lt; 1  # prints 12
puts 1 &lt;&lt; 6  # prints 64

puts 6 &gt;&gt; 1  # prints 3
puts 1 &gt;&gt; 6  # prints 0
</code></pre>


<p>上面的例子中展示了这6个位操作符。</p>


<pre><code>puts ~ 7   # prints -8 
puts ~ -8  # prints 7
</code></pre>


<p>按位取反是将1变为0，0变为1。将操作会将数字7所有的位都反转，同样包括符号位。如果再次反转所有的位即会得到数字7。</p>


<pre><code>puts 6 &amp; 3  # prints 2
puts 3 &amp; 6  # prints 2
</code></pre>


<p>按位与是将两个数进行逐位与操作，只有两个数对应位的都为1结果才为1。</p>


<pre><code>puts 6 ^ 3  # prints 5
puts 3 ^ 6  # prints 5
</code></pre>


<p>按位异或是将两个数进行逐位异或操作，只要其中一个数（但不是全部）对应位的为1结果就为1。</p>


<pre><code>puts 6 | 3  # prints 7
puts 3 | 6  # prints 7
</code></pre>


<p>按位或是将两个数进行逐位或操作，只要其中一个数对应位的为1结果就为1。</p>


<pre><code>puts 6 &lt;&lt; 1  # prints 12
puts 1 &lt;&lt; 6  # prints 64

puts 6 &gt;&gt; 1  # prints 3
puts 1 &gt;&gt; 6  # prints 0
</code></pre>


<p>移位操作符是按位进行右移或左移，也称为算术移位。</p>


<h2>复合分配操作符</h2>


<p>复合分配操作符是由两个操作符构成。它们是简写操作符。</p>


<pre><code>#!/usr/bin/ruby

a = 0

a = a + 1
a += 1
puts a


b = 0

b = b - 8
b -= 8
puts b
</code></pre>


<p><em>+=</em>和<em>-=</em>操作符是一个简写的操作符。它们的可读性没有全写的好，但是有经验的程序员经常使用它们。</p>


<pre><code>a = a + 1
a += 1
</code></pre>


<p>这两行的操作是一样的，都是将变量<em>a</em>加1。</p>


<p>其他的一些复合操作符。</p>


<pre><code>-=   *=  **=  /=   %=   &amp;=   |=   &lt;&lt;=   &gt;&gt;=
</code></pre>


<h2>操作符优先级</h2>


<p>操作符的优先级表明了先对哪个操作符进行求值。优先级避免了表达式的二义性。</p>


<p>这个表达式的结果是多少？28还是40？</p>


<p>3 + 5 * 5  </p>


<p>跟数学相同，乘法优先级高于加法，加些结果为28。</p>


<p>(3 + 5) * 5  </p>


<p>我们可以使用括号来改变优先级。括号里的表达式总是最先求值。</p>


<pre><code>#!/usr/bin/ruby

puts 3 + 5 * 5
puts (3 + 5) * 5

puts ! true | true
puts ! (true | true)
</code></pre>


<p>这个例子展示了一些表达式，其结果依赖于操作符优先级。</p>


<pre><code>puts 3 + 5 * 5
</code></pre>


<p>这行打印28，因为乘法操作优先级高于加法。</p>


<pre><code>puts ! true | true
</code></pre>


<p>这里非操作优先级更高。最后返回为true。</p>


<p>$ ./precedence.rb<br>
28<br>
40<br>
true<br>
false  </p>


<h2>结合律</h2>


<p>有时优先级不能决定表达式的结果。还有另一条规则称为结合律。它决定相同优先级的求值顺序。</p>


<p>9 / 3 * 3  </p>


<p>这个的结果是多少？9还是1？乘、除和取模操作是从左到右结合的。因此结果为9。</p>


<p>数学运算、布尔、关系和位操作都是从左向右结合的。</p>


<p>另外赋值操作是右结合。</p>


<pre><code>a = b = c = d = 0
print a, b, c, d # prints 0000
</code></pre>


<p>复合分配操作是从右向左结合的。</p>


<pre><code>j = 0
j *= 3 + 1
puts j
</code></pre>


<p>你可能期望结果为1,但是实际上结果为0。由于结合律，右边表达式先求值再应用复合分配操作。</p>


<h2>范围操作符</h2>


<p>Ruby有两个范围操作符，用于创建一个范围对象。通常是数字或者字母的范围。</p>


<p><em>..</em>范围操作符（两个点）创建一个包含的范围。<em>&#8230;</em>操作符（三个点）创建一个非包含的范围，较大的值不包含在其中。</p>


<pre><code>#!/usr/bin/ruby

p (1..3).to_a
p (1...3).to_a

p ('a' .. 'l').to_a
</code></pre>


<p>这个例子中我们使用范围操作符创建了数字范围和字母范围。</p>


<pre><code>p (1..3).to_a
p (1...3).to_a
</code></pre>


<p>这两行都是使用范围操作符创建了两个范围，然后转换为数据。第一个范围的值为1,2,3；第二个为1和2.</p>


<pre><code>p ('a' .. 'l').to_a
</code></pre>


<p>这里使用<em>..</em>操作符创建一个&#8217;a&#8217;到&#8217;l&#8217;的数组。</p>


<p>$ ./range.rb<br>
[1, 2, 3]<br>
[1, 2]<br>
[&#8220;a&#8221;, &#8220;b&#8221;, &#8220;c&#8221;, &#8220;d&#8221;, &#8220;e&#8221;, &#8220;f&#8221;, &#8220;g&#8221;, &#8220;h&#8221;, &#8220;i&#8221;, &#8220;j&#8221;, &#8220;k&#8221;, &#8220;l&#8221;]  </p>


<p>输出结果。</p>


<h2>三元运算术</h2>


<p>三元运算术是一个条件操作。如果我们需要根据条件表达式从两个值选择一个时这是一个方便的操作。</p>


<p>cond-exp ? exp1 : exp2  </p>


<p>如果<em>cond-exp</em>为真则返回<em>exp1</em>，否则返回<em>exp2</em>。</p>


<pre><code>#!/usr/bin/ruby

age = 32

adult = age &gt;= 18 ? true : false

if adult then
    puts "Adult"
else
    puts "Not adult"
end
</code></pre>


<p>许多国家成年是基于你的年龄。是否成年即为是否超过了一定年龄。这种情况适合于三元操作。</p>


<pre><code>adult = age &gt;= 18 ? true : false
</code></pre>


<p>首先对赋值符右转进行求值，它的值将赋给<em>adult</em>变量。</p>


<p>$ ./ternary.rb<br>
Adult  </p>


<p>32年已经成年了。</p>


<h2>计算素数</h2>


<p>我们将计算素数。</p>


<pre><code>#!/usr/bin/ruby

nums = (4..50).to_a

puts "Prime numbers:"

print "2 3 "

nums.each do |i|

    not_prime = false

    (2..Math.sqrt(i).ceil).each do |j|
        not_prime = true if i % j == 0    
    end

    print i, " " unless not_prime

end

puts
</code></pre>


<p>上面的例子中我们用到了一些操作符。</p>


<pre><code>nums = (4..50).to_a
</code></pre>


<p>我们将从这些数中计算哪些是素数。</p>


<pre><code>print "2 3 "
</code></pre>


<p>我们路过2和3,因为它们都是素数。</p>


<pre><code>not_prime = false
</code></pre>


<p><em>not_prime</em>标志表明选择的数不是素数。我们假设选择的数是素数，直到被证明不是为止。</p>


<pre><code>(2..Math.sqrt(i).ceil).each do |j|
    not_prime = true if i % j == 0    
end
</code></pre>


<p>当取模的结果为0表示这个数不是素数。</p>


<pre><code>print i, " " unless not_prime
</code></pre>


<p>如果<em>not_prime</em>标志没有设置则打印这个数。</p>


<hr>


<p>上面例子展示了一些操作符。实际上有更简单方法计算素数。Ruby中有一个计算素数的模块。</p>


<pre><code>#!/usr/bin/ruby

require 'prime'

Prime.each(50) do |i|
    print i, " "
end

puts
</code></pre>


<p>使用Ruby的<em>prime</em>模块计算素数。</p>


<pre><code>require 'prime'
</code></pre>


<p>导入<em>prime</em>模块。</p>


<pre><code>Prime.each(50) do |i|
    print i, " "
end
</code></pre>


<p>计算到50的素数。</p>


<p>$ ./primes.rb<br>
2 3 5 7 11 13 17 19 23 29 31 37 41 43 47   </p>


<p>结果输出了2到50之间的素数。</p>


<p>这章的教程介绍了表达式。</p>


<hr>


<p>原文地址： <a href="http://zetcode.com/lang/rubytutorial/expressions/">http://zetcode.com/lang/rubytutorial/expressions/</a><br>
翻译：龙昌  admin@longchangjin.cn<br>
完整教程：<a href="https://github.com/wusuopu/Ruby-tutorial">https://github.com/wusuopu/Ruby-tutorial</a>  </p>

</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">龍昌</span></span>

      




<time class='entry-date' datetime='2013-11-10T00:00:00+08:00'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>10</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>12:00 am</span></time>
    </p>
    <p class="meta">
      Categories: 

<span class="categories">
  
    <a class='category' href='/categories/ruby栏目/index.html'>ruby栏目</a>
  
</span>


    </p>
    <p class="meta">
      Tags: 

<span class="tags">
  
    <a class='tag' href='/tags/Ruby/index.html'>Ruby</a>, <a class='tag' href='/tags/翻译/index.html'>翻译</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left" href="/archives/83921.html" title="Previous Post: [翻译]Ruby教程7——字符串">&laquo; [翻译]Ruby教程7——字符串</a>
      
      
        <a class="basic-alignment right" href="/archives/83929.html" title="Next Post: [翻译]Ruby教程9——控制流">[翻译]Ruby教程9——控制流 &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Subscription</h1>
  <!--以下是QQ邮件列表订阅嵌入代码--><script >var nId = "e7ee5da6d322dc7157c25cfd8a7700bb23a056dd1fb18cb4",nWidth="auto",sColor="light",sText="请输入邮件地址：" ;</script><script src="http://list.qq.com/zh_CN/htmledition/js/qf/page/qfcode.js" charset="gb18030"></script>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="http://www.xefan.com/archives/84137.html">Mongodb集群配置实例</a>
      </li>
    
      <li class="post">
        <a href="http://www.xefan.com/archives/84136.html">使用VIM进行PHP远程调试</a>
      </li>
    
      <li class="post">
        <a href="http://www.xefan.com/archives/84135.html">Nginx + Uwsgi + Django环境配置</a>
      </li>
    
      <li class="post">
        <a href="http://www.xefan.com/archives/84134.html">配置rails的vim环境</a>
      </li>
    
      <li class="post">
        <a href="http://www.xefan.com/archives/84133.html">博客终于迁移完成了！</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>Categories</h1>
    <ul id="category-list"><li><a href='/categories/linux栏目/index.html'>linux栏目 (47)</a></li><li><a href='/categories/python栏目/index.html'>python栏目 (33)</a></li><li><a href='/categories/ruby栏目/index.html'>ruby栏目 (26)</a></li><li><a href='/categories/web开发/index.html'>web开发 (17)</a></li><li><a href='/categories/嵌入式栏目/index.html'>嵌入式栏目 (11)</a></li><li><a href='/categories/开源软件/index.html'>开源软件 (20)</a></li><li><a href='/categories/教程/index.html'>教程 (15)</a></li><li><a href='/categories/数据库/index.html'>数据库 (8)</a></li><li><a href='/categories/数据结构和算法/index.html'>数据结构和算法 (16)</a></li><li><a href='/categories/编程开发/index.html'>编程开发 (38)</a></li><li><a href='/categories/网络日志/index.html'>网络日志 (11)</a></li><li><a href='/categories/资源分享/index.html'>资源分享 (23)</a></li></ul>
</section>
<section>
  <h1>Tag Cloud</h1>
    <span id="tag-cloud"><a href='/tags/access/index.html' style='font-size: 105.45454545454545%'>access(6)</a> <a href='/tags/adobe/index.html' style='font-size: 100.9090909090909%'>adobe(1)</a> <a href='/tags/ajax/index.html' style='font-size: 101.81818181818181%'>ajax(2)</a> <a href='/tags/apache/index.html' style='font-size: 100.9090909090909%'>apache(1)</a> <a href='/tags/arch/index.html' style='font-size: 106.36363636363636%'>Arch(7)</a> <a href='/tags/arm/index.html' style='font-size: 107.27272727272727%'>ARM(8)</a> <a href='/tags/asp/index.html' style='font-size: 106.36363636363636%'>asp(7)</a> <a href='/tags/c/index.html' style='font-size: 111.81818181818181%'>C(13)</a> <a href='/tags/css/index.html' style='font-size: 101.81818181818181%'>css(2)</a> <a href='/tags/django/index.html' style='font-size: 101.81818181818181%'>Django(2)</a> <a href='/tags/dreamweaver/index.html' style='font-size: 100.9090909090909%'>Dreamweaver(1)</a> <a href='/tags/fedora/index.html' style='font-size: 101.81818181818181%'>Fedora(2)</a> <a href='/tags/firefox/index.html' style='font-size: 102.72727272727273%'>firefox(3)</a> <a href='/tags/flash/index.html' style='font-size: 100.9090909090909%'>Flash(1)</a> <a href='/tags/ftp/index.html' style='font-size: 100.9090909090909%'>ftp(1)</a> <a href='/tags/gcc/index.html' style='font-size: 105.45454545454545%'>gcc(6)</a> <a href='/tags/gentoo/index.html' style='font-size: 101.81818181818181%'>Gentoo(2)</a> <a href='/tags/git/index.html' style='font-size: 103.63636363636364%'>git(4)</a> <a href='/tags/gobject/index.html' style='font-size: 105.45454545454545%'>GObject(6)</a> <a href='/tags/grub/index.html' style='font-size: 100.9090909090909%'>grub(1)</a> <a href='/tags/gtk/index.html' style='font-size: 115.45454545454545%'>gtk(17)</a> <a href='/tags/hash/index.html' style='font-size: 100.9090909090909%'>Hash(1)</a> <a href='/tags/ibus/index.html' style='font-size: 100.9090909090909%'>ibus(1)</a> <a href='/tags/js/index.html' style='font-size: 100.9090909090909%'>js(1)</a> <a href='/tags/linux/index.html' style='font-size: 160.0%'>Linux(66)</a> <a href='/tags/mongodb/index.html' style='font-size: 110.0%'>mongodb(11)</a> <a href='/tags/mysql/index.html' style='font-size: 103.63636363636364%'>mysql(4)</a> <a href='/tags/nginx/index.html' style='font-size: 100.9090909090909%'>nginx(1)</a> <a href='/tags/node/index.html' style='font-size: 100.9090909090909%'>node(1)</a> <a href='/tags/php/index.html' style='font-size: 109.0909090909091%'>php(10)</a> <a href='/tags/ps/index.html' style='font-size: 105.45454545454545%'>PS(6)</a> <a href='/tags/pygame/index.html' style='font-size: 110.9090909090909%'>pygame(12)</a> <a href='/tags/python/index.html' style='font-size: 145.45454545454544%'>python(50)</a> <a href='/tags/qt/index.html' style='font-size: 101.81818181818181%'>Qt(2)</a> <a href='/tags/redis/index.html' style='font-size: 100.9090909090909%'>Redis(1)</a> <a href='/tags/ruby/index.html' style='font-size: 123.63636363636364%'>Ruby(26)</a> <a href='/tags/scrapy/index.html' style='font-size: 102.72727272727273%'>Scrapy(3)</a> <a href='/tags/shell/index.html' style='font-size: 100.9090909090909%'>shell(1)</a> <a href='/tags/tq2440/index.html' style='font-size: 104.54545454545455%'>TQ2440(5)</a> <a href='/tags/ubuntu/index.html' style='font-size: 106.36363636363636%'>ubuntu(7)</a> <a href='/tags/usb/index.html' style='font-size: 102.72727272727273%'>USB(3)</a> <a href='/tags/vim/index.html' style='font-size: 123.63636363636364%'>vim(26)</a> <a href='/tags/virtualbox/index.html' style='font-size: 102.72727272727273%'>VirtualBox(3)</a> <a href='/tags/vmware/index.html' style='font-size: 100.9090909090909%'>vmware(1)</a> <a href='/tags/w3m/index.html' style='font-size: 100.9090909090909%'>w3m(1)</a> <a href='/tags/web开发/index.html' style='font-size: 112.72727272727272%'>Web开发(14)</a> <a href='/tags/windows/index.html' style='font-size: 106.36363636363636%'>windows(7)</a> <a href='/tags/wordpress/index.html' style='font-size: 100.9090909090909%'>WordPress(1)</a> <a href='/tags/xml/index.html' style='font-size: 100.9090909090909%'>xml(1)</a> <a href='/tags/免费/index.html' style='font-size: 100.9090909090909%'>免费(1)</a> <a href='/tags/内核/index.html' style='font-size: 100.9090909090909%'>内核(1)</a> <a href='/tags/匹配算法/index.html' style='font-size: 105.45454545454545%'>匹配算法(6)</a> <a href='/tags/单片机/index.html' style='font-size: 101.81818181818181%'>单片机(2)</a> <a href='/tags/嵌入式/index.html' style='font-size: 100.9090909090909%'>嵌入式(1)</a> <a href='/tags/开源软件/index.html' style='font-size: 108.18181818181819%'>开源软件(9)</a> <a href='/tags/排序算法/index.html' style='font-size: 108.18181818181819%'>排序算法(9)</a> <a href='/tags/文件空间/index.html' style='font-size: 100.9090909090909%'>文件空间(1)</a> <a href='/tags/无线网/index.html' style='font-size: 100.9090909090909%'>无线网(1)</a> <a href='/tags/正则式/index.html' style='font-size: 100.9090909090909%'>正则式(1)</a> <a href='/tags/注册机/index.html' style='font-size: 101.81818181818181%'>注册机(2)</a> <a href='/tags/游戏/index.html' style='font-size: 109.0909090909091%'>游戏(10)</a> <a href='/tags/电脑技巧/index.html' style='font-size: 108.18181818181819%'>电脑技巧(9)</a> <a href='/tags/空间/index.html' style='font-size: 100.9090909090909%'>空间(1)</a> <a href='/tags/算法/index.html' style='font-size: 114.54545454545455%'>算法(16)</a> <a href='/tags/红旗/index.html' style='font-size: 100.9090909090909%'>红旗(1)</a> <a href='/tags/经典语录/index.html' style='font-size: 100.9090909090909%'>经典语录(1)</a> <a href='/tags/网络日志/index.html' style='font-size: 105.45454545454545%'>网络日志(6)</a> <a href='/tags/翻译/index.html' style='font-size: 120.9090909090909%'>翻译(23)</a> <a href='/tags/视频教程/index.html' style='font-size: 109.0909090909091%'>视频教程(10)</a> <a href='/tags/资源分享/index.html' style='font-size: 110.9090909090909%'>资源分享(12)</a> <a href='/tags/转载/index.html' style='font-size: 101.81818181818181%'>转载(2)</a> <a href='/tags/随笔/index.html' style='font-size: 100.9090909090909%'>随笔(1)</a> </span>
</section>
<section>
  <h1>Link</h1>
    <ul id="category-list">
      <li><a target="_blank" title="我的Github" href="https://github.com/wusuopu">@Github</a></li>
      <li><a target="_blank" title="我的微博" href="http://www.weibo.com/u/1768691343">@Weibo</a></li>
      <li><a target="_blank" title="我的Twitter" href="https://twitter.com/longchangjin">@Twitter</a></li>
      <li><a target="_blank" title="我的豆瓣" href="http://www.douban.com/people/lchj/">@Douban</a></li>

      <li><a target="_blank" title="" href="http://www.vimer.cn/">Vimer的程序世界</a></li>
      <li><a target="_blank" title="" href="http://pythoner.net/">python开发者社区</a></li>
      <li><a target="_blank" title="" href="http://simple-is-better.com/">python.cn(news, jobs)</a></li>
      <li><a target="_blank" title="" href="http://gtk.awaysoft.com/">GTK+ 中文社区</a></li>
    </ul>
</section>

  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - 龍昌 -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>
<div style="display:none;"><script src="http://s94.cnzz.com/stat.php?id=1259846&web_id=1259846&show=pic" language="JavaScript"></script></div>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'longchang';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://www.xefan.com/archives/83926.html';
        var disqus_url = 'http://www.xefan.com/archives/83926.html';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>











</body>
</html>
