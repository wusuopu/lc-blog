
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>龍昌博客</title>
  <meta name="author" content="龍昌">

  
  <meta name="description" content="Ruby 词法结构 计算机语言跟人类语言类似也有词法结构。一个Ruby程序的源代码由符号构成。符号标志是最基本的代码元素。在Ruby语言中我们有多种词法结构，如：注释、变量、字面量、空白符号、操作符、分隔符和关键字。 注释 注释是用于向人们阐明源代码。在Ruby中有两种注释的方法， &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://www.xefan.com/page/8/index.html">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="/atom.xml" rel="alternate" title="龍昌博客" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.useso.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/libs/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="//fonts.useso.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="//fonts.useso.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <h1><a href="/">龍昌博客</a></h1>
  
    <h2>从Pythoner转向Rubist</h2>
  
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="https://www.google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:www.xefan.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Home</a></li>
  <li><a href="/blog/archives">Archives</a></li>
 <li><a href="/about/">About</a></li>  <li><a href="/gbook/">留言板</a></li> 
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
    
    <h1 class="entry-title"><a href="http://www.xefan.com/archives/83899.html">[翻译]Ruby教程2——词法结构</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-11-02T00:00:00+08:00'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>2</span><span class='date-suffix'>nd</span>, <span class='date-year'>2013</span></span> <span class='time'>12:00 am</span></time>
        
           | <a href="http://www.xefan.com/archives/83899.html#disqus_thread"
             data-disqus-identifier="http://www.xefan.com/archives/83899.html">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>Ruby 词法结构</h1>


<p>计算机语言跟人类语言类似也有词法结构。一个Ruby程序的源代码由符号构成。符号标志是最基本的代码元素。在Ruby语言中我们有多种词法结构，如：注释、变量、字面量、空白符号、操作符、分隔符和关键字。</p>


<h2>注释</h2>


<p>注释是用于向人们阐明源代码。在Ruby中有两种注释的方法，单行注释和多行注释。单行注释以#字符开始；多行注释是放置在<em>=bgin</em>和<em>=end</em> 等号标志之间。</p>


<blockquote>
<p>#!/usr/bin/ruby  </p>
<p>=begin  </p>
<blockquote>
<p>comments.rb<br>
      author Jan Bodnar<br>
      ZetCode 2011    </p>
</blockquote>
<p>=end  </p>
<p># prints message to the terminal<br>
 puts &#8220;Comments example&#8221;  </p>
</blockquote>


<p>这个例子同时展示的两种方法的注释。注释的内容将会被Ruby解释器忽略掉。</p>


<blockquote>
<pre><code>=begin  
    comments.rb  
    author Jan Bodnar  
    ZetCode 2011  
=end
</code></pre>
</blockquote>


<p>这是一个多行注释的例子，两个符号标志必须在行首。</p>


<h2>空白符号</h2>


<p>在源文件中Ruby的空白符号被用于分隔符号标志和结束语句。它也用于增强代码的可读性。  </p>


<p>if true then<br>
&nbsp;&nbsp;puts &#8220;A message&#8221;<br>
end  </p>


<p>空白字符在一些时候是必须的。例如在<em>if</em>关键字和<em>true</em>关键字之间；或者在<em>puts</em>方法和实际的字符串之间。而有时它又是被禁止的，如它不能包含在变量标识符或者语言关键字中。  </p>


<p>a=1<br>
b&nbsp;=&nbsp;2<br>
c&nbsp;&nbsp;=&nbsp;&nbsp;3  </p>


<p>这些在符号标志之间的空白字符对于Ruby解释器是无关紧要的。但是它于整个项目的风格统一非常重要。</p>


<hr>


<blockquote>
<p>#!/usr/bin/ruby  </p>
<p>x = 5 + 3<br>
 puts x  </p>
<p>x = 5 <br>
   &nbsp;&nbsp;&nbsp;&nbsp;+ 3<br>
 puts x      </p>
<p>x = 5 + <br>
   &nbsp;&nbsp;&nbsp;&nbsp;3<br>
 puts x</p>
</blockquote>


<p>换行是一种用于结束语句的空白字符形式。  </p>


<p>x = 5 + 3  </p>


<p>在第一种情况，我们有一条语句。它将相加求和的值赋给x变量。这个变量的值为8。  </p>


<p>x = 5<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;+3</p>


<p>现在第二种情况。第1条语句被换行符终止了，x变量的值是5。另一条语句<em>+3</em>，没有任何影响。  </p>


<p>x = 5 +<br>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;3  </p>


<p>最后，第1条语句的换行符之前有一个+二元操作符，因此解释器期望另一个值，它将检查第二行。在这种情况它将这两种作为一条语句，因此x这是的值为8。  </p>


<p>$ ./whitespace.rb<br>
8<br>
5<br>
8  </p>


<p>以上为输出结果。  </p>


<h2>变量</h2>


<p>变量是一个保存了值的标识符。在编程时我们说我们给一个变量分配一个值。专业一点的说法是一个变量是对计算机中存储了值的内存的引用。在Ruby中一个变量可以保存字符串、数字或者多种对象。不同时间变量可以被分配不同的值。<br>
在Ruby中变量名由字母数字和下划线组成，但是不能以数字开头。Ruby解释器可以很容易地区分原始的数字跟变量。变量名不能以大写字母开头，在Ruby中以大写字母开头的标识符会被认为是一个常量。</p>


<blockquote>
<p>Value<br>
   value2<br>
   company_name  </p>
</blockquote>


<p>以上这些都是合法的变量名。</p>


<blockquote>
<p>12Val<br>
   exx$<br>
   first-name  </p>
</blockquote>


<p>以上这些都不是合法的变量名。  </p>


<p>变量名前可以加<em>$</em>和<em>@</em>这两个特殊的字符，它们用于创建特殊作用域的变量。  </p>


<p>变量名是大小写敏感的，这意味着<em>price</em>和<em>pRice</em>是两个不同的标识符。  </p>


<blockquote>
<p>#!/usr/bin/ruby<br>
 number = 10<br>
 numBER = 11  </p>
<p>puts number, numBER  </p>
</blockquote>


<p>在这个脚本中我们给两个标识符分配了两个数字。<em>number</em>和<em>numBER</em>是两个不同的变量。</p>


<blockquote>
<p>$ ./case.rb<br>
   10<br>
   11  </p>
</blockquote>


<p>以上是这个脚本运行的输出结果。</p>


<h2>常量</h2>


<p>常量的值在程序运行过程中是不变的。在Ruby中一个标识符的首字母大写即为一个常量。编程时对于常量约定是所有字母全都大写。<br>
与其他语言不同，Ruby不会强制要求常量的值始终不变。当我们给一个常量分配新的值时解释器只会提示一个警告。  </p>


<blockquote>
<p>#!/usr/bin/ruby<br>
 Name = &#8220;Robert&#8221;<br>
 AGE = 23<br>
 Name = &#8220;Juliet&#8221;  </p>
</blockquote>


<p>在上面的例子中我们创建了两个常量，其中一个被重新定义了。  </p>


<blockquote>
<p>Name = &#8220;Robert&#8221;<br>
 AGE = 23  </p>
</blockquote>


<p>创建两个常量。在Ruby中标识符的首字母大写即定义为常量。作为约定常量通常是所有字母都大写的。  </p>


<blockquote>
<p>Name = &#8220;Juliet&#8221;  </p>
</blockquote>


<p>我们重新定义了一个常量，这会引起一个警告。</p>


<blockquote>
<p>$ ./constants.rb<br>
   ./constants.rb:6: warning: already initialized constant Name  </p>
</blockquote>


<p>以上是这个例子运行的输出。</p>


<h2>字面量</h2>


<p>字面量（literal）是按原文本内容所表示的特殊类型的值。字面量类型包括布尔型、整型、浮点型、字符串、字符和日期。专业的说一个字面量在编译时会分配一个值，该值在运行时会分配给对应的变量。</p>


<blockquote>
<p>age = 29<br>
 nationality = &#8220;Hungarian&#8221;  </p>
</blockquote>


<p>这里我们分配了两个字面量变量。数字<em>29</em>和字符串<em>&#8220;Hungarian&#8221;</em>都是字面量。  </p>


<pre><code>#!/usr/bin/ruby

require 'date'

sng = true  
name = "James"  
job = nil  
weight = 68.5  
born = Date.parse("November 12, 1986")

puts "His name is #{name}"

if sng == true  
    puts "He is single"  
else  
    puts "He is in a relationship"  
end

puts "His job is #{job}"  
puts "He weighs #{weight} kilograms"  
puts "He was born in #{born}"
</code></pre>


<p>在上面这个例子中，我们使用了多个字面量。布尔字面量的值可能为<em>true</em>或者<em>false</em>，<em>James</em>是一个字符串字面量，<em>nil</em>表示一个不存在的值，<em>68.5</em>是一个浮点数，最后<em>November 12,1986</em>是一个日期。</p>


<blockquote>
<p>$ ./literals.rb<br>
   His name is James<br>
   He is single<br>
   His job is <br>
   He weighs 68.5 kilograms<br>
   He was born in 1986-11-12  </p>
</blockquote>


<p>以上为<em>literals.rb</em>脚本的输出结果。 </p>


<h2>代码块</h2>


<p>Ruby语句通常是放在代码块中。一个代码块可以被<em>{}</em>符号或者<em>do</em>、<em>end</em>关键字分隔。  </p>


<pre><code>#!/usr/bin/ruby

puts [2, -1, -4, 0].delete_if { |x| x &lt; 0 }

[1, 2, 3].each do |e|
    puts e
end
</code></pre>


<p>这个例子中我们展示了两个代码块。  </p>


<p>Ruby代码的控制流通常是使用<em>if</em>关键字。这个关键字k跟随着一个代码块，在这种情况下代码块被<em>then</em>、<em>end</em>关键字分隔，<em>then</em>关键字是可选的。</p>


<pre><code>#!/usr/bin/ruby

if true then
    puts "Ruby language"
    puts "Ruby script"
end
</code></pre>


<p>在上面这个例子中，我们展示了一个简单的代码块。它有两条语句。这个代码块被<em>then</em>、<em>end</em>关键字分隔。<em>then</em>关键字可以省略。</p>


<h2>符号</h2>


<p>符号<em>$</em>、<em>@</em>是特殊字符用于表示变量的作用域，<em>$</em>表示全局变量，<em>@</em>表示实例变量，<em>@@</em>表示类变量。  </p>


<blockquote>
<p>$car_name = &#8220;Peugeot&#8221;<br>
  @sea_name = &#8220;Black sea&#8221;<br>
  @@species = &#8220;Cat&#8221;  </p>
</blockquote>


<p>这些符号总是位于变量标识符的开头。</p>


<h2>操作符</h2>


<p>操作符是一个用于对值执行一个动作的符号。  </p>


<pre><code>!    +    -    ~    *    **    /    %
&lt;&lt;    &gt;&gt;    &amp;    |    ^
==    ===    !=    &lt;=&gt;    &gt;=    &gt;
&lt;    &lt;=    =    %=    /=    -=
+=    *=    **=    ..    ...    not
and    or    ?:    &amp;&amp;    ||
</code></pre>


<p>以上是在Ruby中所有有效的操作符，我们将在之后的教程中介绍它们。  </p>


<h2>分隔符</h2>


<p>分隔符是一个或多个用于在纯文本或者其他数据流中指定分隔独立区域范围的字符序列。  </p>


<pre><code>(       )       [       ]       {       }      
,       ;       '       "       |       |

#!/usr/bin/ruby

name = "Jane"
occupation = 'Student'
numbers = [ 2, 3, 5, 3, 6, 2 ]

puts name; puts occupation
puts numbers[2]
numbers.each { |i| puts i }
puts ( 2 + 3 ) * 5
</code></pre>


<p>在上面这个例子中我们展示多种Ruby分隔符的用法。  </p>


<blockquote>
<p>name = &#8220;Jane&#8221;<br>
 occupation = &#8216;Student&#8217;  </p>
</blockquote>


<p>在Ruby中单引号和双引号被用于分隔字符串。</p>


<blockquote>
<p>numbers = [ 2, 3, 5, 3, 6, 2 ]  </p>
</blockquote>


<p>中括号用于指定数组的范围。逗号用于分隔数组项。  </p>


<blockquote>
<p>puts name; puts occupation  </p>
</blockquote>


<p>在Ruby中分号用于分隔两条语句。</p>


<blockquote>
<p>puts numbers[2]  </p>
</blockquote>


<p>分隔符可用于不同的环境中，这里中括号用于访问数组。</p>


<blockquote>
<p>numbers.each { |i| puts i }  </p>
</blockquote>


<p>大括号用于定义代码块。管道用于定义在每次循环中被当前数组项所填充的元素。</p>


<blockquote>
<p>puts ( 2 + 3 ) * 5</p>
</blockquote>


<p>括号用于改变一个表达式的求值。</p>


<h2>关键字</h2>


<p>关键字是在Ruby语言中被保留的字。关键字用于在计算机程序中展示特定的任务。例如：在终端中打印一个值，执行重复的任务或者展示逻辑操作。程序员不能使用关键字作为普通的变量。  </p>


<pre><code>alias    and      BEGIN      begin    break    case  
class    def      defined?   do       else     elsif  
END      end      ensure     false    for      if  
in       module   next       nil      not      or  
redo     rescue   retry      return   self     super  
then     true     undef      unless   until    when   
while    yield
</code></pre>


<p>这些是Ruby的关键列表。</p>


<p>以上就是Ruby的词法结构了。</p>


<hr>


<p>原文地址： <a href="http://zetcode.com/lang/rubytutorial/lexis/">http://zetcode.com/lang/rubytutorial/lexis/</a><br>
翻译：龙昌  admin@longchangjin.cn<br>
完整教程：<a href="https://github.com/wusuopu/Ruby-tutorial">https://github.com/wusuopu/Ruby-tutorial</a>  </p>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
    <h1 class="entry-title"><a href="http://www.xefan.com/archives/83895.html">[翻译]Ruby教程1——Ruby语言介绍</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-11-02T00:00:00+08:00'><span class='date'><span class='date-month'>Nov</span> <span class='date-day'>2</span><span class='date-suffix'>nd</span>, <span class='date-year'>2013</span></span> <span class='time'>12:00 am</span></time>
        
           | <a href="http://www.xefan.com/archives/83895.html#disqus_thread"
             data-disqus-identifier="http://www.xefan.com/archives/83895.html">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><h1>Ruby</h1>


<p>在这部分Ruby教程中，我们将介绍Ruby编程语言。</p>


<h2>目标</h2>


<p>这个教程的目标是让你入门Ruby。这个教程覆盖了Ruby的主要内容，包括变量、表达式、集合、流程控制结构以及其他的一些主要特性。同样也会描述一些高级的概念，例如面向对象和正则表达式。这不会完全地覆盖这个语言。</p>


<h2>Ruby</h2>


<p>Ruby是一门动态的、反射的、通用的面向对象编程语言。它的源作者是一个日本程序员——松本行弘 (まつもとゆきひろ)。Ruby第一次发表是在1995年。</p>


<p>Ruby支持多种程序范式。包括面向对象、反射、命令式的和反射的编程。Ruby语言主要是受到Perl、Smalltalk、Eiffel和Lisp的影响。不同于java、C#以及C，Ruby没有官方的规范。取而代之的是用原始的C实现的Ruby语言作为实际参考。同时也还存在一些用其他方法实现的Ruby语言，如：JRuby、IronRuby或者MacRuby。</p>


<p>Ruby的官方网站是: <a href="htp://ruby-lang.org">ruby-lang.org</a></p>


<h2>人气</h2>


<p>如今有上百种编程语言，而Ruby属于最流行的一个。在<a href="http://langpop.com">langpop.com</a>和<a href="http://www.tiobe.com/index.php/content/paperinfo/tpci/index.html">tiobe</a>网站Ruby都排在第10名左右。Ruby on Rails——一个非常流行的web应用框架是使用Ruby开发第一个杀手级的应用。</p>


<h2>交互式的解释器</h2>


<p>我们可以通过脚本或者交互式的解释器来运行Ruby语句。在这个教程中我们将使用交互式的Ruby会话来展示一些小的代码片段。大的代码例子将放在Ruby脚本中。</p>


<blockquote>
<p>$ irb<br>
  irb(main):001:0&gt; puts RUBY_VERSION<br>
  2.0.0<br>
  =&gt; nil  </p>
</blockquote>


<p>这是一个Ruby交互会式会话的例子。我们在终端中打印了一个特别的常量RUBY_VERSION，它被设置为当前使用的Ruby的版本。<br>
译注：原文的作者使用的是ruby 1.8.7，而如今ruby最新版已经是2.0.0了，因此我在翻译的时候也结合了当前新的内容。</p>


<h2>Ruby脚本</h2>


<p>我们开始我们的第一个简单的Ruby脚本例子。  </p>


<blockquote>
<p>#!/usr/bin/ruby<br>
 # first.rb<br>
 puts &#8220;This is Ruby&#8221;  </p>
</blockquote>


<p>这个脚本我们将在终端上打印一条消息。</p>


<blockquote>
<p>#!/usr/bin/ruby</p>
</blockquote>


<p>UNIX下的每一个脚本都是以shebang符号开始的。shebang是脚本中开始的前两个字符：<strong>#!</strong>。shebang后面是执行我们脚本的解释器的路径。/usr/bin是Ruby解释器最常用的位置。它也可以定位在/usr/local/bin或者其他什么地方。</p>


<blockquote>
<p># first.rb  </p>
</blockquote>


<p>在Ruby中注释是以#开始。</p>


<blockquote>
<p>puts &#8220;This is Ruby&#8221; </p>
</blockquote>


<p>puts方法是将字符串打印到终端。</p>


<blockquote>
<p>$ which ruby<br>
 /usr/bin/ruby  </p>
</blockquote>


<p>Ruby解释器的路径可以使用which命令找到。</p>


<blockquote>
<p>$ chmod +x first.rb<br>
 $ ./first.rb<br>
 This is Ruby  </p>
</blockquote>


<p>通过chmod命令，我们给脚本增加可执行的权限。</p>


<h2>资源</h2>


<p>以下资源在编写该教程时会使用到：<br>
<em> <a href="http://www.ruby-lang.org/">ruby-lang.org</a><br>
</em> <a href="http://ruby-doc.org/">ruby-doc.org</a><br>
<em> <a href="http://en.wikipedia.org/wiki/Ruby_(programming_language)">Ruby article on wikipedia.org</a><br>
</em> <a href="http://ruby.runpaint.org/">ruby.runpaint.org</a></p>


<p>在这章的教程中我们介绍了Ruby语言。  </p>


<hr>


<p>原文地址： <a href="http://zetcode.com/lang/rubytutorial/ruby/">http://zetcode.com/lang/rubytutorial/ruby/</a><br>
翻译：龙昌  admin@longchangjin.cn<br>
完整教程：<a href="https://github.com/wusuopu/Ruby-tutorial">https://github.com/wusuopu/Ruby-tutorial</a>  </p>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
    <h1 class="entry-title"><a href="http://www.xefan.com/archives/83890.html">Scrapy框架学习笔记3—— Scrapy与mongodb结合</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-10-07T00:00:00+08:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>7</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>12:00 am</span></time>
        
           | <a href="http://www.xefan.com/archives/83890.html#disqus_thread"
             data-disqus-identifier="http://www.xefan.com/archives/83890.html">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>创建一个新的Item Pipeline，并将其添加到settings.py的ITEM_PIPELINES列表中。<br/>
在process_item方法中将item的数据保存到mongodb中。<br/>
scrapy的Item与dict相似，而mongodb中的数据是心bson格式保存的。因此Item的数据应该可以直接存储到mongodb中而几乎不用做额外的处理。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">class</span> <span class="nc">MyMongoDBPipeline</span><span class="p">(</span><span class="nb">object</span><span class="p">):</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">mongodb_server</span><span class="p">,</span> <span class="n">mongodb_port</span><span class="p">,</span> <span class="n">mongodb_db</span><span class="p">,</span> <span class="n">mongodb_collection</span><span class="p">):</span>
</span><span class='line'>        <span class="n">connection</span> <span class="o">=</span> <span class="n">pymongo</span><span class="o">.</span><span class="n">Connection</span><span class="p">(</span><span class="n">mongodb_server</span><span class="p">,</span> <span class="n">mongodb_port</span><span class="p">)</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">mongodb_db</span> <span class="o">=</span> <span class="n">mongodb_db</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">db</span> <span class="o">=</span> <span class="n">connection</span><span class="p">[</span><span class="n">mongodb_db</span><span class="p">]</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">mongodb_collection</span> <span class="o">=</span> <span class="n">mongodb_collection</span>
</span><span class='line'>        <span class="bp">self</span><span class="o">.</span><span class="n">collection</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">db</span><span class="p">[</span><span class="n">mongodb_collection</span><span class="p">]</span>
</span><span class='line'>
</span><span class='line'>    <span class="nd">@classmethod</span>
</span><span class='line'>    <span class="k">def</span> <span class="nf">from_crawler</span><span class="p">(</span><span class="n">cls</span><span class="p">,</span> <span class="n">crawler</span><span class="p">):</span>
</span><span class='line'>        <span class="c"># 连接mongodb</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">cls</span><span class="p">(</span><span class="s">&#39;localhost&#39;</span><span class="p">,</span> <span class="mi">27017</span><span class="p">,</span> <span class="s">&#39;scrapy&#39;</span><span class="p">,</span> <span class="s">&#39;items&#39;</span><span class="p">)</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">def</span> <span class="nf">process_item</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">item</span><span class="p">,</span> <span class="n">spider</span><span class="p">):</span>
</span><span class='line'>        <span class="n">result</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">collection</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">item</span><span class="p">))</span>
</span><span class='line'>        <span class="n">log</span><span class="o">.</span><span class="n">msg</span><span class="p">(</span><span class="s">&quot;Item </span><span class="si">%s</span><span class="s"> wrote to MongoDB database </span><span class="si">%s</span><span class="s">/</span><span class="si">%s</span><span class="s">&quot;</span> <span class="o">%</span> <span class="p">(</span><span class="n">result</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mongodb_db</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">mongodb_collection</span><span class="p">),</span>
</span><span class='line'>                <span class="n">level</span><span class="o">=</span><span class="n">log</span><span class="o">.</span><span class="n">DEBUG</span><span class="p">,</span> <span class="n">spider</span><span class="o">=</span><span class="n">spider</span><span class="p">)</span>
</span><span class='line'>        <span class="k">return</span> <span class="n">item</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
    <h1 class="entry-title"><a href="http://www.xefan.com/archives/83887.html">Scrapy框架学习笔记2—— Scrapy与Django结合</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-10-07T00:00:00+08:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>7</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>12:00 am</span></time>
        
           | <a href="http://www.xefan.com/archives/83887.html#disqus_thread"
             data-disqus-identifier="http://www.xefan.com/archives/83887.html">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>前面也介绍过了Scrapy与Django的设计思想非常相似，因此这个两个结合也是比较容易的。<br/>
以下方法在Scrapy 0.18与Django 1.5下面测试是可以用的。</p>

<h3>1.首先设置Django的运行环境</h3>


<p>在settings.py中添加如下代码：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">def</span> <span class="nf">setup_django_environment</span><span class="p">(</span><span class="n">path</span><span class="p">):</span>
</span><span class='line'>    <span class="kn">import</span> <span class="nn">imp</span><span class="o">,</span> <span class="nn">os</span><span class="o">,</span> <span class="nn">sys</span>
</span><span class='line'>    <span class="kn">from</span> <span class="nn">django.core.management</span> <span class="kn">import</span> <span class="n">setup_environ</span>
</span><span class='line'>    <span class="n">m</span> <span class="o">=</span> <span class="n">imp</span><span class="o">.</span><span class="n">load_module</span><span class="p">(</span><span class="s">&#39;settings&#39;</span><span class="p">,</span> <span class="o">*</span><span class="n">imp</span><span class="o">.</span><span class="n">find_module</span><span class="p">(</span><span class="s">&#39;settings&#39;</span><span class="p">,</span> <span class="p">[</span><span class="n">path</span><span class="p">]))</span>
</span><span class='line'>    <span class="n">setup_environ</span><span class="p">(</span><span class="n">m</span><span class="p">)</span>
</span><span class='line'>    <span class="n">sys</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">abspath</span><span class="p">(</span><span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">pardir</span><span class="p">)))</span>
</span><span class='line'>
</span><span class='line'><span class="n">setup_django_environment</span><span class="p">(</span><span class="s">&quot;/django/project/path&quot;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>


<p>注意：如果你的Django项目是用的sqlite数据库的话，那就需要设置为绝对路径，不能使用相对路径。</p>

<h3>2.创建django item</h3>


<p>首先在Django项目代码中创建一个Django的model，例如:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="kn">from</span> <span class="nn">django.db</span> <span class="kn">import</span> <span class="n">models</span>
</span><span class='line'><span class="k">class</span> <span class="nc">ScrapyModel</span><span class="p">(</span><span class="n">models</span><span class="o">.</span><span class="n">Model</span><span class="p">):</span>
</span><span class='line'>    <span class="n">title</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
</span><span class='line'>    <span class="n">link</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">CharField</span><span class="p">(</span><span class="n">max_length</span><span class="o">=</span><span class="mi">200</span><span class="p">)</span>
</span><span class='line'>    <span class="n">desc</span> <span class="o">=</span> <span class="n">models</span><span class="o">.</span><span class="n">TextField</span><span class="p">()</span>
</span></code></pre></td></tr></table></div></figure>


<p>然后在Scrapy项目中创建一个新的Item，只不过这次我们不再是继承自scrapy.item.Item，而是scrapy.contrib.djangoitem.DjangoItem:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="k">class</span> <span class="nc">Test1DjItem</span><span class="p">(</span><span class="n">DjangoItem</span><span class="p">):</span>
</span><span class='line'>    <span class="n">django_model</span> <span class="o">=</span> <span class="n">ScrapyModel</span>
</span></code></pre></td></tr></table></div></figure>


<p>用法与原来的Item相同，只是最后要执行一个save函数来调用django的save方法将数据存入数据库。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
    <h1 class="entry-title"><a href="http://www.xefan.com/archives/83883.html">Scrapy框架学习笔记1——概括</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-10-07T00:00:00+08:00'><span class='date'><span class='date-month'>Oct</span> <span class='date-day'>7</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>12:00 am</span></time>
        
           | <a href="http://www.xefan.com/archives/83883.html#disqus_thread"
             data-disqus-identifier="http://www.xefan.com/archives/83883.html">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Scrapy是一个python的web爬虫框架，其设计思想与Django非常相似。如果事先用过Django的话那么理解Scrapy应该不难。</p>

<h3>0.安装Scrapy</h3>


<p>当前Scrapy的稳定版本是0.18<br/>
使用pip进行安装：  <code>pip install Scrapy</code><br/>
使用easy_install进行安装：  <code>easy_install Scrapy</code></p>

<p>初次使用可以按照它的官方教程操作，先熟悉一下：<br/>
<a href="http://doc.scrapy.org/en/0.18/intro/tutorial.html">http://doc.scrapy.org/en/0.18/intro/tutorial.html</a></p>

<h3>1.一个项目的基本流程</h3>


<p>  创建新项目  scrapy startproject &lt;name&gt;</p>

<p>  然后在&lt;name&gt;/spiders目录下新建一个python文件。<br/>
  编写一个新的class继承自 scrapy.spider.BaseSpider，并且需要设置如下属性：<br/>
    * name: 该爬虫的名字，不能与其它的相同<br/>
    * start_urls: 开始的url入口<br/>
    * parse(): 对从start_urls的获取的内容进行处理的函数，需要一个Response参数<br/>
    * allowed_domains: 一个列表，表示该爬虫允许爬取的网站域名。可选</p>

<p>  爬虫运行流程：<br/>
    * 首先调用 start_requests()方法访问start_urls的链接（默认的），然后由parse回调方法对请求的响应进行处理。<br/>
    * 在回调中处理Response，并返回Item或者Request，再或者是由这两种对象组成的一个可迭代的对象。<br/>
      Request对象对应的callback可以与parse相同，也可以不同。</p>

<p>  最后运行这个爬虫脚本：  scrapy crawl name</p>

<p>  也可以直接在终端运行一个选择器： scrapy shell &lt;url&gt;</p>

<h3>2.使用Item</h3>


<pre><code>scrapy.item.Item的调用接口类似于python的dict，Item包含多个scrapy.item.Field。  
这跟django的Model与Field有点相似。  
Item通常是在Spider的parse方法里使用，它用来保存解析到的数据。
</code></pre>

<h3>3.使用Item Pipeline</h3>


<p>  在settings.py中设置ITEM_PIPELINES，其默认为[]，与django的MIDDLEWARE_CLASSES等相似。<br/>
  从Spider的parse返回的Item数据将依次被ITEM_PIPELINES列表中的Pipeline类处理。</p>

<p>  一个Item Pipeline类必须实现以下方法：</p>

<blockquote><p> process_item(item, spider)</p>

<blockquote><p>为每个item pipeline组件调用，并且需要返回一个scrapy.item.Item实例对象或者抛出一个scrapy.exceptions.DropItem异常。<br/>
当抛出异常后该item将不会被之后的pipeline处理。<br/>
参数:<br/>
        item (Item object) – 由parse方法返回的Item对象<br/>
        spider (BaseSpider object) – 抓取到这个Item对象对应的爬虫对象</p></blockquote>

<p> 也可额外的实现以下两个方法：<br/>
 open_spider(spider)</p>

<blockquote><p>当爬虫打开之后被调用。<br/>
参数: spider (BaseSpider object) – 已经运行的爬虫</p></blockquote>

<p> close_spider(spider)</p>

<blockquote><p>当爬虫关闭之后被调用。<br/>
参数: spider (BaseSpider object) – 已经关闭的爬虫</p></blockquote></blockquote>

<h3>4.保存数据</h3>


<p>  想要保存抓取到的数据，最简单的方法是使用Feed exports。 参考官方文档：<a href="http://doc.scrapy.org/en/0.18/topics/feed-exports.html#topics-feed-exports">http://doc.scrapy.org/en/0.18/topics/feed-exports.html#topics-feed-exports</a></p>

<p>  例如将抓取的数据导出为json:  scrapy crawl dmoz -o items.json -t json</p>

<p>  对于小项目用这种方法也足够了。如果是比较复杂的数据的话可能就需要编写一个Item Pipeline进行处理了。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
    <h1 class="entry-title"><a href="http://www.xefan.com/archives/83880.html">分享几款vim风格的浏览器</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-08-24T00:00:00+08:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>24</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>12:00 am</span></time>
        
           | <a href="http://www.xefan.com/archives/83880.html#disqus_thread"
             data-disqus-identifier="http://www.xefan.com/archives/83880.html">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>作为一个了vim用户，希望所有的操作都能够以vim的按键方式完成，上网浏览网页也不例外。于是乎就找了几款vim按键绑定的浏览器。</p>

<p>0.Firefox + Vimperator / Chrome + Vimium<br/>
如果是用的Firefox或者Chrome浏览器的话直接安装相应的插件即可达到想要的效果。<br/>
Firefox的是Vimperator；Chrome的是Vimium。</p>

<p>但是感觉Firefox和Chrome有时又太占资源了，我想到一个轻量级的浏览器。</p>

<p>1.w3m<br/>
如果你是一个终端控的话，w3m貌似还不错。现在常见的Linux发行版的软件源中应该都包含了w3m，直接通过软件仓库安装就行了。<br/>
只不过w3m太简洁了，显示不了CSS样式，执行不了js代码，甚至是显示图片都比较麻烦。</p>

<p>2.uzbl<br/>
uzbl是一款基于GTK+Webkit的浏览器，只是它的按键与原生的vim相差比较大，我刚开始操作不太适应。<br/>
它的配置文件在$HOME/.config/uzbl目录下，如果把它配置好了的话那使用起来应该也会很不错的。<br/>
uzbl默认是不支持多标签的，如果要想打开多个标签请运行uzbl-tabbed程序。<br/>
下载地址：<a href="http://www.uzbl.org/">http://www.uzbl.org/</a></p>

<p>linuxdeepin用户可以执行命令 sudo apt-get install uzbl来安装。</p>

<p>3.dwb<br/>
dwb是一款基于gtk和webkit的轻量级的浏览器。它的按键与Firefox的Vimperator插件较为相似。<br/>
我个人觉得dwb是这几款浏览器中最为方便的，它配置比较简单，而且提供了一个web的配置页面。如图：<br/>
<img src="http://portix.bitbucket.org/dwb/resources/prefs.jpg" alt="" /></p>

<p>下载地址：<a href="http://portix.bitbucket.org/dwb/">http://portix.bitbucket.org/dwb/</a></p>

<p>4.luakit<br/>
luakit也是基于gtk和webkit的，只不过它是用lua语言开发的。它的配置文件也是lua脚本，如果想到修改配置的话可能需要懂点lua语言。<br/>
我感觉luakit的按键与vim最相近，而且它还提供了页面调试功能，这对做web开发的人来说比较方便。</p>

<p>下载地址：<a href="http://mason-larobina.github.io/luakit/">http://mason-larobina.github.io/luakit/</a></p>

<p>linuxdeepin用户可以执行命令 sudo apt-get install luakit来安装。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
    <h1 class="entry-title"><a href="http://www.xefan.com/archives/83877.html">分享两个vim的git插件</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-08-11T00:00:00+08:00'><span class='date'><span class='date-month'>Aug</span> <span class='date-day'>11</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>12:00 am</span></time>
        
           | <a href="http://www.xefan.com/archives/83877.html#disqus_thread"
             data-disqus-identifier="http://www.xefan.com/archives/83877.html">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>1.vim-git</p>

<p>我只是简单体验发一下，个人觉得这个就是用vim的命令把git的命令包装了一下，还不如直接在终端下操作方便。</p>

<p>常用命令<br/>
:GitAdd<br/>
:GitCommit<br/>
:GitStatus<br/>
:GitLog<br/>
:GitCheckout<br/>
:GitDiff<br/>
:GitPull<br/>
:GitPush</p>

<p>快捷键<br/>
&lt;Leader&gt;gd 等同于 :GitDiff<br/>
&lt;Leader&gt;gD 等同于 :GitDiff —cached<br/>
&lt;Leader&gt;gs 等同于 :GitStatus<br/>
&lt;Leader&gt;gl 等同于 :GitLog<br/>
&lt;Leader&gt;ga 等同于 :GitAdd<br/>
&lt;Leader&gt;gA 等同于 :GitAdd &lt;cfile&gt;<br/>
&lt;Leader&gt;gc 等同于 :GitCommit</p>

<p>下载地址：<a href="https://github.com/motemen/git-vim.git">https://github.com/motemen/git-vim.git</a></p>

<p>2.vim-fugitive</p>

<p>感觉这个比较强大，尤其是配合vimdiff来查看文件的发动非常方便。
它的说明文档介绍到如果你的vim版本低于7.2，那么建议同时也把vim-git安装上。</p>

<p>下载地址：<a href="https://github.com/tpope/vim-fugitive.git">https://github.com/tpope/vim-fugitive.git</a></p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
    <h1 class="entry-title"><a href="http://www.xefan.com/archives/83875.html">Md5的一个碰撞例子</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-07-20T00:00:00+08:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>20</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>12:00 am</span></time>
        
           | <a href="http://www.xefan.com/archives/83875.html#disqus_thread"
             data-disqus-identifier="http://www.xefan.com/archives/83875.html">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>md5作为计算机安全领域广泛使用的一种散列函数，被用于检测信息是否完整一致。</p>

<p>然而在2004年8月17日的美国加州圣巴巴拉，正在召开的国际密码学会议（Crypto’2004）上来自山东大学的王小云教授做了破译MD5、HAVAL-128、 MD4和RIPEMD算法的报告。她公布了MD系列算法的破解结果。</p>

<p>各位好奇的可以在网上搜索王小云老师的那篇论文，反正我是看不懂的。不过倒是找到了一个md5碰撞的例子，于是就拿来分享一下。</p>

<p>比如有两个文件test1、test2，文件的十六进制内容分别如下：</p>

<pre>
% xxd test1            
0000000: 0e30 6561 559a a787 d00b c6f7 0bbd fe34  .0eaU..........4
0000010: 04cf 0365 9e70 4f85 34c0 0ffb 659c 4c87  ...e.pO.4...e.L.
0000020: 40cc 942f eb2d a115 a3f4 155c bb86 0749  @../.-.....\...I
0000030: 7386 656d 7d1f 34a4 2059 d78f 5a8d d1ef  s.em}.4. Y..Z...

% xxd test2
0000000: 0e30 6561 559a a787 d00b c6f7 0bbd fe34  .0eaU..........4
0000010: 04cf 0365 9e74 4f85 34c0 0ffb 659c 4c87  ...e.tO.4...e.L.
0000020: 40cc 942f eb2d a115 a3f4 15dc bb86 0749  @../.-.........I
0000030: 7386 656d 7d1f 34a4 2059 d78f 5a8d d1ef  s.em}.4. Y..Z...
</pre>


<p>如果想得到文件的原始内容，可以把上面的输出信息保存为一个文本文件（如test.txt），然后再执行命令 xxd -r test1.txt > test 即可。
从上面可以看到这两个文件的内容明显是不一样的，那么现在就来计算一下这两个文件的md5值吧。</p>

<pre>
% md5sum test1
cee9a457e790cf20d4bdaa6d69f01e41  test1
% md5sum test2
cee9a457e790cf20d4bdaa6d69f01e41  test2
</pre>


<p>从计算结果可以看到，虽然这两个文件内容不同，但是它们的md5值却是相同的。这个就是所谓的碰撞。</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
    <h1 class="entry-title"><a href="http://www.xefan.com/archives/83873.html">Python中的字符串匹配算法分析</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-07-14T00:00:00+08:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>14</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>12:00 am</span></time>
        
           | <a href="http://www.xefan.com/archives/83873.html#disqus_thread"
             data-disqus-identifier="http://www.xefan.com/archives/83873.html">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>在Python在str对象的find、index、replace等操作都是基于字符串匹配的。通过阅读Python的源代码可知，在Python中的字符串匹配算法是基于Boyer-Moore、Horspool和Sunday的混合。</p>

<p>关于它的详细介绍可以访问这个网页： <a href="http://effbot.org/zone/stringlib.htm">http://effbot.org/zone/stringlib.htm</a></p>

<p>用Python代码实现如下：</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
</pre></td><td class='code'><pre><code class='python'><span class='line'><span class="c">#!/usr/bin/env python</span>
</span><span class='line'><span class="c">#-*- coding:utf-8 -*-</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">make_delta1</span><span class="p">(</span><span class="n">p</span><span class="p">):</span>
</span><span class='line'>    <span class="n">ALPHABET_LEN</span> <span class="o">=</span> <span class="mi">256</span>
</span><span class='line'>    <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'>    <span class="n">patternlen</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
</span><span class='line'>    <span class="n">delta1</span> <span class="o">=</span> <span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">ALPHABET_LEN</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">ALPHABET_LEN</span><span class="p">:</span>
</span><span class='line'>        <span class="n">delta1</span><span class="p">[</span><span class="n">i</span><span class="p">]</span> <span class="o">=</span> <span class="n">patternlen</span>
</span><span class='line'>        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span class='line'>
</span><span class='line'>    <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'>    <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;</span> <span class="n">patternlen</span><span class="o">-</span><span class="mi">1</span><span class="p">:</span>
</span><span class='line'>        <span class="n">delta1</span><span class="p">[</span><span class="nb">ord</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="n">i</span><span class="p">])]</span> <span class="o">=</span> <span class="n">patternlen</span><span class="o">-</span><span class="mi">1</span> <span class="o">-</span> <span class="n">i</span>
</span><span class='line'>        <span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span class='line'>    <span class="k">return</span> <span class="n">delta1</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="k">def</span> <span class="nf">find</span><span class="p">(</span><span class="n">s</span><span class="p">,</span> <span class="n">p</span><span class="p">):</span>
</span><span class='line'>    <span class="c"># find first occurrence of p in s</span>
</span><span class='line'>    <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">s</span><span class="p">)</span>
</span><span class='line'>    <span class="n">m</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
</span><span class='line'>    <span class="n">delta1</span> <span class="o">=</span> <span class="n">make_delta1</span><span class="p">(</span><span class="n">p</span><span class="p">)</span>
</span><span class='line'>    <span class="n">skip</span> <span class="o">=</span> <span class="n">delta1</span><span class="p">[</span><span class="nb">ord</span><span class="p">(</span><span class="n">p</span><span class="p">[</span><span class="n">m</span><span class="o">-</span><span class="mi">1</span><span class="p">])]</span>
</span><span class='line'>    <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span>
</span><span class='line'>    <span class="k">while</span> <span class="n">i</span> <span class="o">&lt;=</span> <span class="n">n</span><span class="o">-</span><span class="n">m</span><span class="p">:</span>
</span><span class='line'>        <span class="k">if</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="n">m</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">p</span><span class="p">[</span><span class="n">m</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>  <span class="c"># (boyer-moore)</span>
</span><span class='line'>            <span class="c"># potential match</span>
</span><span class='line'>            <span class="k">if</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="p">:</span><span class="n">i</span><span class="o">+</span><span class="n">m</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span> <span class="o">==</span> <span class="n">p</span><span class="p">[:</span><span class="n">m</span><span class="o">-</span><span class="mi">1</span><span class="p">]:</span>
</span><span class='line'>                <span class="k">return</span> <span class="n">i</span>
</span><span class='line'>            <span class="k">if</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="n">m</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">p</span><span class="p">:</span>
</span><span class='line'>                <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="n">m</span> <span class="o">+</span> <span class="mi">1</span>   <span class="c"># (sunday)</span>
</span><span class='line'>            <span class="k">else</span><span class="p">:</span>
</span><span class='line'>                <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="n">skip</span>    <span class="c"># (horspool)</span>
</span><span class='line'>        <span class="k">else</span><span class="p">:</span>
</span><span class='line'>            <span class="c"># skip</span>
</span><span class='line'>            <span class="k">if</span> <span class="n">s</span><span class="p">[</span><span class="n">i</span><span class="o">+</span><span class="n">m</span><span class="p">]</span> <span class="ow">not</span> <span class="ow">in</span> <span class="n">p</span><span class="p">:</span>
</span><span class='line'>                <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="n">m</span> <span class="o">+</span> <span class="mi">1</span>   <span class="c"># (sunday)</span>
</span><span class='line'>            <span class="k">else</span><span class="p">:</span>
</span><span class='line'>                <span class="n">i</span> <span class="o">=</span> <span class="n">i</span> <span class="o">+</span> <span class="mi">1</span>
</span><span class='line'>    <span class="k">return</span> <span class="o">-</span><span class="mi">1</span>                   <span class="c"># not found</span>
</span><span class='line'>
</span><span class='line'><span class="k">if</span> <span class="n">__name__</span> <span class="o">==</span> <span class="s">&#39;__main__&#39;</span><span class="p">:</span>
</span><span class='line'>    <span class="k">print</span> <span class="n">find</span><span class="p">(</span><span class="s">&quot;HERE IS A SILMPLE EXAMPLE&quot;</span><span class="p">,</span> <span class="s">&quot;EXAMPLE&quot;</span><span class="p">)</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
    
    <h1 class="entry-title"><a href="http://www.xefan.com/archives/83871.html">字符串匹配算法（五）——Horspool算法</a></h1>
    
    
      <p class="meta">
        




<time class='entry-date' datetime='2013-07-14T00:00:00+08:00'><span class='date'><span class='date-month'>Jul</span> <span class='date-day'>14</span><span class='date-suffix'>th</span>, <span class='date-year'>2013</span></span> <span class='time'>12:00 am</span></time>
        
           | <a href="http://www.xefan.com/archives/83871.html#disqus_thread"
             data-disqus-identifier="http://www.xefan.com/archives/83871.html">Comments</a>
        
      </p>
    
  </header>


  <div class="entry-content"><p>Horspool算法是Boyer-Moore算法的一个简化版，全名叫做Boyer-Moore-Horspool算法。</p>

<p>Horspool算法的基本思想是将文本串text中匹配窗口的最后一个字符跟模式串pattern中的最后一个字符比较。如果相等，继续从后向前对主串和模式串进行比较，直到完全相等或者在某个字符处不匹配为止 。如果不匹配，则根据文本串匹配窗口中的最后一个字符β在模式串中的下一个出现位置将窗口向右移动；若字符β没有在模式串中出现，则直接将整个模式串滑过这一位。</p>

<p>同样的举个例子来说明一下。假定文本串text为：”HERE IS A SIMPLE EXAMPLE”，长度为n；模式串pattern为：”EXAMPLE”，长度为m；现在要在text中搜索看看是否包含pattern。</p>

<p>1).</p>

<pre>
HERE I<span style="color: #ff0000;">S</span> A SIMPLE EXAMPLE
EXAMPL<span style="color: #ff0000;">E</span>
</pre>


<p>&rsquo;S&#8217;与&#8217;E&#8217;匹配失败，并且&rsquo;S&#8217;没有在pattern中出现，所以直接将pattern滑过&rsquo;S&#8217;这一位。</p>

<p>2).</p>

<pre>
HERE IS A SIM<span style="color: #ff0000;">P</span>LE EXAMPLE
       EXAMPL<span style="color: #ff0000;">E</span>
</pre>


<p>这时&#8217;P&#8217;与&#8217;E&#8217;匹配失败，但是&#8217;P&#8217;在模式串pattern中出现了，所以把pattern向右移，使得text中的&#8217;P&#8217;与pattern中的&#8217;P&#8217;对齐。</p>

<p>3).</p>

<pre>
HERE IS A SIM<span style="color: #00ff00;">P</span>L<span style="color: #ff0000;">E</span> EXAMPLE
         EXAM<span style="color: #00ff00;">P</span>L<span style="color: #ff0000;">E</span>
</pre>


<p>然后重复执行之前的操作。</p>

<p>用C语言实现如下。</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
<span class='line-number'>46</span>
<span class='line-number'>47</span>
<span class='line-number'>48</span>
<span class='line-number'>49</span>
<span class='line-number'>50</span>
<span class='line-number'>51</span>
<span class='line-number'>52</span>
<span class='line-number'>53</span>
<span class='line-number'>54</span>
<span class='line-number'>55</span>
<span class='line-number'>56</span>
<span class='line-number'>57</span>
<span class='line-number'>58</span>
<span class='line-number'>59</span>
<span class='line-number'>60</span>
<span class='line-number'>61</span>
<span class='line-number'>62</span>
<span class='line-number'>63</span>
<span class='line-number'>64</span>
<span class='line-number'>65</span>
<span class='line-number'>66</span>
<span class='line-number'>67</span>
<span class='line-number'>68</span>
<span class='line-number'>69</span>
<span class='line-number'>70</span>
<span class='line-number'>71</span>
<span class='line-number'>72</span>
<span class='line-number'>73</span>
<span class='line-number'>74</span>
<span class='line-number'>75</span>
<span class='line-number'>76</span>
<span class='line-number'>77</span>
<span class='line-number'>78</span>
<span class='line-number'>79</span>
<span class='line-number'>80</span>
<span class='line-number'>81</span>
<span class='line-number'>82</span>
<span class='line-number'>83</span>
<span class='line-number'>84</span>
<span class='line-number'>85</span>
<span class='line-number'>86</span>
<span class='line-number'>87</span>
</pre></td><td class='code'><pre><code class='c'><span class='line'><span class="cp">#include &lt;stdio.h&gt;</span>
</span><span class='line'><span class="cp">#include &lt;string.h&gt;</span>
</span><span class='line'><span class="cp">#include &lt;limits.h&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="cm">/* Returns a pointer to the first occurrence of &quot;needle&quot;</span>
</span><span class='line'><span class="cm"> * within &quot;haystack&quot;, or NULL if not found. Works like</span>
</span><span class='line'><span class="cm"> * memmem().</span>
</span><span class='line'><span class="cm"> */</span>
</span><span class='line'>
</span><span class='line'><span class="cm">/* Note: In this example needle is a C string. The ending</span>
</span><span class='line'><span class="cm"> * 0x00 will be cut off, so you could call this example with</span>
</span><span class='line'><span class="cm"> * boyermoore_horspool_memmem(haystack, hlen, &quot;abc&quot;, sizeof(&quot;abc&quot;))</span>
</span><span class='line'><span class="cm"> */</span>
</span><span class='line'><span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">char</span> <span class="o">*</span>
</span><span class='line'><span class="nf">boyermoore_horspool_memmem</span><span class="p">(</span><span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">char</span><span class="o">*</span> <span class="n">haystack</span><span class="p">,</span> <span class="kt">size_t</span> <span class="n">hlen</span><span class="p">,</span>
</span><span class='line'>                           <span class="k">const</span> <span class="kt">unsigned</span> <span class="kt">char</span><span class="o">*</span> <span class="n">needle</span><span class="p">,</span>   <span class="kt">size_t</span> <span class="n">nlen</span><span class="p">)</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="kt">int</span> <span class="n">index</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>    <span class="kt">size_t</span> <span class="n">scan</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'>    <span class="kt">size_t</span> <span class="n">bad_char_skip</span><span class="p">[</span><span class="n">UCHAR_MAX</span> <span class="o">+</span> <span class="mi">1</span><span class="p">];</span> <span class="cm">/* Officially called:</span>
</span><span class='line'><span class="cm">                                          * bad character shift */</span>
</span><span class='line'>
</span><span class='line'>    <span class="cm">/* Sanity checks on the parameters */</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="n">nlen</span> <span class="o">&lt;=</span> <span class="mi">0</span> <span class="o">||</span> <span class="o">!</span><span class="n">haystack</span> <span class="o">||</span> <span class="o">!</span><span class="n">needle</span><span class="p">)</span>
</span><span class='line'>        <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="cm">/* ---- Preprocess ---- */</span>
</span><span class='line'>    <span class="cm">/* Initialize the table to default value */</span>
</span><span class='line'>    <span class="cm">/* When a character is encountered that does not occur</span>
</span><span class='line'><span class="cm">     * in the needle, we can safely skip ahead for the whole</span>
</span><span class='line'><span class="cm">     * length of the needle.</span>
</span><span class='line'><span class="cm">     */</span>
</span><span class='line'>    <span class="k">for</span> <span class="p">(</span><span class="n">scan</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">scan</span> <span class="o">&lt;=</span> <span class="n">UCHAR_MAX</span><span class="p">;</span> <span class="n">scan</span> <span class="o">=</span> <span class="n">scan</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
</span><span class='line'>        <span class="n">bad_char_skip</span><span class="p">[</span><span class="n">scan</span><span class="p">]</span> <span class="o">=</span> <span class="n">nlen</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="cm">/* C arrays have the first byte at [0], therefore:</span>
</span><span class='line'><span class="cm">     * [nlen - 1] is the last byte of the array. */</span>
</span><span class='line'>    <span class="kt">size_t</span> <span class="n">last</span> <span class="o">=</span> <span class="n">nlen</span> <span class="o">-</span> <span class="mi">1</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="cm">/* Then populate it with the analysis of the needle */</span>
</span><span class='line'>    <span class="k">for</span> <span class="p">(</span><span class="n">scan</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span> <span class="n">scan</span> <span class="o">&lt;</span> <span class="n">last</span><span class="p">;</span> <span class="n">scan</span> <span class="o">=</span> <span class="n">scan</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span>
</span><span class='line'>        <span class="n">bad_char_skip</span><span class="p">[</span><span class="n">needle</span><span class="p">[</span><span class="n">scan</span><span class="p">]]</span> <span class="o">=</span> <span class="n">last</span> <span class="o">-</span> <span class="n">scan</span><span class="p">;</span>
</span><span class='line'>
</span><span class='line'>    <span class="cm">/* ---- Do the matching ---- */</span>
</span><span class='line'>
</span><span class='line'>    <span class="cm">/* Search the haystack, while the needle can still be within it. */</span>
</span><span class='line'>    <span class="k">while</span> <span class="p">(</span><span class="n">hlen</span> <span class="o">&gt;=</span> <span class="n">nlen</span><span class="p">)</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="cm">/* scan from the end of the needle */</span>
</span><span class='line'>        <span class="k">for</span> <span class="p">(</span><span class="n">scan</span> <span class="o">=</span> <span class="n">last</span><span class="p">;</span> <span class="n">haystack</span><span class="p">[</span><span class="n">scan</span><span class="p">]</span> <span class="o">==</span> <span class="n">needle</span><span class="p">[</span><span class="n">scan</span><span class="p">];</span> <span class="n">scan</span> <span class="o">=</span> <span class="n">scan</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
</span><span class='line'>            <span class="k">if</span> <span class="p">(</span><span class="n">scan</span> <span class="o">==</span> <span class="mi">0</span><span class="p">)</span> <span class="cm">/* If the first byte matches, we&#39;ve found it. */</span>
</span><span class='line'>            <span class="p">{</span>
</span><span class='line'>                <span class="n">printf</span><span class="p">(</span><span class="s">&quot;index: %d</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">index</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
</span><span class='line'>                <span class="k">return</span> <span class="n">haystack</span><span class="p">;</span>
</span><span class='line'>            <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>        <span class="cm">/* otherwise, we need to skip some bytes and start again.</span>
</span><span class='line'><span class="cm">           Note that here we are getting the skip value based on the last byte</span>
</span><span class='line'><span class="cm">           of needle, no matter where we didn&#39;t match. So if needle is: &quot;abcd&quot;</span>
</span><span class='line'><span class="cm">           then we are skipping based on &#39;d&#39; and that value will be 4, and</span>
</span><span class='line'><span class="cm">           for &quot;abcdd&quot; we again skip on &#39;d&#39; but the value will be only 1.</span>
</span><span class='line'><span class="cm">           The alternative of pretending that the mismatched character was</span>
</span><span class='line'><span class="cm">           the last character is slower in the normal case (E.g. finding</span>
</span><span class='line'><span class="cm">           &quot;abcd&quot; in &quot;...azcd...&quot; gives 4 by using &#39;d&#39; but only</span>
</span><span class='line'><span class="cm">           4-2==2 using &#39;z&#39;. */</span>
</span><span class='line'>        <span class="n">hlen</span>     <span class="o">-=</span> <span class="n">bad_char_skip</span><span class="p">[</span><span class="n">haystack</span><span class="p">[</span><span class="n">last</span><span class="p">]];</span>
</span><span class='line'>        <span class="n">index</span> <span class="o">+=</span> <span class="n">bad_char_skip</span><span class="p">[</span><span class="n">haystack</span><span class="p">[</span><span class="n">last</span><span class="p">]];</span>
</span><span class='line'>        <span class="n">haystack</span> <span class="o">+=</span> <span class="n">bad_char_skip</span><span class="p">[</span><span class="n">haystack</span><span class="p">[</span><span class="n">last</span><span class="p">]];</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>
</span><span class='line'>    <span class="k">return</span> <span class="nb">NULL</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span><span class='line'>
</span><span class='line'>
</span><span class='line'><span class="kt">int</span> <span class="nf">main</span><span class="p">(</span><span class="kt">int</span> <span class="n">argc</span><span class="p">,</span> <span class="kt">char</span> <span class="o">*</span><span class="n">argv</span><span class="p">[])</span>
</span><span class='line'><span class="p">{</span>
</span><span class='line'>    <span class="kt">char</span> <span class="n">text</span><span class="p">[]</span> <span class="o">=</span> <span class="s">&quot;HERE IS A SILMPLE EXAMPLE&quot;</span><span class="p">;</span>
</span><span class='line'>    <span class="kt">char</span> <span class="n">pattern</span><span class="p">[]</span> <span class="o">=</span> <span class="s">&quot;EXAMPLE&quot;</span><span class="p">;</span>
</span><span class='line'>    <span class="kt">char</span> <span class="o">*</span><span class="n">result</span> <span class="o">=</span> <span class="n">boyermoore_horspool_memmem</span><span class="p">(</span><span class="n">text</span><span class="p">,</span> <span class="n">strlen</span><span class="p">(</span><span class="n">text</span><span class="p">),</span> <span class="n">pattern</span><span class="p">,</span> <span class="n">strlen</span><span class="p">(</span><span class="n">pattern</span><span class="p">));</span>
</span><span class='line'>    <span class="k">if</span> <span class="p">(</span><span class="n">result</span><span class="p">)</span>
</span><span class='line'>    <span class="p">{</span>
</span><span class='line'>        <span class="n">printf</span><span class="p">(</span><span class="s">&quot;result: %s</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">,</span> <span class="n">result</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span> <span class="k">else</span> <span class="p">{</span>
</span><span class='line'>        <span class="n">printf</span><span class="p">(</span><span class="s">&quot;failed!</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">);</span>
</span><span class='line'>    <span class="p">}</span>
</span><span class='line'>    <span class="k">return</span> <span class="mi">0</span><span class="p">;</span>
</span><span class='line'><span class="p">}</span>
</span></code></pre></td></tr></table></div></figure>

</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/page/9">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/page/7">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Subscription</h1>
  <!--以下是QQ邮件列表订阅嵌入代码--><script >var nId = "e7ee5da6d322dc7157c25cfd8a7700bb23a056dd1fb18cb4",nWidth="auto",sColor="light",sText="请输入邮件地址：" ;</script><script src="http://list.qq.com/zh_CN/htmledition/js/qf/page/qfcode.js" charset="gb18030"></script>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="http://www.xefan.com/archives/84137.html">Mongodb集群配置实例</a>
      </li>
    
      <li class="post">
        <a href="http://www.xefan.com/archives/84136.html">使用VIM进行PHP远程调试</a>
      </li>
    
      <li class="post">
        <a href="http://www.xefan.com/archives/84135.html">Nginx + Uwsgi + Django环境配置</a>
      </li>
    
      <li class="post">
        <a href="http://www.xefan.com/archives/84134.html">配置rails的vim环境</a>
      </li>
    
      <li class="post">
        <a href="http://www.xefan.com/archives/84133.html">博客终于迁移完成了！</a>
      </li>
    
  </ul>
</section>
<section>
  <h1>Categories</h1>
    <ul id="category-list"><li><a href='/categories/linux栏目/index.html'>linux栏目 (47)</a></li><li><a href='/categories/python栏目/index.html'>python栏目 (33)</a></li><li><a href='/categories/ruby栏目/index.html'>ruby栏目 (26)</a></li><li><a href='/categories/web开发/index.html'>web开发 (17)</a></li><li><a href='/categories/嵌入式栏目/index.html'>嵌入式栏目 (11)</a></li><li><a href='/categories/开源软件/index.html'>开源软件 (20)</a></li><li><a href='/categories/教程/index.html'>教程 (15)</a></li><li><a href='/categories/数据库/index.html'>数据库 (8)</a></li><li><a href='/categories/数据结构和算法/index.html'>数据结构和算法 (16)</a></li><li><a href='/categories/编程开发/index.html'>编程开发 (38)</a></li><li><a href='/categories/网络日志/index.html'>网络日志 (11)</a></li><li><a href='/categories/资源分享/index.html'>资源分享 (23)</a></li></ul>
</section>
<section>
  <h1>Tag Cloud</h1>
    <span id="tag-cloud"><a href='/tags/access/index.html' style='font-size: 105.45454545454545%'>access(6)</a> <a href='/tags/adobe/index.html' style='font-size: 100.9090909090909%'>adobe(1)</a> <a href='/tags/ajax/index.html' style='font-size: 101.81818181818181%'>ajax(2)</a> <a href='/tags/apache/index.html' style='font-size: 100.9090909090909%'>apache(1)</a> <a href='/tags/arch/index.html' style='font-size: 106.36363636363636%'>Arch(7)</a> <a href='/tags/arm/index.html' style='font-size: 107.27272727272727%'>ARM(8)</a> <a href='/tags/asp/index.html' style='font-size: 106.36363636363636%'>asp(7)</a> <a href='/tags/c/index.html' style='font-size: 111.81818181818181%'>C(13)</a> <a href='/tags/css/index.html' style='font-size: 101.81818181818181%'>css(2)</a> <a href='/tags/django/index.html' style='font-size: 101.81818181818181%'>Django(2)</a> <a href='/tags/dreamweaver/index.html' style='font-size: 100.9090909090909%'>Dreamweaver(1)</a> <a href='/tags/fedora/index.html' style='font-size: 101.81818181818181%'>Fedora(2)</a> <a href='/tags/firefox/index.html' style='font-size: 102.72727272727273%'>firefox(3)</a> <a href='/tags/flash/index.html' style='font-size: 100.9090909090909%'>Flash(1)</a> <a href='/tags/ftp/index.html' style='font-size: 100.9090909090909%'>ftp(1)</a> <a href='/tags/gcc/index.html' style='font-size: 105.45454545454545%'>gcc(6)</a> <a href='/tags/gentoo/index.html' style='font-size: 101.81818181818181%'>Gentoo(2)</a> <a href='/tags/git/index.html' style='font-size: 103.63636363636364%'>git(4)</a> <a href='/tags/gobject/index.html' style='font-size: 105.45454545454545%'>GObject(6)</a> <a href='/tags/grub/index.html' style='font-size: 100.9090909090909%'>grub(1)</a> <a href='/tags/gtk/index.html' style='font-size: 115.45454545454545%'>gtk(17)</a> <a href='/tags/hash/index.html' style='font-size: 100.9090909090909%'>Hash(1)</a> <a href='/tags/ibus/index.html' style='font-size: 100.9090909090909%'>ibus(1)</a> <a href='/tags/js/index.html' style='font-size: 100.9090909090909%'>js(1)</a> <a href='/tags/linux/index.html' style='font-size: 160.0%'>Linux(66)</a> <a href='/tags/mongodb/index.html' style='font-size: 110.0%'>mongodb(11)</a> <a href='/tags/mysql/index.html' style='font-size: 103.63636363636364%'>mysql(4)</a> <a href='/tags/nginx/index.html' style='font-size: 100.9090909090909%'>nginx(1)</a> <a href='/tags/node/index.html' style='font-size: 100.9090909090909%'>node(1)</a> <a href='/tags/php/index.html' style='font-size: 109.0909090909091%'>php(10)</a> <a href='/tags/ps/index.html' style='font-size: 105.45454545454545%'>PS(6)</a> <a href='/tags/pygame/index.html' style='font-size: 110.9090909090909%'>pygame(12)</a> <a href='/tags/python/index.html' style='font-size: 145.45454545454544%'>python(50)</a> <a href='/tags/qt/index.html' style='font-size: 101.81818181818181%'>Qt(2)</a> <a href='/tags/redis/index.html' style='font-size: 100.9090909090909%'>Redis(1)</a> <a href='/tags/ruby/index.html' style='font-size: 123.63636363636364%'>Ruby(26)</a> <a href='/tags/scrapy/index.html' style='font-size: 102.72727272727273%'>Scrapy(3)</a> <a href='/tags/shell/index.html' style='font-size: 100.9090909090909%'>shell(1)</a> <a href='/tags/tq2440/index.html' style='font-size: 104.54545454545455%'>TQ2440(5)</a> <a href='/tags/ubuntu/index.html' style='font-size: 106.36363636363636%'>ubuntu(7)</a> <a href='/tags/usb/index.html' style='font-size: 102.72727272727273%'>USB(3)</a> <a href='/tags/vim/index.html' style='font-size: 123.63636363636364%'>vim(26)</a> <a href='/tags/virtualbox/index.html' style='font-size: 102.72727272727273%'>VirtualBox(3)</a> <a href='/tags/vmware/index.html' style='font-size: 100.9090909090909%'>vmware(1)</a> <a href='/tags/w3m/index.html' style='font-size: 100.9090909090909%'>w3m(1)</a> <a href='/tags/web开发/index.html' style='font-size: 112.72727272727272%'>Web开发(14)</a> <a href='/tags/windows/index.html' style='font-size: 106.36363636363636%'>windows(7)</a> <a href='/tags/wordpress/index.html' style='font-size: 100.9090909090909%'>WordPress(1)</a> <a href='/tags/xml/index.html' style='font-size: 100.9090909090909%'>xml(1)</a> <a href='/tags/免费/index.html' style='font-size: 100.9090909090909%'>免费(1)</a> <a href='/tags/内核/index.html' style='font-size: 100.9090909090909%'>内核(1)</a> <a href='/tags/匹配算法/index.html' style='font-size: 105.45454545454545%'>匹配算法(6)</a> <a href='/tags/单片机/index.html' style='font-size: 101.81818181818181%'>单片机(2)</a> <a href='/tags/嵌入式/index.html' style='font-size: 100.9090909090909%'>嵌入式(1)</a> <a href='/tags/开源软件/index.html' style='font-size: 108.18181818181819%'>开源软件(9)</a> <a href='/tags/排序算法/index.html' style='font-size: 108.18181818181819%'>排序算法(9)</a> <a href='/tags/文件空间/index.html' style='font-size: 100.9090909090909%'>文件空间(1)</a> <a href='/tags/无线网/index.html' style='font-size: 100.9090909090909%'>无线网(1)</a> <a href='/tags/正则式/index.html' style='font-size: 100.9090909090909%'>正则式(1)</a> <a href='/tags/注册机/index.html' style='font-size: 101.81818181818181%'>注册机(2)</a> <a href='/tags/游戏/index.html' style='font-size: 109.0909090909091%'>游戏(10)</a> <a href='/tags/电脑技巧/index.html' style='font-size: 108.18181818181819%'>电脑技巧(9)</a> <a href='/tags/空间/index.html' style='font-size: 100.9090909090909%'>空间(1)</a> <a href='/tags/算法/index.html' style='font-size: 114.54545454545455%'>算法(16)</a> <a href='/tags/红旗/index.html' style='font-size: 100.9090909090909%'>红旗(1)</a> <a href='/tags/经典语录/index.html' style='font-size: 100.9090909090909%'>经典语录(1)</a> <a href='/tags/网络日志/index.html' style='font-size: 105.45454545454545%'>网络日志(6)</a> <a href='/tags/翻译/index.html' style='font-size: 120.9090909090909%'>翻译(23)</a> <a href='/tags/视频教程/index.html' style='font-size: 109.0909090909091%'>视频教程(10)</a> <a href='/tags/资源分享/index.html' style='font-size: 110.9090909090909%'>资源分享(12)</a> <a href='/tags/转载/index.html' style='font-size: 101.81818181818181%'>转载(2)</a> <a href='/tags/随笔/index.html' style='font-size: 100.9090909090909%'>随笔(1)</a> </span>
</section>
<section>
  <h1>Link</h1>
    <ul id="category-list">
      <li><a target="_blank" title="我的Github" href="https://github.com/wusuopu">@Github</a></li>
      <li><a target="_blank" title="我的微博" href="http://www.weibo.com/u/1768691343">@Weibo</a></li>
      <li><a target="_blank" title="我的Twitter" href="https://twitter.com/longchangjin">@Twitter</a></li>
      <li><a target="_blank" title="我的豆瓣" href="http://www.douban.com/people/lchj/">@Douban</a></li>

      <li><a target="_blank" title="" href="http://www.vimer.cn/">Vimer的程序世界</a></li>
      <li><a target="_blank" title="" href="http://pythoner.net/">python开发者社区</a></li>
      <li><a target="_blank" title="" href="http://simple-is-better.com/">python.cn(news, jobs)</a></li>
      <li><a target="_blank" title="" href="http://gtk.awaysoft.com/">GTK+ 中文社区</a></li>
    </ul>
</section>

  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 - 龍昌 -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>
<div style="display:none;"><script src="http://s94.cnzz.com/stat.php?id=1259846&web_id=1259846&show=pic" language="JavaScript"></script></div>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'longchang';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>











</body>
</html>
