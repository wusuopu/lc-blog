<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Tag: Xml | 龍昌博客]]></title>
  <link href="http://www.xefan.com/tags/xml/atom.xml" rel="self"/>
  <link href="http://www.xefan.com/"/>
  <updated>2015-08-19T13:35:55+08:00</updated>
  <id>http://www.xefan.com/</id>
  <author>
    <name><![CDATA[龍昌]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[PHP对XML的读写实例]]></title>
    <link href="http://www.xefan.com/archives/83559.html"/>
    <updated>2011-07-24T00:00:00+08:00</updated>
    <id>http://www.xefan.com/archives/83559-PHP对XML的读写实例</id>
    <content type="html"><![CDATA[<p>新建两个文件，文件名分别为：photo_list.php、photo_list.xml，放在同一目录下。</p>

<p><strong>photo_list.xml</strong>文件内容：</p>

<pre><code class="xml">&lt;?xml version="1.0" encoding="utf-8"?&gt;
&lt;photos&gt;
&lt;photo&gt;
&lt;filename&gt;flashmo_175_01.jpg&lt;/filename&gt;
&lt;title&gt;精美相框&lt;/title&gt;
&lt;description&gt;
&lt;/description&gt;
&lt;/photo&gt;
&lt;photo&gt;
&lt;filename&gt;flashmo_175_02.jpg&lt;/filename&gt;
&lt;title&gt;精美相框&lt;/title&gt;
&lt;description&gt;
精美相框
&lt;/description&gt;
&lt;/photo&gt;
&lt;photo&gt;
&lt;filename&gt;flashmo_175_03.jpg&lt;/filename&gt;
&lt;title&gt;精美相框&lt;/title&gt;
&lt;description&gt;
精美相框
&lt;/description&gt;
&lt;/photo&gt;
&lt;photo&gt;
&lt;filename&gt;flashmo_175_04.jpg&lt;/filename&gt;
&lt;title&gt;精美相框&lt;/title&gt;
&lt;description&gt;
精美相框
&lt;/description&gt;
&lt;/photo&gt;
&lt;photo&gt;
&lt;filename&gt;flashmo_175_05.jpg&lt;/filename&gt;
&lt;title&gt;精美相框&lt;/title&gt;
&lt;description&gt;
精美相框
&lt;/description&gt;
&lt;/photo&gt;
&lt;photo&gt;
&lt;filename&gt;flashmo_175_06.jpg&lt;/filename&gt;
&lt;title&gt;精美相框&lt;/title&gt;
&lt;description&gt;
精美相框
&lt;/description&gt;
&lt;/photo&gt;
&lt;photo&gt;
&lt;filename&gt;flashmo_175_07.jpg&lt;/filename&gt;
&lt;title&gt;精美相框&lt;/title&gt;
&lt;description&gt;
精美相框
&lt;/description&gt;
&lt;/photo&gt;
&lt;photo&gt;
&lt;filename&gt;flashmo_175_08.jpg&lt;/filename&gt;
&lt;title&gt;精美相框&lt;/title&gt;
&lt;description&gt;
精美相框
&lt;/description&gt;
&lt;/photo&gt;
&lt;photo&gt;
&lt;filename&gt;flashmo_175_09.jpg&lt;/filename&gt;
&lt;title&gt;精美相框&lt;/title&gt;
&lt;description&gt;
精美相框
&lt;/description&gt;
&lt;/photo&gt;
&lt;photo&gt;
&lt;filename&gt;flashmo_175_10.jpg&lt;/filename&gt;
&lt;title&gt;精美相框&lt;/title&gt;
&lt;description&gt;
精美相框
&lt;/description&gt;
&lt;/photo&gt;
&lt;photo&gt;
&lt;filename&gt;flashmo_175_11.jpg&lt;/filename&gt;
&lt;title&gt;精美相框&lt;/title&gt;
&lt;description&gt;
精美相框
&lt;/description&gt;
&lt;/photo&gt;
&lt;photo&gt;
&lt;filename&gt;flashmo_175_12.jpg&lt;/filename&gt;
&lt;title&gt;精美相框&lt;/title&gt;
&lt;description&gt;
精美相框
&lt;/description&gt;
&lt;/photo&gt;
&lt;photo&gt;
&lt;filename&gt;flashmo_175_13.jpg&lt;/filename&gt;
&lt;title&gt;精美相框&lt;/title&gt;
&lt;description&gt;
精美相框
&lt;/description&gt;
&lt;/photo&gt;
&lt;photo&gt;
&lt;filename&gt;flashmo_175_14.jpg&lt;/filename&gt;
&lt;title&gt;精美相框&lt;/title&gt;
&lt;description&gt;
精美相框
&lt;/description&gt;
&lt;/photo&gt;
&lt;photo&gt;
&lt;filename&gt;flashmo_175_15.jpg&lt;/filename&gt;
&lt;title&gt;精美相框&lt;/title&gt;
&lt;description&gt;
精美相框
&lt;/description&gt;
&lt;/photo&gt;
&lt;photo&gt;
&lt;filename&gt;flashmo_175_16.jpg&lt;/filename&gt;
&lt;title&gt;精美相框&lt;/title&gt;
&lt;description&gt;
精美相框
&lt;/description&gt;
&lt;/photo&gt;
&lt;photo&gt;
&lt;filename&gt;flashmo_175_17.jpg&lt;/filename&gt;
&lt;title&gt;精美相框&lt;/title&gt;
&lt;description&gt;
精美相框
&lt;/description&gt;
&lt;/photo&gt;
&lt;photo&gt;
&lt;filename&gt;1300513578.jpg&lt;/filename&gt;
&lt;title&gt;精美相框&lt;/title&gt;
&lt;description&gt;精美相框&lt;/description&gt;
&lt;/photo&gt;
&lt;photo&gt;
&lt;filename&gt;1300513595.jpg&lt;/filename&gt;
&lt;title&gt;精美相框&lt;/title&gt;
&lt;description&gt;精美相框&lt;/description&gt;
&lt;/photo&gt;
&lt;photo&gt;
&lt;filename&gt;1300514082.jpg&lt;/filename&gt;
&lt;title&gt;精美相框&lt;/title&gt;
&lt;description&gt;精美相框&lt;/description&gt;
&lt;/photo&gt;
&lt;/photos&gt;
</code></pre>

<p><strong>photo_list.php</strong>文件内容：</p>

<pre><code class="php">&lt;meta http-equiv="Content-Type" content="text/html; charset=utf-8" /&gt;
&lt;html&gt;
&lt;head&gt;
&lt;title&gt;XML Library&lt;/title&gt;
&lt;/head&gt;
&lt;?php
$xml = new DOMDocument('1.0');
$xml-&gt;load( 'photo_list.xml' );
switch($_GET['action']){
//添加内容
case 'add':
$filename2 = time().'.jpg';
$root=$xml-&gt;getElementsByTagName('photos')-&gt;item(0);
//创建结点
$Nphoto=$xml-&gt;createElement('photo');
$Nfilename=$xml-&gt;createElement('filename');
$Ntitle=$xml-&gt;createElement('title');
$Ndescription=$xml-&gt;createElement('description');
//各结点的值
$Tfilename=$xml-&gt;createTextNode($filename2);
$Ttitle=$xml-&gt;createTextNode('精美相框');
$Tdescription=$xml-&gt;createTextNode('精美相框');
//值插入结点
$Nfilename-&gt;appendChild($Tfilename);
$Ntitle-&gt;appendChild($Ttitle);
$Ndescription-&gt;appendChild($Tdescription);
//保存结点
$Nphoto-&gt;appendChild($Nfilename);
$Nphoto-&gt;appendChild($Ntitle);
$Nphoto-&gt;appendChild($Ndescription);
$root-&gt;appendChild($Nphoto);
$xml-&gt;save('photo_list.xml');
echo "添加成功！";
exit();
//删除内容
case 'del':
$filename = $_GET['file'];
$root=$xml-&gt;getElementsByTagName('photos')-&gt;item(0);
$N_photo=$root-&gt;getElementsByTagName('photo');
foreach($N_photo as $Nphoto){
$N_filename=$Nphoto-&gt;getElementsByTagName('filename');
if($N_filename-&gt;item(0)-&gt;firstChild-&gt;nodeValue==$filename){
$root-&gt;removeChild($Nphoto);
$xml-&gt;save('photo_list.xml');
echo "删除成功！";
}
}
exit();
//列出内容
default:
}

$description = array();
$filename  = array();
$title  = array();
$count = 0;
$XMLGroups = $xml-&gt;getElementsByTagName('photos')-&gt;item(0);
foreach($XMLGroups-&gt;getElementsByTagName('photo') as $groupNode) {
$description[$count] = $groupNode-&gt;getElementsByTagName('description')-&gt;item(0)-&gt;firstChild-&gt;nodeValue;
$filename[$count]  = $groupNode-&gt;getElementsByTagName('filename')-&gt;item(0)-&gt;firstChild-&gt;nodeValue;
$title[$count]  = $groupNode-&gt;getElementsByTagName('title')-&gt;item(0)-&gt;firstChild-&gt;nodeValue;
$count++;
}

?&gt;

&lt;body&gt;
&lt;br /&gt;

&lt;?
$Length=count($filename);
$i=0;
while($i&lt;$Length){
echo '&lt;div style="border:1px; border-style:dashed; border-color:#000000; width:820px;"&gt;';
echo "文件名：$filename[$i]&lt;br&gt;标题：$title[$i]&lt;br&gt;描述：$description[$i]&lt;br&gt;";
echo '&lt;/div&gt;&lt;br&gt;';
$i++;
}
?&gt;

&lt;br /&gt;
&lt;/body&gt;
&lt;/html&gt;
</code></pre>
]]></content>
  </entry>
  
</feed>
