<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Tag: Qt | 龍昌博客]]></title>
  <link href="http://www.xefan.com/tags/Qt/atom.xml" rel="self"/>
  <link href="http://www.xefan.com/"/>
  <updated>2015-08-18T18:37:00+08:00</updated>
  <id>http://www.xefan.com/</id>
  <author>
    <name><![CDATA[龍昌]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[Windows下静态编译Qt4]]></title>
    <link href="http://www.xefan.com/archives/83668.html"/>
    <updated>2011-12-29T00:00:00+08:00</updated>
    <id>http://www.xefan.com/archives/83668-Windows下静态编译Qt4</id>
    <content type="html"><![CDATA[<p>既然是静态编译，那就要编译出来的程序不信赖于任何dll文件。<br/>
首先下载qt-win-opensource-4.7.4-mingw.exe： <a href="http://get.qt.nokia.com/qt/source/qt-win-opensource-4.7.4-mingw.exe">http://get.qt.nokia.com/qt/source/qt-win-opensource-4.7.4-mingw.exe</a> 和MinGW-gcc440_1.zip： <a href="http://get.qt.nokia.com/misc/MinGW-gcc440_1.zip">http://get.qt.nokia.com/misc/MinGW-gcc440_1.zip</a></p>

<p>然后依次解压MinGW-gcc440_1.zip、安装qt-win-opensource-4.7.4-mingw.exe。记得要将gcc的目录和qt的目录添加到环境变量中。</p>

<p>然后打开DOS窗口并切换到Qt的目录（比如我的是D:\Qt\4.7.4），再设置两个变量<br/>
<em>set QTDIR=D:\Qt\4.7.4</em><br/>
<em> set QMAKESPEC=win32-g++</em></p>

<p>再编辑D:\Qt\4.7.4\mkspecs\win32-g++\qmake.conf文件（最好先备份），改两处：<br/>
<em>QMAKE_LFLAGS = -enable-stdcall-fixup -Wl,-enable-auto-import -Wl,-enable-runtime-pseudo-reloc</em><br/>
修改为<br/>
<em>QMAKE_LFLAGS = <span style="color: #ff0000;">-static</span> -enable-stdcall-fixup -Wl,-enable-auto-import -Wl,-enable-runtime-pseudo-reloc</em><br/>
再将<br/>
<em>QMAKE_LFLAGS_DLL = -shared</em><br/>
修改为<br/>
<em>QMAKE_LFLAGS_DLL = -static</em></p>

<p>再执行命令：<br/>
configure -platform win32-g++ <span style="color: #ff0000;">-release</span> -opensource <span style="color: #ff0000;">-static</span> -fast -qt-sql-sqlite -plugin-sql-sqlite -qt-zlib -qt-gif -qt-libpng -qt-libmng -qt-libtiff -qt-libjpeg -no-webkit -nomake examples -nomake docs -nomake demos</p>

<p>如果有提问是否遵守LGPL协议，选y。配置完成后，最后两句是这样的：<br/>
Qt is now configured for building. Just run mingw32-make.<br/>
To reconfigure, run mingw32-make confclean and configure.</p>

<p>cd src<br/>
mingw32-make -i -k</p>

<p>注意：我们只在在Qt子目录src里运行make。不要在整个qt库的大目录下运行make。只在src目录make，这样只编译核心的Qt库和一些插件，节省时间，而且有核心Qt库就够用了。<br/>
如果在D:\Qt\4.7.4\ 整个大目录下运行make，那么make还会去重新编译生成tools目录下的代码，重新做工具程序，像assistant.exe、designer.exe、linguist.exe、qmlviewer.exe等等（生成后全在bin目录）。这些工具使用静态库生成后巨大无比。这些工具程序不管是静态链接还是动态链接生成的，对我们编程压根没影响，都一样用。</p>

<p>好了，接下来就是漫长的等待。2个多小时左右就应该可以编译完成了。<br/>
此时再用Qt编译生成的可执行文件不用再信赖Qt的动态库了,但是文件比较大随便一个都是10M以上，而且如果使用的是从qt官网下载的MinGW-gcc编译生成的可执行文件还是会信赖mingwm10.dll动态库。这个只需换一个版本的编译器即可，我用的是这个： <a href="http://115.com/file/dn3fkn1g">http://115.com/file/dn3fkn1g</a></p>

<p>如果嫌这个过程太麻烦可以直接下载我编译好的静态库来使用：<br/>
Qt4.7.4_Win32静态库.part1.rar： <a href="http://115.com/file/dn3zwayy  ">http://115.com/file/dn3zwayy  </a>
Qt4.7.4_Win32静态库.part2.rar： <a href="http://115.com/file/dn3zwa9g  ">http://115.com/file/dn3zwa9g  </a>
这个是完整版的，解压下来有2G多。如果觉得太大了可以下载精简版：<br/>
Qt4.7.4_Win32静态库精简版.rar： <a href="http://115.com/file/bhy7bat6  ">http://115.com/file/bhy7bat6  </a>
精简版只保留了编译时需要的库文件和qmake等必要的工具，解压下来有500M左右。<br/>
注意：只有解压到D盘根目录下才能使用<br/>
编译器用的是mingw-7.2.exe： <a href="http://115.com/file/dn3fkn1g">http://115.com/file/dn3fkn1g</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Linux Qt安装]]></title>
    <link href="http://www.xefan.com/archives/83398.html"/>
    <updated>2010-09-15T00:00:00+08:00</updated>
    <id>http://www.xefan.com/archives/83398-Linux Qt安装</id>
    <content type="html"><![CDATA[<p>1、首先打开网站：<a href="http://qt.nokia.com/downloads%E4%B8%8B%E8%BD%BDLGPL%E5%85%8D%E8%B4%B9%E7%89%88%EF%BC%8C%E6%88%91%E4%B8%8B%E7%9A%84%E6%98%AFQt">http://qt.nokia.com/downloads%E4%B8%8B%E8%BD%BDLGPL%E5%85%8D%E8%B4%B9%E7%89%88%EF%BC%8C%E6%88%91%E4%B8%8B%E7%9A%84%E6%98%AFQt</a> libraries 4.6.3 for Linux/X11这个。</p>

<p>2、进入软件包所在目录，然后解压。<br/>
<em>gunzip qt-everywhere-opensource-src-4.6.3.tar.gz<br/>
tar xf qt-everywhere-opensource-src-4.6.3.tar</em></p>

<p>3、编译安装。<br/>
进入解压后目录，执行如下命令查看帮助，<br/>
<em>./configure -help</em><br/>
如果是安装Linux版的话直接执行如下命令即可。<br/>
<em>./configure -embedded</em><br/>
然后执行如下命令开始编译安装<br/>
<em>gmake<br/>
su -c &ldquo;gmake install&rdquo;</em></p>

<p>注：这个最好在时间充足的时候进行，光gmake命令就用了我差不多3个小时。</p>

<p>最后将/usr/local/Trolltech/QtEmbedded-4.6.3/bin路径添加至环境变量中就可以直接使用了。</p>
]]></content>
  </entry>
  
</feed>
