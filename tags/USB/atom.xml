<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">

  <title><![CDATA[Tag: USB | 龍昌博客]]></title>
  <link href="http://www.xefan.com/tags/USB/atom.xml" rel="self"/>
  <link href="http://www.xefan.com/"/>
  <updated>2014-11-11T21:21:26+08:00</updated>
  <id>http://www.xefan.com/</id>
  <author>
    <name><![CDATA[龍昌]]></name>
    
  </author>
  <generator uri="http://octopress.org/">Octopress</generator>

  
  <entry>
    <title type="html"><![CDATA[制作Linux+DOS+WinPE USB引导盘]]></title>
    <link href="http://www.xefan.com/archives/83433.html"/>
    <updated>2010-10-13T00:00:00+08:00</updated>
    <id>http://www.xefan.com/archives/83433-制作Linux+DOS+WinPE USB引导盘</id>
    <content type="html"><![CDATA[<p>在我的前一篇文章《使用UNetbootin制作Linux USB引导盘》（ <a href="http://www.xefan.com/archives/83431.html">http://www.xefan.com/archives/83431.html</a> ）介绍了使用UNetbootin轻松制作Linux的USB引导盘，不过如果我想换一个版本的Linux的话需要先将原来的文件删除再重新制作，这样感觉比较麻烦。于是就思考能不能同时引导多个Linux呢，通过试验发现可以通过修改syslinux.cfg这个文件来实现。</p>

<p>syslinux.cfg与grub的menu.lst类似，不过又有点不同。反正我是菜鸟也不懂，只要能用就行。有两个方法可以实现引导，一个是使用memdisk，另一个是使用grub。</p>

<p>一、memdisk<br/>
1、添加其它Linux引导项<br/>
以Ubuntu10.04为例，先将镜像文件中casper目录下的vmlinuz和initrd.lz文件提取出来跟镜像文件一起放在U盘的ubuntu10.04文件夹下。然后在syslinux.cfg中添加一个引导项：</p>

<ul> label Ubuntu 10.04  
menu Ubuntu 10.04  
kernel /ubuntu10.04/vmlinuz boot=casper iso-scan/filename=/ubuntu/ubuntu-10.04-desktop-i386.iso ro quiet splash locale=zh_CN.UTF-8  
append initrd=/ubuntu10.04/initrd.lz</ul>


<p>2、添加DOS、PE引导项<br/>
先将dos.img及memdisk放在dos文件夹下，然后在syslinux.cfg中添加一个引导项：</p>

<ul> label DOS1.0  
menu DOS1.0  
kernel /dos/memdisk  
initrd /dos/dos.img</ul>


<p><span style="text-decoration: underline">dos.img下载地址：<a href="http://u.115.com/file/f5a0def2a8">http://u.115.com/file/f5a0def2a8</a></p>

<p>memdisk下载地址：<a href="http://u.115.com/file/f5f4cb0aa1">http://u.115.com/file/f5f4cb0aa1</a></span></p>

<p>PE跟这个类似，只是我在网上只找到WinPE.iso，找不到WinPE.img，故我用的是另一个方法来引导。<br/>
如果镜像文件不是标准的1.44/2.88MB，或者大小超过2880kb，就需要指定磁盘镜像的C/H/S参数(即磁道数/磁头数/每磁道扇区数)。这时我们可以用“grub菜单编辑器”来获取软盘的C/H/S参数。<br/>
<span style="text-decoration: underline">下载地址：<a href="http://u.115.com/file/f5510e6f36">http://u.115.com/file/f5510e6f36</a></span></p>

<p>运行grub菜单编辑器，单击界面左边的“获取软盘镜像的C/H/S参数”，选中映像文件，即可看到它的数据。那么它的格式为：<br/>
kernel (hdx,y)/boot/grub/memdisk.gz c=磁道数 h=磁头数 s=每磁道扇区数 floppy<br/>
initrd (hdx,y)/目录/文件名</p>

<p>二、grub<br/>
先将grub.exe和menu.lst文件放在grub文件夹下，然后在syslinux.cfg中添加一个引导项：</p>

<ul> label Grub  
menu Grub  
kernel /grub/grub.exe  
append &#8211;config-file=&#8221;configfile /grub/menu.lst&#8221;</ul>


<p>再将WinPE.ISO文件放在PE文件夹下，然后修改menu.lst文件，添加以下内容：</p>

<ul> title WinPE.ISOfallback 1  

find &#8211;set-root /PE/WinPE.ISO  

map /PE/WinPE.ISO (0xff) || map &#8211;mem /PE/WinPE.ISO (0xff)  

map &#8211;hook  

chainloader (0xff)

savedefault &#8211;wait=2</ul>


<p><span style="text-decoration: underline"> WinPE下载地址：<a href="http://u.115.com/file/f59f3e483b">http://u.115.com/file/f59f3e483b</a></p>

<p>grub4dos下载地址：<a href="http://u.115.com/file/f52b6269a6">http://u.115.com/file/f52b6269a6</a></span></p>

<p>dos及ubuntu10.04也可以通过修改menu.lst来实验引导。</p>

<p>至此，Linux+DOS+PE的引导盘做好了，如果以后还想添加引导项的话可以直接修改这两个文件。</p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[使用UNetbootin制作Linux USB引导盘]]></title>
    <link href="http://www.xefan.com/archives/83431.html"/>
    <updated>2010-10-12T00:00:00+08:00</updated>
    <id>http://www.xefan.com/archives/83431-使用UNetbootin制作Linux USB引导盘</id>
    <content type="html"><![CDATA[<p>首先要你的电脑主板支持usb引导才行。像我的是神舟天运F3000的小本好像有的问题，之前用U盘制作了一个Win PE的的引导盘，结果却不能引导，但是在同学的台式电脑却没问题。还好这次用UNetbootin制作的Linux引导盘可以用。</p>

<p>然后再来介绍一下UNetbootin(Universal Netboot Installer)，它是一种跨平台工具软件（支援Windows和Linux），可以用来建立Live USB 系统，也可以加载各种系统工具，或安装各种Linux操作系统（Linux套件）和其他操作系统，不需使用安装光碟（自动透过网络下载）。支援主流Linux（Linux套件），包含但不只限于，Ubuntu、Fedora、 openSUSE、CentOS、Debian、Linux Mint、Arch Linux、Mandriva、Puppy Linux、Slackware和FreeDOS，FreeBSD以及NetBSD。</p>

<p>最后再来说说制作过程，先运行UNetbootin（Linux下需root权限运行），如果没有Linux的镜像文件就选第一个“Distribution”再选择你想要安装的版本，然后它就会自动下载安装；如果有镜像文件就选第二个“Disk Image”再选择你的镜像文件，最后在下面的“Type”及“Drive”选择你要安装到哪个分区，点“OK”开始安装。</p>

<p>如图：</p>

<p><img class="alignnone" title="UNetbootin" src="http://sourceforge.net/dbimage.php?id=167328" alt="" width="542" height="397" />
<img class="alignnone" title="UNetbootin" src="http://sourceforge.net/dbimage.php?id=173795" alt="" width="542" height="397" />
<img class="alignnone" title="UNetbootin" src="http://sourceforge.net/dbimage.php?id=173785" alt="" width="542" height="397" />
<img class="alignnone" title="UNetbootin" src="http://sourceforge.net/dbimage.php?id=173797" alt="" width="542" height="397" />
<img class="alignnone" title="UNetbootin" src="http://sourceforge.net/dbimage.php?id=173791" alt="" width="542" height="397" /></p>

<p>下载地址：<a href="http://unetbootin.sourceforge.net/">http://unetbootin.sourceforge.net/</a></p>
]]></content>
  </entry>
  
  <entry>
    <title type="html"><![CDATA[Linux下u盘的使用]]></title>
    <link href="http://www.xefan.com/archives/83324.html"/>
    <updated>2010-03-16T00:00:00+08:00</updated>
    <id>http://www.xefan.com/archives/83324-linux下u盘的使用</id>
    <content type="html"><![CDATA[<div class="Section0">
<p class="p0" style="margin-top: 0pt;margin-bottom: 0pt"><span style="font-weight: bold;font-size: 14pt;color: #ff0000;font-family: 'Times New Roman'">一</span><span style="font-weight: bold;font-size: 14pt;color: #ff0000;font-family: '宋体'">、</span><span style="font-size: 10.5pt;font-family: '宋体'"></span></p>

<p class="p0" style="margin-top: 0pt;margin-bottom: 0pt"><span style="font-size: 10.5pt;font-family: 'Times New Roman'">Linux<span style="font-family: 宋体">不像</span><span style="font-family: Times New Roman">Windows</span><span style="font-family: 宋体">一样，</span><span style="font-family: Times New Roman">Windows</span><span style="font-family: 宋体">接上新硬件后可以自动识别，</span></span><span style="font-size: 10.5pt;font-family: '宋体'">有时</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">在<span style="font-family: Times New Roman">Linux</span><span style="font-family: 宋体">下无法自动识别新硬件的，需要手动去识别。</span><span style="font-family: Times New Roman">USB</span><span style="font-family: 宋体">移动存储设备通常被识别为</span><span style="font-family: Times New Roman">sda1</span><span style="font-family: 宋体">，具体可以通过</span><span style="font-family: Times New Roman">fdisk -l</span><span style="font-family: 宋体">命令查询。</span></span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">
</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">在使用<span style="font-family: Times New Roman">U</span><span style="font-family: 宋体">盘前，我们先要为外挂点新建一个子目录，一般外挂点的子目录都是建立在</span><span style="font-family: Times New Roman">/mnt</span><span style="font-family: 宋体">里面的，我们也建在那里，当然也可以建在</span><span style="font-family: Times New Roman">/</span><span style="font-family: 宋体">目录下，名字可以自己定，我们就取名为</span><span style="font-family: Times New Roman">usb</span><span style="font-family: 宋体">，终端下的命令如下：</span></span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">
</span><span style="font-size: 10.5pt;font-style: italic;font-family: 'Times New Roman'">mkdir /mnt/usb</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">
</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">然后我们就可以接上我的<span style="font-family: Times New Roman">U</span><span style="font-family: 宋体">盘了，然后在终端下输入命令并击</span><span style="font-family: Times New Roman">Enter</span><span style="font-family: 宋体">键即可：</span></span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">
</span><span style="font-size: 10.5pt;font-style: italic;font-family: 'Times New Roman'">mount /dev/sda1 /mnt/usb</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">
</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">在<span style="font-family: Times New Roman">Windows</span><span style="font-family: 宋体">下当我们用完</span><span style="font-family: Times New Roman">U</span><span style="font-family: 宋体">盘后，在我们取下</span><span style="font-family: Times New Roman">U</span><span style="font-family: 宋体">盘前我们先要删除，同样在</span><span style="font-family: Times New Roman">Linux</span><span style="font-family: 宋体">下我们也要删除挂起点，方法是：</span></span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">
</span><span style="font-size: 10.5pt;font-style: italic;font-family: 'Times New Roman'">umount /dev/sda1 /mnt/usb <span style="font-family: 宋体">或 </span><span style="font-family: Times New Roman">umount /dev/sda1</span></span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">
</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">如果不把<span style="font-family: Times New Roman">U</span><span style="font-family: 宋体">盘给</span><span style="font-family: Times New Roman">umount</span><span style="font-family: 宋体">掉，那样很容易造成数据的丢失</span></span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">
</span><span style="font-weight: bold;font-size: 14pt;color: #ff0000;font-family: 'Times New Roman'">二</span><span style="font-weight: bold;font-size: 14pt;color: #ff0000;font-family: '宋体'">、</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">
</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">USB<span style="font-family: 宋体">的支持关键在于驱动，没有驱动设备时</span><span style="font-family: Times New Roman">mount</span><span style="font-family: 宋体">执行是肯定不成的。我在</span><span style="font-family: Times New Roman">Red Hat</span><span style="font-family: 宋体">里使用</span><span style="font-family: Times New Roman">U</span><span style="font-family: 宋体">盘的通用方法如下，屡试不爽</span></span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">
</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">1. <span style="font-family: 宋体">先别插</span><span style="font-family: Times New Roman">U</span><span style="font-family: 宋体">盘，</span></span><span style="font-size: 10.5pt;font-style: italic;font-family: 'Times New Roman'">/sbin/lsmod</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">看是否有<span style="font-family: Times New Roman">usb-storage</span><span style="font-family: 宋体">。如果没有的话：</span></span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">
</span><span style="font-size: 10.5pt;font-style: italic;font-family: 'Times New Roman'">cd /lib/modules/2.4.20-8/kernel/drivers/usb</span><span style="font-size: 10.5pt;font-style: italic;font-family: 'Times New Roman'">
</span><span style="font-size: 10.5pt;font-style: italic;font-family: 'Times New Roman'">for v in *.o storage/*.o ; do /sbin/insmod $v ; done</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">
</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">2. <span style="font-family: 宋体">这里再</span><span style="font-family: Times New Roman">/sbin/lsmod</span><span style="font-family: 宋体">，应该有</span><span style="font-family: Times New Roman">usbcore</span><span style="font-family: 宋体">、</span><span style="font-family: Times New Roman">usb-ohci</span><span style="font-family: 宋体">（或</span><span style="font-family: Times New Roman">usb-uhci</span><span style="font-family: 宋体">，根据主板芯片组而不同）、</span><span style="font-family: Times New Roman">usb-storage</span><span style="font-family: 宋体">、</span><span style="font-family: Times New Roman">scsi_mod</span><span style="font-family: 宋体">等。其中</span><span style="font-family: Times New Roman">usb-storage</span><span style="font-family: 宋体">的状态应该为</span></span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">
</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">（<span style="font-family: Times New Roman">unused</span><span style="font-family: 宋体">）。</span></span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">
</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">3. <span style="font-family: 宋体">插入</span><span style="font-family: Times New Roman">U</span><span style="font-family: 宋体">盘，不停的</span><span style="font-family: Times New Roman">/sbin/lsmod</span><span style="font-family: 宋体">，这期间</span><span style="font-family: Times New Roman">usb-storage</span><span style="font-family: 宋体">的状态应为</span><span style="font-family: Times New Roman">Initializing</span><span style="font-family: 宋体">，持续时间大约半分钟，其实就相当于</span><span style="font-family: Times New Roman">Windows</span><span style="font-family: 宋体">在右下角不停的弹汽球</span><span style="font-family: Times New Roman">:)</span></span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">
</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">4. <span style="font-family: 宋体">初始化结束后</span><span style="font-family: Times New Roman">, /sbin/fdisk -l</span><span style="font-family: 宋体">，应该能看到</span><span style="font-family: Times New Roman">/dev/sda1</span><span style="font-family: 宋体">设备。这时，执行</span></span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">
</span><span style="font-size: 10.5pt;font-style: italic;font-family: 'Times New Roman'">mount /dev/sda1 /mnt/udisk</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'"> 才能成功。如果</span><span style="font-size: 10.5pt;font-family: '宋体'">∪盘分区</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">是<span style="font-family: Times New Roman">MSDOS</span><span style="font-family: 宋体">格式，又想看到中文，可以</span></span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">
</span><span style="font-size: 10.5pt;font-style: italic;font-family: 'Times New Roman'">mount -t vfat /dev/sda1 /mnt/udisk -o iocharset=gb2312</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">。</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">
</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">(<span style="font-family: 宋体">为方便可以</span><span style="font-family: Times New Roman">/etc/fstab</span><span style="font-family: 宋体">加一行，以后就可以 </span><span style="font-family: Times New Roman">mount /mnt/udisk</span><span style="font-family: 宋体">就行了）。</span></span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">
</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">5. <span style="font-family: 宋体">奇怪的是有时候</span><span style="font-family: Times New Roman">fdisk</span><span style="font-family: 宋体">是看不到</span><span style="font-family: Times New Roman">sda1</span><span style="font-family: 宋体">，但是也能</span><span style="font-family: Times New Roman">mount</span><span style="font-family: 宋体">上</span></span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">
</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">使用以上步骤挂<span style="font-family: Times New Roman">U</span><span style="font-family: 宋体">盘基本上可说是</span><span style="font-family: Times New Roman">“</span><span style="font-family: 宋体">万全</span><span style="font-family: Times New Roman">”</span><span style="font-family: 宋体">了。台式机、笔记本、</span><span style="font-family: Times New Roman">VMware</span><span style="font-family: 宋体">都一样。</span></span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">
</span><span style="font-size: 10.5pt;font-style: italic;font-family: 'Times New Roman'">mkdir /mnt/usb</span><span style="font-size: 10.5pt;font-style: italic;font-family: 'Times New Roman'">
</span><span style="font-size: 10.5pt;font-style: italic;font-family: 'Times New Roman'">mount /dev/sda1 /mnt/usb</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">
</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">笔记本上安装<span style="font-family: Times New Roman">linux</span><span style="font-family: 宋体">用法和台式机一样</span></span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">
</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">ps:</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">
</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">首先要检查</span><span style="font-size: 10.5pt;font-style: italic;font-family: 'Times New Roman'">lsmod|grep usb-storage</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'"> 这是支持<span style="font-family: Times New Roman">USB</span><span style="font-family: 宋体">的模块。如果没有的话</span><span style="font-family: Times New Roman">,</span><span style="font-family: 宋体">是无法操作</span><span style="font-family: Times New Roman">USB</span><span style="font-family: 宋体">接口的设备的。</span></span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">
</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">如没有的话<span style="font-family: Times New Roman">,</span><span style="font-family: 宋体">可以手功</span><span style="font-family: Times New Roman">modprobe usb-storage,</span><span style="font-family: 宋体">一般查看</span><span style="font-family: Times New Roman">U</span><span style="font-family: 宋体">盘可以用</span><span style="font-family: Times New Roman">fdisk -l</span><span style="font-family: 宋体">可以很清楚的看到这个硬件的设备名</span><span style="font-family: Times New Roman">,</span><span style="font-family: 宋体">比猜测硬件名要准确多了</span></span><span style="font-size: 10.5pt;font-family: '宋体'">。</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">
</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'"></span>

</div>


<!--EndFragment-->

]]></content>
  </entry>
  
</feed>
