---
layout: post
title: "Redis集群配置实例"
date: 2015-01-14 10:11:36 +0000
comments: true
post_id: 84140
permalink: /archives/84140.html
categories: ["数据库"]
tags: ["redis"]
---

通过配置 redis 的主从集群可将请求的负荷分散到多台服务器上。

redis 的集群配置比较简单，以下是一个例子。
假设有如下三台主机：

  * 172.17.0.11 (主)
  * 172.17.0.12 (从)
  * 172.17.0.13 (从)


在从服务器上添加如下配置：

```
slaveof 172.17.0.11 6379
```

如果主服务器设置了认证密码，那么还需要再添加一条配置：

```
masterauth <password>
```

然后分别启动三台服务器的 redis 服务即可。

接下来连接主服务器添加一些数据测试一下。

```
$ redis-cli -h 172.17.0.11
172.17.0.11:6379> set foo1 bar1
OK
```

然后再连接到从服务器查询结果。

```
$ redis-cli -h 172.17.0.12
172.17.0.12:6379> get foo1
"bar1"
```

这时发现数据已经同步过来了。

注意：从服务器默认是只读的。如果需要设置为可写，可将 `slave-read-only` 设置项的值设为 `no` 即可。


