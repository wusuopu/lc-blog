---
layout: post
title: linux下u盘的使用
date: 2010-03-16 07:52:44 +0000
comments: true
post_id: 83324
permalink: /archives/83324.html
categories: ["Linux栏目"]
tags: ["Linux", "USB"]
---

<div class="Section0">
<p class="p0" style="margin-top: 0pt;margin-bottom: 0pt"><span style="font-weight: bold;font-size: 14pt;color: #ff0000;font-family: 'Times New Roman'">一</span><span style="font-weight: bold;font-size: 14pt;color: #ff0000;font-family: '宋体'">、</span><span style="font-size: 10.5pt;font-family: '宋体'"></span></p>

<p class="p0" style="margin-top: 0pt;margin-bottom: 0pt"><span style="font-size: 10.5pt;font-family: 'Times New Roman'">Linux<span style="font-family: 宋体">不像</span><span style="font-family: Times New Roman">Windows</span><span style="font-family: 宋体">一样，</span><span style="font-family: Times New Roman">Windows</span><span style="font-family: 宋体">接上新硬件后可以自动识别，</span></span><span style="font-size: 10.5pt;font-family: '宋体'">有时</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">在<span style="font-family: Times New Roman">Linux</span><span style="font-family: 宋体">下无法自动识别新硬件的，需要手动去识别。</span><span style="font-family: Times New Roman">USB</span><span style="font-family: 宋体">移动存储设备通常被识别为</span><span style="font-family: Times New Roman">sda1</span><span style="font-family: 宋体">，具体可以通过</span><span style="font-family: Times New Roman">fdisk -l</span><span style="font-family: 宋体">命令查询。</span></span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">
</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">在使用<span style="font-family: Times New Roman">U</span><span style="font-family: 宋体">盘前，我们先要为外挂点新建一个子目录，一般外挂点的子目录都是建立在</span><span style="font-family: Times New Roman">/mnt</span><span style="font-family: 宋体">里面的，我们也建在那里，当然也可以建在</span><span style="font-family: Times New Roman">/</span><span style="font-family: 宋体">目录下，名字可以自己定，我们就取名为</span><span style="font-family: Times New Roman">usb</span><span style="font-family: 宋体">，终端下的命令如下：</span></span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">
</span><span style="font-size: 10.5pt;font-style: italic;font-family: 'Times New Roman'">mkdir /mnt/usb</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">
</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">然后我们就可以接上我的<span style="font-family: Times New Roman">U</span><span style="font-family: 宋体">盘了，然后在终端下输入命令并击</span><span style="font-family: Times New Roman">Enter</span><span style="font-family: 宋体">键即可：</span></span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">
</span><span style="font-size: 10.5pt;font-style: italic;font-family: 'Times New Roman'">mount /dev/sda1 /mnt/usb</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">
</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">在<span style="font-family: Times New Roman">Windows</span><span style="font-family: 宋体">下当我们用完</span><span style="font-family: Times New Roman">U</span><span style="font-family: 宋体">盘后，在我们取下</span><span style="font-family: Times New Roman">U</span><span style="font-family: 宋体">盘前我们先要删除，同样在</span><span style="font-family: Times New Roman">Linux</span><span style="font-family: 宋体">下我们也要删除挂起点，方法是：</span></span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">
</span><span style="font-size: 10.5pt;font-style: italic;font-family: 'Times New Roman'">umount /dev/sda1 /mnt/usb <span style="font-family: 宋体">或 </span><span style="font-family: Times New Roman">umount /dev/sda1</span></span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">
</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">如果不把<span style="font-family: Times New Roman">U</span><span style="font-family: 宋体">盘给</span><span style="font-family: Times New Roman">umount</span><span style="font-family: 宋体">掉，那样很容易造成数据的丢失</span></span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">
</span><span style="font-weight: bold;font-size: 14pt;color: #ff0000;font-family: 'Times New Roman'">二</span><span style="font-weight: bold;font-size: 14pt;color: #ff0000;font-family: '宋体'">、</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">
</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">USB<span style="font-family: 宋体">的支持关键在于驱动，没有驱动设备时</span><span style="font-family: Times New Roman">mount</span><span style="font-family: 宋体">执行是肯定不成的。我在</span><span style="font-family: Times New Roman">Red Hat</span><span style="font-family: 宋体">里使用</span><span style="font-family: Times New Roman">U</span><span style="font-family: 宋体">盘的通用方法如下，屡试不爽</span></span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">
</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">1. <span style="font-family: 宋体">先别插</span><span style="font-family: Times New Roman">U</span><span style="font-family: 宋体">盘，</span></span><span style="font-size: 10.5pt;font-style: italic;font-family: 'Times New Roman'">/sbin/lsmod</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">看是否有<span style="font-family: Times New Roman">usb-storage</span><span style="font-family: 宋体">。如果没有的话：</span></span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">
</span><span style="font-size: 10.5pt;font-style: italic;font-family: 'Times New Roman'">cd /lib/modules/2.4.20-8/kernel/drivers/usb</span><span style="font-size: 10.5pt;font-style: italic;font-family: 'Times New Roman'">
</span><span style="font-size: 10.5pt;font-style: italic;font-family: 'Times New Roman'">for v in *.o storage/*.o ; do /sbin/insmod $v ; done</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">
</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">2. <span style="font-family: 宋体">这里再</span><span style="font-family: Times New Roman">/sbin/lsmod</span><span style="font-family: 宋体">，应该有</span><span style="font-family: Times New Roman">usbcore</span><span style="font-family: 宋体">、</span><span style="font-family: Times New Roman">usb-ohci</span><span style="font-family: 宋体">（或</span><span style="font-family: Times New Roman">usb-uhci</span><span style="font-family: 宋体">，根据主板芯片组而不同）、</span><span style="font-family: Times New Roman">usb-storage</span><span style="font-family: 宋体">、</span><span style="font-family: Times New Roman">scsi_mod</span><span style="font-family: 宋体">等。其中</span><span style="font-family: Times New Roman">usb-storage</span><span style="font-family: 宋体">的状态应该为</span></span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">
</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">（<span style="font-family: Times New Roman">unused</span><span style="font-family: 宋体">）。</span></span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">
</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">3. <span style="font-family: 宋体">插入</span><span style="font-family: Times New Roman">U</span><span style="font-family: 宋体">盘，不停的</span><span style="font-family: Times New Roman">/sbin/lsmod</span><span style="font-family: 宋体">，这期间</span><span style="font-family: Times New Roman">usb-storage</span><span style="font-family: 宋体">的状态应为</span><span style="font-family: Times New Roman">Initializing</span><span style="font-family: 宋体">，持续时间大约半分钟，其实就相当于</span><span style="font-family: Times New Roman">Windows</span><span style="font-family: 宋体">在右下角不停的弹汽球</span><span style="font-family: Times New Roman">:)</span></span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">
</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">4. <span style="font-family: 宋体">初始化结束后</span><span style="font-family: Times New Roman">, /sbin/fdisk -l</span><span style="font-family: 宋体">，应该能看到</span><span style="font-family: Times New Roman">/dev/sda1</span><span style="font-family: 宋体">设备。这时，执行</span></span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">
</span><span style="font-size: 10.5pt;font-style: italic;font-family: 'Times New Roman'">mount /dev/sda1 /mnt/udisk</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'"> 才能成功。如果</span><span style="font-size: 10.5pt;font-family: '宋体'">∪盘分区</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">是<span style="font-family: Times New Roman">MSDOS</span><span style="font-family: 宋体">格式，又想看到中文，可以</span></span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">
</span><span style="font-size: 10.5pt;font-style: italic;font-family: 'Times New Roman'">mount -t vfat /dev/sda1 /mnt/udisk -o iocharset=gb2312</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">。</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">
</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">(<span style="font-family: 宋体">为方便可以</span><span style="font-family: Times New Roman">/etc/fstab</span><span style="font-family: 宋体">加一行，以后就可以 </span><span style="font-family: Times New Roman">mount /mnt/udisk</span><span style="font-family: 宋体">就行了）。</span></span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">
</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">5. <span style="font-family: 宋体">奇怪的是有时候</span><span style="font-family: Times New Roman">fdisk</span><span style="font-family: 宋体">是看不到</span><span style="font-family: Times New Roman">sda1</span><span style="font-family: 宋体">，但是也能</span><span style="font-family: Times New Roman">mount</span><span style="font-family: 宋体">上</span></span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">
</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">使用以上步骤挂<span style="font-family: Times New Roman">U</span><span style="font-family: 宋体">盘基本上可说是</span><span style="font-family: Times New Roman">“</span><span style="font-family: 宋体">万全</span><span style="font-family: Times New Roman">”</span><span style="font-family: 宋体">了。台式机、笔记本、</span><span style="font-family: Times New Roman">VMware</span><span style="font-family: 宋体">都一样。</span></span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">
</span><span style="font-size: 10.5pt;font-style: italic;font-family: 'Times New Roman'">mkdir /mnt/usb</span><span style="font-size: 10.5pt;font-style: italic;font-family: 'Times New Roman'">
</span><span style="font-size: 10.5pt;font-style: italic;font-family: 'Times New Roman'">mount /dev/sda1 /mnt/usb</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">
</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">笔记本上安装<span style="font-family: Times New Roman">linux</span><span style="font-family: 宋体">用法和台式机一样</span></span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">
</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">ps:</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">
</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">首先要检查</span><span style="font-size: 10.5pt;font-style: italic;font-family: 'Times New Roman'">lsmod|grep usb-storage</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'"> 这是支持<span style="font-family: Times New Roman">USB</span><span style="font-family: 宋体">的模块。如果没有的话</span><span style="font-family: Times New Roman">,</span><span style="font-family: 宋体">是无法操作</span><span style="font-family: Times New Roman">USB</span><span style="font-family: 宋体">接口的设备的。</span></span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">
</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">如没有的话<span style="font-family: Times New Roman">,</span><span style="font-family: 宋体">可以手功</span><span style="font-family: Times New Roman">modprobe usb-storage,</span><span style="font-family: 宋体">一般查看</span><span style="font-family: Times New Roman">U</span><span style="font-family: 宋体">盘可以用</span><span style="font-family: Times New Roman">fdisk -l</span><span style="font-family: 宋体">可以很清楚的看到这个硬件的设备名</span><span style="font-family: Times New Roman">,</span><span style="font-family: 宋体">比猜测硬件名要准确多了</span></span><span style="font-size: 10.5pt;font-family: '宋体'">。</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'">
</span><span style="font-size: 10.5pt;font-family: 'Times New Roman'"></span>

</div>
<!--EndFragment-->
