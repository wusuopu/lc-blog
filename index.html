<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>龍昌博客</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="关注Linux及开源信息">
<meta property="og:type" content="website">
<meta property="og:title" content="龍昌博客">
<meta property="og:url" content="http://www.xefan.com/index.html">
<meta property="og:site_name" content="龍昌博客">
<meta property="og:description" content="关注Linux及开源信息">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="龍昌博客">
<meta name="twitter:description" content="关注Linux及开源信息">
  
    <link rel="alternate" href="/atom.xml" title="龍昌博客" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link rel="stylesheet" href="/css/style.css">
  

</head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">龍昌博客</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">从Pythoneer转向Rubist</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
          <a class="main-nav-link" href="/about">About</a>
        
          <a class="main-nav-link" href="/gbook">留言板</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://www.xefan.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-/archives/84181.html" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/archives/84181.html" class="article-date">
  <time datetime="2020-11-23T09:00:58.877Z" itemprop="datePublished">2020-11-23</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/编程开发/">编程开发</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/archives/84181.html">Github Runner 配置</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>在之前的文章<a href="/archives/84178.html">《Github Actions使用》</a>有介绍了Github Actions的使用方法。<br>之前是直接的 Github 官方提供的 runner，来执行。不过官方提供的 runner 多少还是有些限制。<br>这次我们来尝试将自己的 server 配置成 runner 来执行 actions。</p>
<p>关于添加自己的机器，可参考 Github 官方文档： <a href="https://docs.github.com/en/free-pro-team@latest/actions/hosting-your-own-runners/adding-self-hosted-runners" target="_blank" rel="external">https://docs.github.com/en/free-pro-team@latest/actions/hosting-your-own-runners/adding-self-hosted-runners</a></p>
<p>在 github 中 runner 分为三个级别： repository, organization, enterprise。<br>其中 repository 级别的 runner 就只能在这个代码仓库下使用；<br>organization 和 enterprise 级别的 runner 可以在这个 organization 或者 enterprise 下的所有代码仓库中共享。</p>
<p>由于我是免费用户，这里我就以 organization 为例吧。另外为了方便我们就直接通过 docker 来运行。</p>
<p>参考官方文档，首先进入到 organization 的 actions 设置页面，然后选择添加一个 runner。没有 organization 的可以自己创建一个。<br>接着在自己的 server 上执行命令：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">docker run -d \</div><div class="line">    -v /var/run/docker.sock:/var/run/docker.sock \</div><div class="line">    -e GH_REPOSITORY=xxxxxxxxxxxx \</div><div class="line">    -e GH_RUNNER_TOKEN=xxxxxxxxxxxxx \</div><div class="line">    -e GH_RUNNER_LABELS=label1,label2 \</div><div class="line">    wusuopu/github-actions-runner:2.273.6</div></pre></td></tr></table></figure>
<p>其中 GH_REPOSITORY 就是设置页面上显示的 url 参数，GH_RUNNER_TOKEN 就是 token 参数。GH_RUNNER_LABELS 则根据自己的需要来为该 runner 设置标签。</p>
<p>至此，自己的 runner 就已经配置好了。不过这里我们是直接在这个 runerr 的 container 中操作 server 上的 docker 服务。这样其实是非常危险的，尤其是对于公有仓库来说。</p>
<p>为了安全起见，我们可以再运行一个 Docker-in-Docker 的服务，然后这个就只需要连接到该服务即可。<br>创建一个 docker-compose.yml 文件：</p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="attr">version:</span> <span class="string">"2"</span></div><div class="line"></div><div class="line"><span class="attr">services:</span></div><div class="line"><span class="attr">  dind:</span></div><div class="line"><span class="attr">    image:</span> <span class="attr">docker:19.03-dind</span></div><div class="line"><span class="attr">    privileged:</span> <span class="literal">true</span></div><div class="line"><span class="attr">    volumes:</span></div><div class="line"><span class="bullet">      -</span> <span class="string">./tmp/docker-lib:/var/lib/docker</span></div><div class="line"><span class="bullet">      -</span> <span class="string">./tmp/docker-run:/var/run</span></div><div class="line"></div><div class="line"><span class="attr">  github-runner:</span></div><div class="line"><span class="attr">    image:</span> <span class="string">wusuopu/github-actions-runner:2.273.6</span></div><div class="line"><span class="attr">    depends_on:</span></div><div class="line"><span class="bullet">      -</span> <span class="string">dind</span></div><div class="line"><span class="attr">    environment:</span></div><div class="line"><span class="bullet">      -</span> <span class="string">GH_REPOSITORY=https://github.com/xxxx</span></div><div class="line"><span class="bullet">      -</span> <span class="string">GH_RUNNER_TOKEN=xxxxxxxxxxxxx</span></div><div class="line"><span class="bullet">      -</span> <span class="string">GH_RUNNER_LABELS=dind</span></div><div class="line"><span class="attr">    volumes:</span></div><div class="line"><span class="bullet">      -</span> <span class="string">./tmp/docker-run:/var/run</span></div></pre></td></tr></table></figure>
<p>然后执行命令 <code>docker-compose up -d</code> 启动服务即可。<br>如果之后 actions 任务太多处理不过来，可以将 runner 扩容，多增加几个 runner 实例： <code>docker-compose scale github-runner=3</code></p>
<p>至此，我们自己的 runner 就配置好了。如果想要在 actions 中使用我们自己的 runner，则需要修改之前的配置文件 <code>.github/workflows/main.yml</code>。将 <code>runs-on: ubuntu-latest</code> 改为 <code>runs-on: self-hosted</code> 。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.xefan.com/archives/84181.html" data-id="ckhu60upz00rml14kc9nxuha2" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/git/">git</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-/archives/84180.html" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/archives/84180.html" class="article-date">
  <time datetime="2020-05-14T10:12:42.474Z" itemprop="datePublished">2020-05-14</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Python栏目/">Python栏目</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/archives/84180.html">使用python编写帝国时代2修改器</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>之前的文章有介绍了<a href="/archives/84171.html">《使用python编写游戏修改器》</a>。<br>最近怀旧一下，在玩《帝国时代2》，然后就尝试着再写一个修改器试试。</p>
<h2 id="查找内存地址"><a href="#查找内存地址" class="headerlink" title="查找内存地址"></a>查找内存地址</h2><p>首先用 Cheat Engine 来修改资源，以及查找资源的内存地址。注意这里的数据都要使用浮点数类型。<br>如图找到的食物内存地址是 0F2B93B0<br><img src="/wp-content/uploads/2020/05/age2_ce01.jpg" alt="age2_ce01"></p>
<p>通过逐步分析得到以下指标的内存地址为：<br>木材地址 = 食物地址 + 4<br>石头地址 = 食物地址 + 8<br>黄金地址 = 食物地址 + 12<br>黄金地址 = 食物地址 + 12<br>人口上限地址 = 食物地址 + 16<br>当前人口地址 = 食物地址 + 44</p>
<p>如果想要实际无限人口，只需要修改 人口上限 和 当前人口 这两个数据即可。<br>这些地址都找到之后，然后就开始写代码，使用 Python 调用 <code>WriteProcessMemory</code> 来修改游戏的内存。<br>然而在打完这一局之后开启新的游戏时却发现这些地址全都变了。<br>每次开启新的游戏时都需要重新查找一遍地址内存，这个就有点麻烦了。</p>
<h2 id="查找游戏基址"><a href="#查找游戏基址" class="headerlink" title="查找游戏基址"></a>查找游戏基址</h2><p>通过分析发现这些地址都全是动态地址，每次游戏时都不一样。根据仅记得的一点汇编知识知道，这些动态地址是通过基址加偏移地址得到的。所以现在一劳永逸的方法是找到基址地址。而基址是静态的。然后接下来逐步进行分析。</p>
<p>首先刚刚食物地址是0F2B93B0。游戏程序如果要从这个地址获取食物数据，那么就得在某个地方储存这个地址值。这里我们就先将这个地址称为<code>食物地址指针</code>。接着用 CE 查找一下 0F2B93B0 这个值，然后就找到了<code>食物地址指针</code>地址为 206221B8。如图：<br><img src="/wp-content/uploads/2020/05/age2_ce02.jpg" alt="age2_ce02"><br>注意这里要用 16 进制的方式来查找这个地址值。如果用 C 语言代码的描述相当于：<br><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> food_point = <span class="number">0x206221B8</span>       <span class="comment">// 食物地址指针</span></div><div class="line"><span class="keyword">int</span> food_address = *food_point;   <span class="comment">// 食物地址指针 指向食物地址 0x0F2B93B0</span></div><div class="line"><span class="keyword">int</span> food = *food_point;           <span class="comment">// 从食物地址 0x0F2B93B0 得到食物的值</span></div></pre></td></tr></table></figure></p>
<p>经过测试发现这个<code>食物地址指针</code>地址也是动态的。没办法了，只能继续往下找。现在来看看都有谁访问了这个地址。如图：<br><img src="/wp-content/uploads/2020/05/age2_ce03.jpg" alt="age2_ce03"><br><img src="/wp-content/uploads/2020/05/age2_ce04.jpg" alt="age2_ce04"><br>这里我们又得到了一个地址： 20622110 。再来看看是哪里记录了这个地址呢。如图：<br><img src="/wp-content/uploads/2020/05/age2_ce05.jpg" alt="age2_ce05"><br>这里我们又找到了 007A5FEC 这个地址，运气不错。在 CE 中显示为绿色，表示它是一个静态地址。这表示它就是我们要找的基址了。</p>
<h2 id="总结"><a href="#总结" class="headerlink" title="总结"></a>总结</h2><p>现在来总结一下。使用 C 语言代码描述如下：<br><figure class="highlight c"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">int</span> base_addr = <span class="number">0x007A5FEC</span>;             <span class="comment">// 游戏基址</span></div><div class="line"><span class="keyword">int</span> food_point = *base_addr + <span class="number">0xA8</span>;     <span class="comment">// 基址记录的值0x20622110 + 偏移地址0xA8 = 食物地址指针</span></div><div class="line"><span class="keyword">int</span> food_address = *food_point;         <span class="comment">// 得到食物地址</span></div><div class="line"><span class="keyword">int</span> food = *food_address;               <span class="comment">// 从食物地址 0x0F2B93B0 得到食物的值</span></div></pre></td></tr></table></figure></p>
<p>最终修改的结果如图：<br><img src="/wp-content/uploads/2020/05/age2_ce06.jpg" alt="age2_ce06"></p>
<p>上面修改器的完整源代码，如有需要可通过以下链接获取：<br><a href="https://github.com/wusuopu/cheat_engine_age2" target="_blank" rel="external">https://github.com/wusuopu/cheat_engine_age2</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.xefan.com/archives/84180.html" data-id="ckhu60uq100rwl14ksu4rn6p6" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/python/">python</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-/archives/84179.html" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/archives/84179.html" class="article-date">
  <time datetime="2020-04-03T12:28:20.946Z" itemprop="datePublished">2020-04-03</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Linux栏目/">Linux栏目</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/archives/84179.html">使用Vagrant和Docker搭建Kubernetes集群</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>在之前的文章<a href="/archives/84177.html">《使用Vagrant在Ubuntu系统上搭建Kubernetes集群》</a>介绍了使用 Vagrant 在 VirtualBox 中安装 Ubuntu 系统搭建 Kubernetes 集群。<br>因为 Vagrant 是支持 Docker 的，所以这篇文章就来尝试不再使用 VirtualBox 了，而是直接使用 Docker 来搭建 Kubernetes 集群。</p>
<h2 id="安装依赖"><a href="#安装依赖" class="headerlink" title="安装依赖"></a>安装依赖</h2><p>需要先安装以下程序：</p>
<ul>
<li>Vagrant</li>
<li>Docker</li>
<li>Kubectl</li>
</ul>
<h2 id="运行集群"><a href="#运行集群" class="headerlink" title="运行集群"></a>运行集群</h2><p>因为是在本地学习 k8s，因此为了方便我就使用 Rancher 的 k3s 来进行安装。<br>下载 Vagrant 配置文件： <a href="https://github.com/wusuopu/kubernetes-vagrant-alpine" target="_blank" rel="external">https://github.com/wusuopu/kubernetes-vagrant-alpine</a></p>
<p>然后执行命令：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vagrant up --no-parallel --provision</div></pre></td></tr></table></figure></p>
<p>这里启动 k3s 服务，并将 master node 的 /etc/rancher/k3s/k3s.yaml 文件内容复制到 host 系统上来，这样就可以直接在 host 系统中用 kubectl 来操作集群。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">-&gt; % k get node -o wide</div><div class="line">NAME        STATUS   ROLES    AGE   VERSION        INTERNAL-IP   EXTERNAL-IP   OS-IMAGE             KERNEL-VERSION     CONTAINER-RUNTIME</div><div class="line">alpine-02   Ready    &lt;none&gt;   59m   v1.17.4-k3s1   172.17.0.3    &lt;none&gt;        Alpine Linux v3.11   4.9.184-linuxkit   docker://19.3.8</div><div class="line">alpine-01   Ready    master   59m   v1.17.4-k3s1   172.17.0.2    &lt;none&gt;        Alpine Linux v3.11   4.9.184-linuxkit   docker://19.3.8</div><div class="line">alpine-03   Ready    &lt;none&gt;   58m   v1.17.4-k3s1   172.17.0.4    &lt;none&gt;        Alpine Linux v3.11   4.9.184-linuxkit   docker://19.3.8</div></pre></td></tr></table></figure>
<p>这里集群的各个 node 都是一个 docker container。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">-&gt; % docker ps</div><div class="line">CONTAINER ID        IMAGE                        COMMAND                  CREATED             STATUS              PORTS                                                           NAMES</div><div class="line">a91d13e2cca0        wusuopu/vagrant:k3s-alpine   &quot;dockerd-entrypoint.…&quot;   About an hour ago   Up 35 minutes       2375-2376/tcp, 6443/tcp, 127.0.0.1:2201-&gt;22/tcp                 kubernetes-vagrant-alpine_alpine-03_1585887389</div><div class="line">cce93873b666        wusuopu/vagrant:k3s-alpine   &quot;dockerd-entrypoint.…&quot;   About an hour ago   Up 35 minutes       2375-2376/tcp, 6443/tcp, 127.0.0.1:2200-&gt;22/tcp                 kubernetes-vagrant-alpine_alpine-02_1585887382</div><div class="line">d4844843ca3e        wusuopu/vagrant:k3s-alpine   &quot;dockerd-entrypoint.…&quot;   About an hour ago   Up 36 minutes       2375-2376/tcp, 0.0.0.0:6443-&gt;6443/tcp, 127.0.0.1:2222-&gt;22/tcp   kubernetes-vagrant-alpine_alpine-01_1585887365</div></pre></td></tr></table></figure></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.xefan.com/archives/84179.html" data-id="ckhu60uq000rpl14ksnfcc76a" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Docker/">Docker</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/k8s/">k8s</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-/archives/84178.html" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/archives/84178.html" class="article-date">
  <time datetime="2020-02-03T14:35:36.443Z" itemprop="datePublished">2020-02-03</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/编程开发/">编程开发</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/archives/84178.html">Github Actions使用</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>最近在看 Github Actions，相对一 Gitlab CI 来说，它的配置就没有那么直观了。</p>
<p>以下通过一个例子来说下 Github Actions 的用法。</p>
<p>在项目根目录下创建文件 <code>.github/workflows/main.yml</code></p>
<figure class="highlight yaml"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line"><span class="attr">name:</span> <span class="string">CI</span></div><div class="line"></div><div class="line"><span class="attr">on:</span></div><div class="line">  <span class="comment"># 仅在有以 'v' 开头的 tag push 时才会触发</span></div><div class="line"><span class="attr">  push:</span></div><div class="line"><span class="attr">    tags:</span></div><div class="line"><span class="bullet">      -</span> <span class="string">v*</span></div><div class="line"></div><div class="line"><span class="attr">jobs:</span></div><div class="line"><span class="attr">  build:</span></div><div class="line"><span class="attr">    name:</span> <span class="string">build</span> <span class="string">docker</span> <span class="string">image</span></div><div class="line"><span class="attr">    runs-on:</span> <span class="string">ubuntu-latest</span></div><div class="line"></div><div class="line"><span class="attr">    steps:</span></div><div class="line">    <span class="comment"># 切换到当前的 commit</span></div><div class="line"><span class="attr">    - uses:</span> <span class="string">actions/checkout@v2</span></div><div class="line"><span class="attr">      with:</span></div><div class="line"><span class="attr">        ref:</span> <span class="string">$&#123;&#123;</span> <span class="string">github.ref</span> <span class="string">&#125;&#125;</span></div><div class="line"><span class="attr">    - name:</span> <span class="string">build</span> <span class="string">docker</span> <span class="string">image</span></div><div class="line"><span class="attr">      env:</span></div><div class="line"><span class="attr">        canister_user:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.canister_user</span> <span class="string">&#125;&#125;</span></div><div class="line"><span class="attr">        canister_password:</span> <span class="string">$&#123;&#123;</span> <span class="string">secrets.canister_password</span> <span class="string">&#125;&#125;</span></div><div class="line"><span class="attr">        docker_image_name:</span> <span class="string">cloud.canister.io:5000/$&#123;&#123;</span> <span class="string">github.repository</span> <span class="string">&#125;&#125;</span></div><div class="line"><span class="attr">      run:</span> <span class="string">|</span></div><div class="line"><span class="string">        echo $GITHUB_WORKSPACE $GITHUB_REF</span></div><div class="line"><span class="string">        cd $GITHUB_WORKSPACE</span></div><div class="line"><span class="string">        docker build -t $docker_image_name:$&#123;GITHUB_REF##*/&#125; .</span></div><div class="line"><span class="string">        docker login -u $canister_user -p $canister_password cloud.canister.io:5000</span></div><div class="line"><span class="string">        docker push $docker_image_name:$&#123;GITHUB_REF##*/&#125;</span></div></pre></td></tr></table></figure>
<p>以上的配置执行的操作是，当有新的 ‘v’ 开头的 tag push 时，则 build docker image 并 push 到 cloud.canister.io 的私有 docker registry 上。</p>
<p>这里 canister 的用户名和密码是通过 secrets 来配置的，在 github 的 repository -&gt; Settings -&gt; Secrets 页面。</p>
<p>参考： <a href="https://help.github.com/en/actions" target="_blank" rel="external">https://help.github.com/en/actions</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.xefan.com/archives/84178.html" data-id="ckhu60upw00rcl14kqza2gjt7" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/git/">git</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-/archives/84177.html" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/archives/84177.html" class="article-date">
  <time datetime="2019-11-30T15:37:50.127Z" itemprop="datePublished">2019-11-30</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Linux栏目/">Linux栏目</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/archives/84177.html">使用Vagrant在Ubuntu系统上搭建Kubernetes集群</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="安装依赖"><a href="#安装依赖" class="headerlink" title="安装依赖"></a>安装依赖</h2><h3 id="Vagrant"><a href="#Vagrant" class="headerlink" title="Vagrant"></a>Vagrant</h3><p>目前 Vagrant (<a href="https://www.vagrantup.com/downloads.html" target="_blank" rel="external">https://www.vagrantup.com/downloads.html</a>) 最新为 v2.2.6，Kubernetes 为 v1.16</p>
<h3 id="Kubectl"><a href="#Kubectl" class="headerlink" title="Kubectl"></a>Kubectl</h3><p>下载最新版的 kubectl:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">`curl -LO https://storage.googleapis.com/kubernetes-release/release/`curl -s https://storage.googleapis.com/kubernetes-release/release/stable.txt`/bin/linux/amd64/kubectl`</div></pre></td></tr></table></figure>
<h3 id="VirtualBox"><a href="#VirtualBox" class="headerlink" title="VirtualBox"></a>VirtualBox</h3><p>需要下载 Vagrant 所兼容的版本( <a href="https://www.vagrantup.com/docs/virtualbox/" target="_blank" rel="external">https://www.vagrantup.com/docs/virtualbox/</a> )。我是直接用 apt-get 安装 5.2 的版本。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">apt-get install virtualbox virtualbox-guest-additions-iso</div></pre></td></tr></table></figure>
<h2 id="运行-ubuntu-单实例"><a href="#运行-ubuntu-单实例" class="headerlink" title="运行 ubuntu 单实例"></a>运行 ubuntu 单实例</h2><p>创建 Vagrantfile 配置文件，这里在 virtualbox 内运行的是 Ubuntu 18.04。<br>若 Vagrant 的 Box 文件下载太慢，可先提前下载好：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">wget https://app.vagrantup.com/ubuntu/boxes/bionic64/versions/20191125.0.0/providers/virtualbox.box</div><div class="line"></div><div class="line">cat &gt; virtualbox.json &lt;EOF</div><div class="line">&#123;</div><div class="line">  &quot;name&quot;: &quot;ubuntu/bionic64&quot;,</div><div class="line">  &quot;versions&quot;: [</div><div class="line">    &#123;</div><div class="line">      &quot;version&quot;: &quot;20191125.0.0&quot;,</div><div class="line">      &quot;providers&quot;: [</div><div class="line">        &#123;</div><div class="line">          &quot;name&quot;: &quot;virtualbox&quot;,</div><div class="line">          &quot;url&quot;: &quot;virtualbox.box&quot;</div><div class="line">        &#125;</div><div class="line">      ]</div><div class="line">    &#125;</div><div class="line">  ]</div><div class="line">&#125;</div><div class="line">EOF</div><div class="line"></div><div class="line">vagrant box add ubuntu/bionic64 virtualbox.json</div></pre></td></tr></table></figure></p>
<figure class="highlight ruby"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line"><span class="comment"># -*- mode: ruby -*-</span></div><div class="line"><span class="comment"># vi: set ft=ruby :</span></div><div class="line"></div><div class="line">$num_instances = <span class="number">1</span></div><div class="line">$instance_name_prefix = <span class="string">"ubuntu"</span></div><div class="line">$vm_gui = <span class="literal">false</span></div><div class="line">$vm_memory = <span class="number">1024</span></div><div class="line">$vm_cpus = <span class="number">1</span></div><div class="line">$vb_cpuexecutioncap = <span class="number">100</span></div><div class="line">ip_prefix = <span class="string">'172.17.8.'</span></div><div class="line"></div><div class="line">Vagrant.configure(<span class="number">2</span>) <span class="keyword">do</span> <span class="params">|config|</span></div><div class="line">  (<span class="number">1</span>..$num_instances).each <span class="keyword">do</span> <span class="params">|i|</span></div><div class="line">    config.vm.define vm_name = <span class="string">"%s-%02d"</span> % [$instance_name_prefix, i] <span class="keyword">do</span> <span class="params">|node|</span></div><div class="line">      node.vm.box = <span class="string">'ubuntu/bionic64'</span></div><div class="line">      node.vm.box_version = <span class="string">"20191125.0.0"</span></div><div class="line">      node.vm.box_check_update = <span class="literal">false</span></div><div class="line">      node.vm.hostname = vm_name</div><div class="line">      node.vm.synced_folder <span class="string">'.'</span>, <span class="string">'/vagrant'</span>, <span class="symbol">type:</span> <span class="string">'virtualbox'</span></div><div class="line"></div><div class="line">      ip = <span class="string">"<span class="subst">#&#123;ip_prefix&#125;</span><span class="subst">#&#123;i+<span class="number">100</span>&#125;</span>"</span></div><div class="line">      node.vm.network <span class="string">'private_network'</span>, <span class="symbol">ip:</span> ip</div><div class="line">      node.vm.provider <span class="symbol">:virtualbox</span> <span class="keyword">do</span> <span class="params">|vb|</span></div><div class="line">        vb.gui = $vm_gui</div><div class="line">        vb.memory = $vm_memory</div><div class="line">        vb.cpus = $vm_cpus</div><div class="line">        vb.customize [<span class="string">"modifyvm"</span>, <span class="symbol">:id</span>, <span class="string">"--cpuexecutioncap"</span>, <span class="string">"<span class="subst">#&#123;$vb_cpuexecutioncap&#125;</span>"</span>]</div><div class="line">      <span class="keyword">end</span></div><div class="line">    <span class="keyword">end</span></div><div class="line">  <span class="keyword">end</span></div><div class="line"><span class="keyword">end</span></div></pre></td></tr></table></figure>
<p>接着启动 ubuntu</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vagrant up</div></pre></td></tr></table></figure>
<p>登录 ubuntu 实例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vagrant ssh</div></pre></td></tr></table></figure>
<p>至此 ubuntu 就是运行起来了。然后却只有一个 实例，但是在实际应用中可能是多个实例组成的集群。</p>
<h2 id="运行-ubuntu-多实例"><a href="#运行-ubuntu-多实例" class="headerlink" title="运行 ubuntu 多实例"></a>运行 ubuntu 多实例</h2><p>先停止刚刚的实例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vagrant halt</div></pre></td></tr></table></figure>
<p>然后修改 Vagrantfile 文件，将 $num_instances 变量改为3。这里我就启动3个实例来组成集群。<br>接着启动这3个实例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vagrant up</div></pre></td></tr></table></figure>
<p>查看实例状态</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">-&gt; % vagrant status</div><div class="line">Current machine states:</div><div class="line"></div><div class="line">ubuntu-01                 running (virtualbox)</div><div class="line">ubuntu-02                 running (virtualbox)</div><div class="line">ubuntu-03                 running (virtualbox)</div><div class="line"></div><div class="line">This environment represents multiple VMs. The VMs are all listed</div><div class="line">above with their current state. For more information about a specific</div><div class="line">VM, run `vagrant status NAME`.</div></pre></td></tr></table></figure>
<p>然后登录到其中的某个实例</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">vagrant ssh ubuntu-02</div></pre></td></tr></table></figure>
<h2 id="安装-Kubernetes"><a href="#安装-Kubernetes" class="headerlink" title="安装 Kubernetes"></a>安装 Kubernetes</h2><p>目前的3个 ubuntu 实例如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">172.17.8.101 (ubuntu-01)    master</div><div class="line">172.17.8.102 (ubuntu-02)    worker1</div><div class="line">172.17.8.103 (ubuntu-03)    worker2</div></pre></td></tr></table></figure>
<p>因为是在本地学习 k8s，因此为了方便我就使用 Rancher 的 k3s 来进行安装。<br>先分别在各个实例中安装 docker，参考： <a href="https://docs.docker.com/install/linux/docker-ce/ubuntu/" target="_blank" rel="external">https://docs.docker.com/install/linux/docker-ce/ubuntu/</a></p>
<p>先安装  master node</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">vagrant ssh ubuntu-01</div><div class="line">curl -sfL https://get.k3s.io | sh -</div></pre></td></tr></table></figure>
<p>接着分别进入另外两个实例内安装 worker node，其中 K3S_TOKEN 的值来自 /var/lib/rancher/k3s/server/node-token 文件。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">vagrant ssh ubuntu-02</div><div class="line">curl -sfL https://get.k3s.io | K3S_URL=https://172.17.8.101:6443 K3S_TOKEN=XXX sh -</div></pre></td></tr></table></figure>
<p>最后可以将 master node 的 /etc/rancher/k3s/k3s.yaml 文件内容复制到 host 系统上来，这样就可以直接在 host 系统中用 kubectl 来操作集群。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">-&gt; % k get nodes -o wide</div><div class="line">NAME        STATUS   ROLES    AGE     VERSION         INTERNAL-IP    EXTERNAL-IP   OS-IMAGE             KERNEL-VERSION      CONTAINER-RUNTIME</div><div class="line">ubuntu-03   Ready    &lt;none&gt;   4m57s   v1.16.3-k3s.2   172.17.8.103   &lt;none&gt;        Ubuntu 18.04.3 LTS   4.15.0-70-generic   docker://19.3.5</div><div class="line">ubuntu-02   Ready    &lt;none&gt;   7m25s   v1.16.3-k3s.2   172.17.8.102   &lt;none&gt;        Ubuntu 18.04.3 LTS   4.15.0-70-generic   docker://19.3.5</div><div class="line">ubuntu-01   Ready    master   8m5s    v1.16.3-k3s.2   172.17.8.101   &lt;none&gt;        Ubuntu 18.04.3 LTS   4.15.0-70-generic   docker://19.3.5</div></pre></td></tr></table></figure>
<p>当前安装的 k3s 是 v1.0.0，k8s 是 v1.16.3</p>
<p>最后我将完整的配置已经上传到 github 上了。大家有需要可以直接执行如下命令即可：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">git clone https://github.com/wusuopu/kubernetes-vagrant-ubuntu</div><div class="line">cd kubernetes-vagrant-ubuntu</div><div class="line">vagrant up</div></pre></td></tr></table></figure>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.xefan.com/archives/84177.html" data-id="ckhu60uq100rtl14ks1riz7vo" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Docker/">Docker</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/k8s/">k8s</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-/archives/84176.html" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/archives/84176.html" class="article-date">
  <time datetime="2019-11-04T11:01:06.658Z" itemprop="datePublished">2019-11-04</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Web开发/">Web开发</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/archives/84176.html">使用TypeScript开发Express应用</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="首先创建新项目"><a href="#首先创建新项目" class="headerlink" title="首先创建新项目"></a>首先创建新项目</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yarn init</div></pre></td></tr></table></figure>
<h2 id="然后安装-express"><a href="#然后安装-express" class="headerlink" title="然后安装 express"></a>然后安装 express</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">yarn add express</div><div class="line">yarn add @types/express @types/node --dev</div></pre></td></tr></table></figure>
<h2 id="安装-TypeScript"><a href="#安装-TypeScript" class="headerlink" title="安装 TypeScript"></a>安装 TypeScript</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yarn add --dev typescript</div></pre></td></tr></table></figure>
<h2 id="配置-webpack"><a href="#配置-webpack" class="headerlink" title="配置 webpack"></a>配置 webpack</h2><p>这是最麻烦的一步。先安装 webpack:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">yarn add --dev webpack webpack-cli webpack-node-externals ts-loader</div><div class="line">yarn add --dev nodemon webpack-shell-plugin</div></pre></td></tr></table></figure>
<p>添加 <code>webpack.config.js</code>:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div></pre></td><td class="code"><pre><div class="line">const path = require(&apos;path&apos;);</div><div class="line">const nodeExternals = require(&apos;webpack-node-externals&apos;);</div><div class="line">const WebpackShellPlugin = require(&apos;webpack-shell-plugin&apos;);</div><div class="line"></div><div class="line">const &#123; NODE_ENV = &apos;production&apos; &#125; = process.env;</div><div class="line">const rootPath = path.resolve(__dirname)</div><div class="line"></div><div class="line">let plugins = []</div><div class="line">if (NODE_ENV === &apos;development&apos;) &#123;</div><div class="line">  plugins.push(new WebpackShellPlugin(&#123;</div><div class="line">    onBuildEnd: [&apos;yarn run:dev&apos;]</div><div class="line">  &#125;))</div><div class="line">&#125;</div><div class="line"></div><div class="line">module.exports = &#123;</div><div class="line">  entry: path.resolve(rootPath, &apos;./src/index.ts&apos;),</div><div class="line">  mode: NODE_ENV,</div><div class="line">  target: &apos;node&apos;,</div><div class="line">  watch: NODE_ENV === &apos;development&apos;,</div><div class="line">  externals: [ nodeExternals() ],</div><div class="line">  output: &#123;</div><div class="line">    path: path.resolve(rootPath, &apos;build&apos;, NODE_ENV === &apos;development&apos; ? &apos;dev&apos; : &apos;prod&apos;),</div><div class="line">    filename: &apos;index.js&apos;</div><div class="line">  &#125;,</div><div class="line">  resolve: &#123;</div><div class="line">    extensions: [&apos;.ts&apos;, &apos;.js&apos;],</div><div class="line">  &#125;,</div><div class="line">  plugins: plugins,</div><div class="line">  module: &#123;</div><div class="line">    rules: [</div><div class="line">      &#123;</div><div class="line">        test: /\.ts$/,</div><div class="line">        use: [</div><div class="line">          &apos;ts-loader&apos;,</div><div class="line">        ]</div><div class="line">      &#125;</div><div class="line">    ]</div><div class="line">  &#125;,</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>添加 <code>tsconfig.json</code>:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  &quot;compilerOptions&quot;: &#123;</div><div class="line">    &quot;module&quot;: &quot;commonjs&quot;,</div><div class="line">    &quot;target&quot;: &quot;es5&quot;,</div><div class="line">    &quot;noImplicitAny&quot;: false,</div><div class="line">    &quot;sourceMap&quot;: true,</div><div class="line">    &quot;outDir&quot;: &quot;build&quot;</div><div class="line">  &#125;,</div><div class="line">  &quot;exclude&quot;: [</div><div class="line">    &quot;node_modules&quot;,</div><div class="line">    &quot;build&quot;,</div><div class="line">    &quot;config&quot;,</div><div class="line">    &quot;release&quot;</div><div class="line">  ]</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>在 <code>package.json</code> 中添加相关命令:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">&quot;scripts&quot;: &#123;</div><div class="line">  &quot;start&quot;: &quot;node build/prod/index.js&quot;,</div><div class="line">  &quot;start:dev&quot;: &quot;NODE_ENV=development node node_modules/webpack/bin/webpack.js --config webpack.config.js&quot;,</div><div class="line">  &quot;build&quot;: &quot;NODE_ENV=production node node_modules/webpack/bin/webpack.js --config webpack.config.js&quot;,</div><div class="line">  &quot;run:dev&quot;: &quot;NODE_ENV=development nodemon build/dev/index.js&quot;,</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>这样在开发过程只需要执行 <code>yarn run start:dev</code> 启动开发服务器即可，在代码有改动之后会自己重新 build 并重启服务。<br>开发完成之后执行 <code>yarn build</code> 进行打包发布。</p>
<h2 id="使用-jest-进行测试-可选"><a href="#使用-jest-进行测试-可选" class="headerlink" title="使用 jest 进行测试(可选)"></a>使用 jest 进行测试(可选)</h2><p>安装 jest：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yarn add -D jest @types/jest ts-jest supertest</div></pre></td></tr></table></figure></p>
<p>添加 <code>jest.config.js</code>:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">module.exports = &#123;</div><div class="line">  testEnvironment: &apos;node&apos;,</div><div class="line">  transform: &#123;</div><div class="line">    &quot;^.+\\.ts$&quot;: &quot;ts-jest&quot;</div><div class="line">  &#125;,</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>相应的测试文件的文件名以 <code>.test.ts</code> 结尾。</p>
<p>然后在 <code>package.json</code> 中添加相关命令：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">&quot;scripts&quot;: &#123;</div><div class="line">  &quot;test&quot;: &quot;jest&quot;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>最终项目目录结构如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line">.</div><div class="line">├── jest.config.js</div><div class="line">├── package.json</div><div class="line">├── src</div><div class="line">│   └── index.ts</div><div class="line">├── tests</div><div class="line">│   └── index.test.ts</div><div class="line">├── tsconfig.json</div><div class="line">├── webpack.config.js</div><div class="line">└── yarn.lock</div></pre></td></tr></table></figure></p>
<p>参考源代码： <a href="https://github.com/wusuopu/baidu-pan-cli" target="_blank" rel="external">https://github.com/wusuopu/baidu-pan-cli</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.xefan.com/archives/84176.html" data-id="ckhu60upy00rjl14k6046gg7s" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js/">js</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/node/">node</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/typescript/">typescript</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-/archives/84175.html" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/archives/84175.html" class="article-date">
  <time datetime="2019-05-28T08:40:43.583Z" itemprop="datePublished">2019-05-28</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/教程/">教程</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/archives/84175.html">记录神舟战神 Z7M-KP7GZ 安装黑苹果过程</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2 id="前言"><a href="#前言" class="headerlink" title="前言"></a>前言</h2><p>现在这台 MacBook Air 差不多用了4年，因此打算换台新的电脑。目前需要一台有独显的电脑，一来是跑一些程序，二来是方便打游戏。<br>另外由于 macOS 已经用习惯了，不想再换其他系统。因此才考虑的安装黑苹果。通过两周的调研，别人给的经验是最好选择已经有人安装成功过的电脑型号，免得有问题自己折腾。<br>于是乎就选择了性价比比较高的神舟。最后安装完成之后，系统还有些小问题，不过基本也能用。对于要求比较高的建议还是白苹果吧。</p>
<h2 id="准备"><a href="#准备" class="headerlink" title="准备"></a>准备</h2><ul>
<li>一个8G以上的U盘，用于烧写系统镜像</li>
<li>一个U盘，大小不限，只要启动WinPE就行</li>
<li>一个usb鼠标，安装过程中触摸板用不了</li>
</ul>
<p>因为我打算安装3个系统，我的硬盘分区如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line">128G SSD:</div><div class="line">ESP     600M    用于EFI引导</div><div class="line">EXT4    127G    用于安装ubuntu</div><div class="line"></div><div class="line">1TB机械硬盘：</div><div class="line">ESP     200M    用于EFI引导</div><div class="line">MSR     128M</div><div class="line">NTFS    100G    Windows C</div><div class="line">NTFS    100G    Windows D</div><div class="line">SWAP    16G     Linux交换分区</div><div class="line">EXFAT32 320G    用于多个系统之间分享文件</div><div class="line">APFS    440G    安装黑苹果</div></pre></td></tr></table></figure></p>
<p>在安装过程中需要用苹果的硬盘工具进行分区，如果硬盘上有文件的话需要先进行备份。</p>
<p>安装过程我是参考的黑果小兵博客： <a href="https://blog.daliansky.net/Lenovo-Xiaoxin-Air-13-macOS-Mojave-installation-tutorial.html" target="_blank" rel="external">https://blog.daliansky.net/Lenovo-Xiaoxin-Air-13-macOS-Mojave-installation-tutorial.html</a></p>
<p>下载镜像 ( <a href="https://blog.daliansky.net/tags/%E9%95%9C%E5%83%8F/" target="_blank" rel="external">https://blog.daliansky.net/tags/%E9%95%9C%E5%83%8F/</a> ) 然后使用镜像烧写工具将镜像烧写到8G的U盘。这里我用的是 Etcher 这个工具。<br>参考别人的说法，10.14 的系统没有 Nvidia 的显卡驱动，10.13 的系统才有。不过我还是下载的 10.14.4 的系统镜像。</p>
<p>下载 Z7M-KP7GZ 的相关驱动： <a href="https://github.com/kirainmoe/hasee-z7-kp7gz-macos" target="_blank" rel="external">https://github.com/kirainmoe/hasee-z7-kp7gz-macos</a></p>
<h2 id="安装步骤"><a href="#安装步骤" class="headerlink" title="安装步骤"></a>安装步骤</h2><p>启动电脑进入 BIOS 禁用 Secure Boot。然后通过U盘启动进入WinPE，先按照上面的硬盘分区计划对硬盘进行分区。如果你是整块硬盘只用于安装 macOS，则可以忽略这上步。<br>然后重启换另一个U盘启动进入 macOS 的安装界面。进入 Clover 后按 o 键在 Boot 项后面添加 nv_disable=1 参数。如图：<br><img src="/wp-content/uploads/2019/05/hasee_macos_01.jpg" alt=""></p>
<p>然后回车开始引导 macOS。等几分钟之后就进入了安装程序，依次选择语言、同意用户协议、选择安装硬盘。<br>这里可以打开硬盘工具，然后进行分区。建议使用 APFS 格式的分区。注意，如果原来硬盘上有数据的记得先备份。如图：<br><img src="/wp-content/uploads/2019/05/hasee_macos_02.png" alt=""><br><img src="/wp-content/uploads/2019/05/hasee_macos_03.jpg" alt=""></p>
<p>安装过程中会重启，重启之后进入 Clover 再选择使用对应的硬盘分区，选择”Boot macOS install from Mac”启动项，不要选择Preboot的启动项。<br><img src="/wp-content/uploads/2019/05/hasee_macos_04.jpg" alt=""></p>
<p>如果出现Kernel Panic错误，重启再来试一遍吧。<br><img src="/wp-content/uploads/2019/05/hasee_macos_05.jpg" alt=""></p>
<p>安装过程中啥都干不了，只能等了。差不多等半个小时就安装完成。接下来进入设置向导，选择地区、添加几号等操作。这个过程中触摸板用不了，所以需要外接鼠标。<br>最后安装完成，进入系统。<br><img src="/wp-content/uploads/2019/05/hasee_macos_06.jpg" alt=""></p>
<p>系统安装完成之后，接下来就是安装EFI。因为现在EFI文件还是U盘里，否则就只能每次启动时都需要通过U盘来引导了。<br>在前面使用硬盘工具进行分区时，它会在当前硬盘的开始位置创建一个200M的ESP分区。我们只需要将U盘中的EFI复制到这个分区里即可。</p>
<p>打开终端执行命令：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line"># 查找分区情况</div><div class="line">diskutil list</div><div class="line"></div><div class="line"># 分别挂载本地硬盘的EFI分区各u盘的EFI分区</div><div class="line">sudo diskutil mount disk1s1</div><div class="line">sudo diskutil mount disk3s1</div></pre></td></tr></table></figure></p>
<p>然后将u盘中EFI目录下的所有文件复制到硬盘中的EFI目录。如果之前已经有安装过其他的系统，那么只需要将u盘中的 EFI/CLOVER 复制到硬盘中的 EFI 目录下即可</p>
<h2 id="安装驱动"><a href="#安装驱动" class="headerlink" title="安装驱动"></a>安装驱动</h2><p>现在系统安装好了，EFI也安装好了。应该就可以正常地进入系统了。不过目前还有这些问题：</p>
<ul>
<li>触摸板用不了</li>
<li>WiFi、蓝牙用不了</li>
<li>显卡用不了，不用使用外接显示器</li>
</ul>
<p>然后我们再接着安装驱动文件。先挂载 ESP 分区，备份 EFI 目录，以免出错之后进不了系统时可以恢复。</p>
<p>删掉 /EFI/CLOVER 文件夹中的所有文件，然后将刚刚下载的所有驱动文件复制到 /EFI/CLOVER 目录下。<br>重启电脑然后执行里面的 optimize.sh 脚本，注意不要启动HiDPI。驱动安装好之后触摸板应该就能用了。</p>
<p>如果声卡不能使用的话，执行命令 kextstat -list-only | grep AppleALC  看看AppleALC.kext 驱动已正确加载。如果没有正确加载，请将其安装在 /Library/Extensions 下后执行命令 sudo kextcache -i / 重建缓存并重启。</p>
<p>接下来搞定无线网卡，如果不想折腾直接用有线了行。Z7M-KP7GZ用的是Intel的无线网卡，这个在 macOS 下是无解的。<br>其他折腾过的网友建议是换Broadcom的。如果要使用AirDrop或者Handoff，要求有蓝牙4.0LE，需要特定型号的博通网卡，比如博通BCM94322HMP（有带蓝牙和不带蓝牙版本的，注意挑选）。</p>
<p>于是我就在淘宝上买了块 BCM94350 WiFi、蓝牙二合一。然后拆机将网卡换上去。网卡在风扇的旁边。<br><img src="/wp-content/uploads/2019/05/hasee_macos_07.jpg" alt=""></p>
<p>结果一开机系统就崩溃了，进入不了登录界面。后来联系卖家，他们说这个只有 macOS 10.13 的驱动，没有 10.14 的。而我安装主正是 10.14 的系统。<br>欲哭无泪啊，折腾了两天，BCM94350网卡的驱动实在搞不定。最后只得再买了个支持黑苹果的USB无线网卡。<br>另外显卡驱动目前在 10.14 下也是无解的。如果要外接显示器的话，可能需要再购买带显卡的 type-C 设备。</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.xefan.com/archives/84175.html" data-id="ckhu60upx00rgl14kjyl4tbqy" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Mac/">Mac</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-/archives/84174.html" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/archives/84174.html" class="article-date">
  <time datetime="2019-03-14T10:27:36.262Z" itemprop="datePublished">2019-03-14</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端相关/">前端相关</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/archives/84174.html">react storybook使用typescript</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>在前面的文章有介绍<a href="84172.html" target="_blank">在storybook中使用antd</a>。<br>之前开发js是使用的flow来作类型检查，最近想尝试一下typescript。<br>如果是从头创建一个空的typescript项目则相对就比较简单，但是现在我们是需要将之前的create-react-app项目迁移到typescript。</p>
<h2 id="在create-react-app中添加typescript"><a href="#在create-react-app中添加typescript" class="headerlink" title="在create-react-app中添加typescript"></a>在create-react-app中添加typescript</h2><p>参考 <a href="https://facebook.github.io/create-react-app/docs/adding-typescript" target="_blank" rel="external">https://facebook.github.io/create-react-app/docs/adding-typescript</a><br>react-scripts从2.1.0版本开始就支持typescript了，这里我们先将项目的react-scripts依赖升级到最新版本：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yarn add --exact react-scripts@2.1.8</div></pre></td></tr></table></figure></p>
<p>然后再添加typescript依赖：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yarn add typescript @types/node @types/react @types/react-dom @types/jest</div></pre></td></tr></table></figure></p>
<p>然后将 <code>src/index.js</code> 更名为 <code>src/index.tsx</code><br>接着创建 <code>tsconfig.json</code> 文件：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  &quot;compilerOptions&quot;: &#123;</div><div class="line">    &quot;module&quot;: &quot;esnext&quot;,</div><div class="line">    &quot;target&quot;: &quot;es5&quot;,</div><div class="line">    &quot;lib&quot;: [&quot;es5&quot;, &quot;es6&quot;, &quot;es7&quot;, &quot;es2017&quot;, &quot;dom&quot;],</div><div class="line">    &quot;sourceMap&quot;: true,</div><div class="line">    &quot;allowJs&quot;: true,</div><div class="line">    &quot;moduleResolution&quot;: &quot;node&quot;,</div><div class="line">    &quot;forceConsistentCasingInFileNames&quot;: true,</div><div class="line">    &quot;skipLibCheck&quot;: false,</div><div class="line">    &quot;esModuleInterop&quot;: true,</div><div class="line">    &quot;allowSyntheticDefaultImports&quot;: true,</div><div class="line">    &quot;strict&quot;: true,</div><div class="line">    &quot;resolveJsonModule&quot;: true,</div><div class="line">    &quot;isolatedModules&quot;: true,</div><div class="line">    &quot;noEmit&quot;: true,</div><div class="line">    &quot;jsx&quot;: &quot;preserve&quot;</div><div class="line">  &#125;,</div><div class="line">  &quot;include&quot;: [</div><div class="line">    &quot;src/**/*&quot;</div><div class="line">  ]</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<h2 id="在storybook中添加typescript"><a href="#在storybook中添加typescript" class="headerlink" title="在storybook中添加typescript"></a>在storybook中添加typescript</h2><p>参考 <a href="https://storybook.js.org/docs/configurations/typescript-config/" target="_blank" rel="external">https://storybook.js.org/docs/configurations/typescript-config/</a><br>同样也先将storybook升级到最新版：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yarn add --dev --exact @storybook/addons@5.0.1 @storybook/react@5.0.1</div></pre></td></tr></table></figure></p>
<p>然后再添加依赖：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">yarn add --dev awesome-typescript-loader @types/storybook__react @storybook/addon-info react-docgen-typescript-webpack-plugin ts-jest</div></pre></td></tr></table></figure></p>
<p>接着修改webpack配置，对应<code>.storybook/webpack.config.js</code>文件：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">const path = require(&quot;path&quot;);</div><div class="line">const antdTheme = &#123;</div><div class="line">  &apos;@primary-color&apos;: &apos;#846bc1&apos;,</div><div class="line">&#125;</div><div class="line"></div><div class="line">module.exports = (&#123; config, mode &#125;) =&gt; &#123;</div><div class="line">  config.module.rules.push(&#123;</div><div class="line">    test: /\.less$/,</div><div class="line">    use: [&#123;</div><div class="line">      loader: &quot;style-loader&quot;</div><div class="line">    &#125;, &#123;</div><div class="line">      loader: &quot;css-loader&quot;</div><div class="line">    &#125;, &#123;</div><div class="line">      loader: &quot;less-loader&quot;,</div><div class="line">      options: &#123;</div><div class="line">        modifyVars: antdTheme,    // 如果要自定义主题样式</div><div class="line">        javascriptEnabled: true</div><div class="line">      &#125;</div><div class="line">    &#125;]</div><div class="line">  &#125;);</div><div class="line">  config.module.rules.push(&#123;</div><div class="line">    test: /\.(ts|tsx)$/,</div><div class="line">    loader: require.resolve(&apos;awesome-typescript-loader&apos;),</div><div class="line">    options: &#123; configFileName: path.resolve(__dirname, &apos;./tsconfig.json&apos;) &#125;</div><div class="line">  &#125;);</div><div class="line">  config.resolve.extensions.push(&apos;.ts&apos;, &apos;.tsx&apos;);</div><div class="line"></div><div class="line">  return config;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>以及babel配置，对应<code>.storybook/babelrc.js</code>文件：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div></pre></td><td class="code"><pre><div class="line">module.exports = function(api) &#123;</div><div class="line">  api.cache.forever();</div><div class="line">  return &#123;</div><div class="line">    &quot;presets&quot;: [</div><div class="line">      [</div><div class="line">        &quot;@babel/preset-env&quot;,</div><div class="line">        &#123;</div><div class="line">          &quot;modules&quot;: false,</div><div class="line">          &quot;targets&quot;: &#123;</div><div class="line">            &quot;browsers&quot;: [</div><div class="line">              &quot;&gt;1%&quot;,</div><div class="line">              &quot;last 4 versions&quot;,</div><div class="line">              &quot;Firefox ESR&quot;,</div><div class="line">              &quot;not ie &lt; 11&quot;</div><div class="line">            ]</div><div class="line">          &#125;</div><div class="line">        &#125;</div><div class="line">      ],</div><div class="line">      &quot;@babel/preset-react&quot;</div><div class="line">    ],</div><div class="line">    &quot;plugins&quot;: [</div><div class="line">      [</div><div class="line">        &quot;import&quot;,</div><div class="line">        &#123;</div><div class="line">          &quot;libraryName&quot;: &quot;antd&quot;,</div><div class="line">          &quot;style&quot;: true</div><div class="line">        &#125;</div><div class="line">      ]</div><div class="line">    ]</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>同时修改storybook配置<code>.storybook/config.js</code>，让其支持.tsx文件：<br>将之前的：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">const req = require.context(&apos;../src/components&apos;, true, /\.stories\.js$/)</div></pre></td></tr></table></figure></p>
<p>修改为：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">const req = require.context(&apos;../src/components&apos;, true, /\.stories\.[jt]sx?$/)</div></pre></td></tr></table></figure></p>
<p>最后再创建 <code>.storybook/tsconfig.json</code> 文件：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  &quot;extends&quot;: &quot;../tsconfig&quot;,</div><div class="line">  &quot;compilerOptions&quot;: &#123;</div><div class="line">    &quot;jsx&quot;: &quot;react&quot;,</div><div class="line">    &quot;isolatedModules&quot;: false,</div><div class="line">    &quot;noEmit&quot;: false</div><div class="line">  &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>至此一切都完成了。</p>
<p>运行storybook时若出现错误： <code>Error: Cannot find module &#39;@emotion/core/package.json&#39;</code>，则手动安装一下： <code>yarn add --dev @emotion/core</code></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.xefan.com/archives/84174.html" data-id="ckhu60upw00r9l14kw9gbuk7i" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js/">js</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/react/">react</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-/archives/84173.html" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/archives/84173.html" class="article-date">
  <time datetime="2019-03-02T21:26:22.080Z" itemprop="datePublished">2019-03-02</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Linux栏目/">Linux栏目</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/archives/84173.html">在树莓派3上运行Android6</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>最近需要在 android 上进行测试，无奈在电脑上使用模拟器运行速度太慢了。<br>正好我还有几个闲置的树莓派3设备，于是就尝试在树莓派上运行android看看。</p>
<h2 id="刻录系统到SD卡"><a href="#刻录系统到SD卡" class="headerlink" title="刻录系统到SD卡"></a>刻录系统到SD卡</h2><p>1.先下载 android6 的树莓派镜像： <a href="https://pan.baidu.com/s/1YHrmjN3be7UaLAdBJr-YhQ" target="_blank" rel="external">https://pan.baidu.com/s/1YHrmjN3be7UaLAdBJr-YhQ</a></p>
<p>2.下载完成后解压，然后开始执行写入操作： sudo dd if=andrpi3-20160626.img of=/dev/disk3 bs=4096000</p>
<p>这里我用的读卡器，被识别为 disk3。文件比较大，请耐心等待。我写入差不多花了一个小时的时间。</p>
<h2 id="运行系统"><a href="#运行系统" class="headerlink" title="运行系统"></a>运行系统</h2><p>将SD卡插回到树莓派中，并接上鼠标、键盘、显示器，然后开机。<br>这里稍微注意一下，树莓派3需要 5V/2A 的电源才能工作。<br>刚开始我试了一下开不了机，结果才发现是电源电压不足。</p>
<p>运行效果如图：<br><img src="/wp-content/uploads/2019/03/raspberry_pi-android6.JPG" alt=""></p>
<p>连接上网络之后使用 adb 进行操作： adb connect 192.168.0.101<br>这里我的树莓派的ip为 192.168.0.101</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.xefan.com/archives/84173.html" data-id="ckhu60upv00r5l14k7f2vc6q6" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Android/">Android</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/树莓派/">树莓派</a></li></ul>

    </footer>
  </div>
  
</article>



  
    <article id="post-/archives/84172.html" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/archives/84172.html" class="article-date">
  <time datetime="2018-11-22T14:55:23.919Z" itemprop="datePublished">2018-11-22</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/前端相关/">前端相关</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/archives/84172.html">在storybook中使用antd</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>最近一个 react 的项目有用到了 antd 这个 ui 库。这里作个笔记记录一下如何在 storybook 中显示 antd 的组件。</p>
<p>项目是使用 <code>create-react-app</code> 创建的，项目目录结构如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">├── .storybook/</div><div class="line">├── README.md</div><div class="line">├── antd-theme.js</div><div class="line">├── node_modules</div><div class="line">├── package.json</div><div class="line">├── public</div><div class="line">└── src</div><div class="line">    ├── App.js</div><div class="line">    ├── components</div><div class="line">    │   ├── button.js</div><div class="line">    │   └── button.stories.js</div><div class="line">    ├── index.js</div><div class="line">    └── registerServiceWorker.js</div></pre></td></tr></table></figure></p>
<p>这里创建了一个 <code>button</code> 组件，内容如下：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// src/components/button.js</span></div><div class="line"><span class="keyword">import</span> React, &#123; Component, Fragment &#125; <span class="keyword">from</span> <span class="string">'react'</span>;</div><div class="line"><span class="keyword">import</span> &#123; Button &#125; <span class="keyword">from</span> <span class="string">'antd'</span>;</div><div class="line"></div><div class="line"><span class="class"><span class="keyword">class</span> <span class="title">ButtonGhost</span> <span class="keyword">extends</span> <span class="title">Component</span> </span>&#123;</div><div class="line">  render() &#123; </div><div class="line">    <span class="keyword">return</span> (</div><div class="line">      &lt;Fragment&gt;</div><div class="line">        &lt;h3 className=<span class="string">"ex-title"</span>&gt;Ghost Button&lt;<span class="regexp">/h3&gt;</span></div><div class="line"><span class="regexp">        &lt;div style=&#123;&#123; background: 'rgb(47, 45, 165)', padding: '26px 16px 16px' &#125;&#125;&gt;</span></div><div class="line"><span class="regexp">          &lt;Button type="primary"&gt;Primary&lt;/</span>Button&gt;</div><div class="line">          &lt;Button className=<span class="string">"ml20"</span> ghost&gt;Default&lt;<span class="regexp">/Button&gt;</span></div><div class="line"><span class="regexp">          &lt;Button className="ml20" type="dashed" ghost&gt;Dashed&lt;/</span>Button&gt;</div><div class="line">          &lt;Button className=<span class="string">"ml20"</span> type=<span class="string">"danger"</span> ghost&gt;danger&lt;<span class="regexp">/Button&gt;</span></div><div class="line"><span class="regexp">        &lt;/</span>div&gt;</div><div class="line">      &lt;<span class="regexp">/Fragment&gt;</span></div><div class="line"><span class="regexp">    );</span></div><div class="line"><span class="regexp">  &#125;</span></div><div class="line"><span class="regexp">&#125;</span></div><div class="line"><span class="regexp"> </span></div><div class="line"><span class="regexp">export default ButtonGhost;</span></div></pre></td></tr></table></figure></p>
<p>对应的 storybook 案例如下：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// src/components/button.stories.js</span></div><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span>;</div><div class="line"><span class="keyword">import</span> &#123; storiesOf &#125; <span class="keyword">from</span> <span class="string">'@storybook/react'</span>;</div><div class="line"><span class="keyword">import</span> Button <span class="keyword">from</span> <span class="string">'./button'</span>;</div><div class="line"></div><div class="line">storiesOf(<span class="string">'General'</span>, <span class="built_in">module</span>)</div><div class="line">  .add(<span class="string">'Button'</span>, () =&gt; <span class="xml"><span class="tag">&lt;<span class="name">Button</span> /&gt;</span>)</span></div></pre></td></tr></table></figure></p>
<p>然后 storybook 配置如下：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div></pre></td><td class="code"><pre><div class="line"><span class="comment">// .storybook/config.js</span></div><div class="line"><span class="keyword">import</span> React <span class="keyword">from</span> <span class="string">'react'</span></div><div class="line"><span class="keyword">import</span> &#123; configure &#125; <span class="keyword">from</span> <span class="string">'@storybook/react'</span></div><div class="line"><span class="keyword">import</span> &#123; ThemeProvider  &#125; <span class="keyword">from</span> <span class="string">'styled-components'</span></div><div class="line"></div><div class="line"><span class="keyword">const</span> req = <span class="built_in">require</span>.context(<span class="string">'../src/components'</span>, <span class="literal">true</span>, /\.stories\.js$/)</div><div class="line"></div><div class="line"><span class="function"><span class="keyword">function</span> <span class="title">loadStories</span>(<span class="params"></span>) </span>&#123;</div><div class="line">  req.keys().forEach(<span class="function">(<span class="params">filename</span>) =&gt;</span> req(filename))</div><div class="line">&#125;</div><div class="line"></div><div class="line">configure(loadStories, <span class="built_in">module</span>)</div></pre></td></tr></table></figure></p>
<p>然后运行 storybook ： <code>start-storybook -p 6006 -c .storybook</code>，效果如下：</p>
<p><img src="/wp-content/uploads/2018/11/antd-storybook-01.png" alt=""></p>
<p>这是由于 antd 的 css 没有加载，因此所有按钮的样式都没有。<br>参考 <a href="https://ant.design/docs/react/use-with-create-react-app-cn" target="_blank" rel="external">https://ant.design/docs/react/use-with-create-react-app-cn</a> 的说明，修改 babel 和 webpack 的配置。<br>参考 <a href="https://storybook.js.org/configurations/custom-webpack-config" target="_blank" rel="external">https://storybook.js.org/configurations/custom-webpack-config</a> 的说明，修改 storybook 的 webpack 配置。</p>
<p>创建文件 <code>.storybook/.babelrc</code>：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">&#123;</div><div class="line">  <span class="string">"presets"</span>: [</div><div class="line">    [</div><div class="line">      <span class="string">"env"</span>,</div><div class="line">      &#123;</div><div class="line">        <span class="string">"modules"</span>: <span class="literal">false</span>,</div><div class="line">        <span class="string">"targets"</span>: &#123;</div><div class="line">          <span class="string">"browsers"</span>: [</div><div class="line">            <span class="string">"&gt;1%"</span>,</div><div class="line">            <span class="string">"last 4 versions"</span>,</div><div class="line">            <span class="string">"Firefox ESR"</span>,</div><div class="line">            <span class="string">"not ie &lt; 11"</span></div><div class="line">          ]</div><div class="line">        &#125;</div><div class="line">      &#125;</div><div class="line">    ],</div><div class="line">    <span class="string">"react"</span>,</div><div class="line">    <span class="string">"stage-3"</span></div><div class="line">  ],</div><div class="line">  <span class="string">"plugins"</span>: [</div><div class="line">    [</div><div class="line">      <span class="string">"import"</span>,</div><div class="line">      &#123;</div><div class="line">        <span class="string">"libraryName"</span>: <span class="string">"antd"</span>,</div><div class="line">        <span class="string">"style"</span>: <span class="literal">true</span></div><div class="line">      &#125;</div><div class="line">    ]</div><div class="line">  ]</div><div class="line">&#125;</div></pre></td></tr></table></figure></p>
<p>创建文件 <code>.storybook/webpack.config.js</code>：<br><figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="built_in">module</span>.exports = &#123;</div><div class="line">  <span class="built_in">module</span>: &#123;</div><div class="line">    rules: [</div><div class="line">      &#123;</div><div class="line">        test: <span class="regexp">/\.less$/</span>,</div><div class="line">        use: [&#123;</div><div class="line">          loader: <span class="string">"style-loader"</span></div><div class="line">        &#125;, &#123;</div><div class="line">          loader: <span class="string">"css-loader"</span></div><div class="line">        &#125;, &#123;</div><div class="line">          loader: <span class="string">"less-loader"</span>,</div><div class="line">          options: &#123;</div><div class="line">            <span class="comment">//modifyVars: antdTheme,    // 如果要自定义主题样式</span></div><div class="line">            javascriptEnabled: <span class="literal">true</span></div><div class="line">          &#125;</div><div class="line">        &#125;]</div><div class="line">      &#125;</div><div class="line">    ]</div><div class="line">  &#125;</div><div class="line">&#125;;</div></pre></td></tr></table></figure></p>
<p>然后在 <code>.storybook/config.js</code> 文件添加 <code>import &#39;antd/dist/antd.less&#39;;</code> 。<br>最后的效果如下：<br><img src="/wp-content/uploads/2018/11/antd-storybook-02.png" alt=""></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://www.xefan.com/archives/84172.html" data-id="ckhu60upu00r2l14kee5j5fbc" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/js/">js</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/react/">react</a></li></ul>

    </footer>
  </div>
  
</article>



  


  <nav id="page-nav">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><span class="space">&hellip;</span><a class="page-number" href="/page/31/">31</a><a class="extend next" rel="next" href="/page/2/">Next&raquo;</a>
  </nav>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Linux栏目/">Linux栏目</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Python栏目/">Python栏目</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/Ruby栏目/">Ruby栏目</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Ruby栏目/Web开发/">Web开发</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/Web开发/">Web开发</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Web开发/Python栏目/">Python栏目</a></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/前端相关/">前端相关</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/嵌入式栏目/">嵌入式栏目</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/开源软件/">开源软件</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/教程/">教程</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据库/">数据库</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/数据结构和算法/">数据结构和算法</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/编程开发/">编程开发</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/网络日志/">网络日志</a></li><li class="category-list-item"><a class="category-list-link" href="/categories/资源分享/">资源分享</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/ARM/">ARM</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Android/">Android</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Arch/">Arch</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/C/">C</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Django/">Django</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Docker/">Docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Dreamweaver/">Dreamweaver</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Fedora/">Fedora</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Flash/">Flash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GObject/">GObject</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Gentoo/">Gentoo</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Hash/">Hash</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Linux/">Linux</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Mac/">Mac</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/PS/">PS</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Qt/">Qt</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Raspberry-pi/">Raspberry pi</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Redis/">Redis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Ruby/">Ruby</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Scrapy/">Scrapy</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TQ2440/">TQ2440</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/USB/">USB</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/VirtualBox/">VirtualBox</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Web开发/">Web开发</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/WordPress/">WordPress</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Xcode/">Xcode</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/access/">access</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/adobe/">adobe</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ajax/">ajax</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/angular/">angular</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/apache/">apache</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/asp/">asp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/css/">css</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/firefox/">firefox</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ftp/">ftp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gcc/">gcc</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/git/">git</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/grub/">grub</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gtk/">gtk</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/gulp/">gulp</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ibus/">ibus</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/js/">js</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/k8s/">k8s</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mongodb/">mongodb</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mysql/">mysql</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/nginx/">nginx</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/node/">node</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/php/">php</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/pygame/">pygame</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/python/">python</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/react/">react</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/redis/">redis</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/shell/">shell</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/typescript/">typescript</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ubuntu/">ubuntu</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vim/">vim</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/vmware/">vmware</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/w3m/">w3m</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/windows/">windows</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/xml/">xml</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/免费/">免费</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/内核/">内核</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/匹配算法/">匹配算法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/单片机/">单片机</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/嵌入式/">嵌入式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/开源软件/">开源软件</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/排序算法/">排序算法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/文件空间/">文件空间</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/无线网/">无线网</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/树莓派/">树莓派</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/正则式/">正则式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/注册机/">注册机</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/游戏/">游戏</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/电脑技巧/">电脑技巧</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/空间/">空间</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/算法/">算法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/红旗/">红旗</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/经典语录/">经典语录</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/网络日志/">网络日志</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/翻译/">翻译</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/视频教程/">视频教程</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/资源分享/">资源分享</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/转载/">转载</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/随笔/">随笔</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/ARM/" style="font-size: 13.68px;">ARM</a> <a href="/tags/Android/" style="font-size: 10.53px;">Android</a> <a href="/tags/Arch/" style="font-size: 13.16px;">Arch</a> <a href="/tags/C/" style="font-size: 15.79px;">C</a> <a href="/tags/Django/" style="font-size: 11.05px;">Django</a> <a href="/tags/Docker/" style="font-size: 11.05px;">Docker</a> <a href="/tags/Dreamweaver/" style="font-size: 10px;">Dreamweaver</a> <a href="/tags/Fedora/" style="font-size: 10.53px;">Fedora</a> <a href="/tags/Flash/" style="font-size: 10px;">Flash</a> <a href="/tags/GObject/" style="font-size: 12.63px;">GObject</a> <a href="/tags/Gentoo/" style="font-size: 10.53px;">Gentoo</a> <a href="/tags/Hash/" style="font-size: 10px;">Hash</a> <a href="/tags/Linux/" style="font-size: 20px;">Linux</a> <a href="/tags/Mac/" style="font-size: 10.53px;">Mac</a> <a href="/tags/PS/" style="font-size: 12.63px;">PS</a> <a href="/tags/Qt/" style="font-size: 10.53px;">Qt</a> <a href="/tags/Raspberry-pi/" style="font-size: 10px;">Raspberry pi</a> <a href="/tags/Redis/" style="font-size: 10px;">Redis</a> <a href="/tags/Ruby/" style="font-size: 18.95px;">Ruby</a> <a href="/tags/Scrapy/" style="font-size: 11.05px;">Scrapy</a> <a href="/tags/TQ2440/" style="font-size: 12.11px;">TQ2440</a> <a href="/tags/USB/" style="font-size: 11.05px;">USB</a> <a href="/tags/VirtualBox/" style="font-size: 11.05px;">VirtualBox</a> <a href="/tags/Web开发/" style="font-size: 16.84px;">Web开发</a> <a href="/tags/WordPress/" style="font-size: 10px;">WordPress</a> <a href="/tags/Xcode/" style="font-size: 10px;">Xcode</a> <a href="/tags/access/" style="font-size: 12.63px;">access</a> <a href="/tags/adobe/" style="font-size: 10px;">adobe</a> <a href="/tags/ajax/" style="font-size: 11.05px;">ajax</a> <a href="/tags/angular/" style="font-size: 13.16px;">angular</a> <a href="/tags/apache/" style="font-size: 10px;">apache</a> <a href="/tags/asp/" style="font-size: 13.16px;">asp</a> <a href="/tags/css/" style="font-size: 10.53px;">css</a> <a href="/tags/firefox/" style="font-size: 11.05px;">firefox</a> <a href="/tags/ftp/" style="font-size: 10px;">ftp</a> <a href="/tags/gcc/" style="font-size: 12.63px;">gcc</a> <a href="/tags/git/" style="font-size: 12.63px;">git</a> <a href="/tags/grub/" style="font-size: 10px;">grub</a> <a href="/tags/gtk/" style="font-size: 17.89px;">gtk</a> <a href="/tags/gulp/" style="font-size: 10px;">gulp</a> <a href="/tags/ibus/" style="font-size: 10px;">ibus</a> <a href="/tags/js/" style="font-size: 16.32px;">js</a> <a href="/tags/k8s/" style="font-size: 10.53px;">k8s</a> <a href="/tags/mongodb/" style="font-size: 15.26px;">mongodb</a> <a href="/tags/mysql/" style="font-size: 11.58px;">mysql</a> <a href="/tags/nginx/" style="font-size: 10px;">nginx</a> <a href="/tags/node/" style="font-size: 10.53px;">node</a> <a href="/tags/php/" style="font-size: 14.74px;">php</a> <a href="/tags/pygame/" style="font-size: 15.26px;">pygame</a> <a href="/tags/python/" style="font-size: 19.47px;">python</a> <a href="/tags/react/" style="font-size: 12.63px;">react</a> <a href="/tags/redis/" style="font-size: 10px;">redis</a> <a href="/tags/shell/" style="font-size: 10px;">shell</a> <a href="/tags/typescript/" style="font-size: 10px;">typescript</a> <a href="/tags/ubuntu/" style="font-size: 13.16px;">ubuntu</a> <a href="/tags/vim/" style="font-size: 18.42px;">vim</a> <a href="/tags/vmware/" style="font-size: 10px;">vmware</a> <a href="/tags/w3m/" style="font-size: 10px;">w3m</a> <a href="/tags/windows/" style="font-size: 13.16px;">windows</a> <a href="/tags/xml/" style="font-size: 10px;">xml</a> <a href="/tags/免费/" style="font-size: 10px;">免费</a> <a href="/tags/内核/" style="font-size: 10px;">内核</a> <a href="/tags/匹配算法/" style="font-size: 12.63px;">匹配算法</a> <a href="/tags/单片机/" style="font-size: 10.53px;">单片机</a> <a href="/tags/嵌入式/" style="font-size: 10px;">嵌入式</a> <a href="/tags/开源软件/" style="font-size: 14.21px;">开源软件</a> <a href="/tags/排序算法/" style="font-size: 14.21px;">排序算法</a> <a href="/tags/文件空间/" style="font-size: 10px;">文件空间</a> <a href="/tags/无线网/" style="font-size: 10px;">无线网</a> <a href="/tags/树莓派/" style="font-size: 10px;">树莓派</a> <a href="/tags/正则式/" style="font-size: 10px;">正则式</a> <a href="/tags/注册机/" style="font-size: 10.53px;">注册机</a> <a href="/tags/游戏/" style="font-size: 14.74px;">游戏</a> <a href="/tags/电脑技巧/" style="font-size: 14.21px;">电脑技巧</a> <a href="/tags/空间/" style="font-size: 10px;">空间</a> <a href="/tags/算法/" style="font-size: 17.37px;">算法</a> <a href="/tags/红旗/" style="font-size: 10px;">红旗</a> <a href="/tags/经典语录/" style="font-size: 10px;">经典语录</a> <a href="/tags/网络日志/" style="font-size: 13.16px;">网络日志</a> <a href="/tags/翻译/" style="font-size: 18.42px;">翻译</a> <a href="/tags/视频教程/" style="font-size: 14.74px;">视频教程</a> <a href="/tags/资源分享/" style="font-size: 15.26px;">资源分享</a> <a href="/tags/转载/" style="font-size: 10.53px;">转载</a> <a href="/tags/随笔/" style="font-size: 10px;">随笔</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/11/">November 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/05/">May 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/04/">April 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/02/">February 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/11/">November 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/05/">May 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/03/">March 2019</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/11/">November 2018</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/06/">June 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/05/">May 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/01/">January 2017</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/11/">November 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/08/">August 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/07/">July 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/06/">June 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/04/">April 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/03/">March 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">January 2016</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">December 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/08/">August 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/05/">May 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/04/">April 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/02/">February 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/01/">January 2015</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/12/">December 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/11/">November 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/10/">October 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/09/">September 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/08/">August 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/07/">July 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/06/">June 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/05/">May 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/04/">April 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/03/">March 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/01/">January 2014</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/12/">December 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/11/">November 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/10/">October 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/08/">August 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/07/">July 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/06/">June 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/05/">May 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/04/">April 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2013/01/">January 2013</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/10/">October 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/09/">September 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/08/">August 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/07/">July 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/05/">May 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/04/">April 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/03/">March 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2012/02/">February 2012</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/12/">December 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/11/">November 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/10/">October 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/09/">September 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/08/">August 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/07/">July 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/05/">May 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/04/">April 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/03/">March 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/02/">February 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/01/">January 2011</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/12/">December 2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/11/">November 2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/10/">October 2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/09/">September 2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/08/">August 2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/07/">July 2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/06/">June 2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/05/">May 2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/04/">April 2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/03/">March 2010</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/12/">December 2009</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/11/">November 2009</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/10/">October 2009</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/09/">September 2009</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/08/">August 2009</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/07/">July 2009</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/05/">May 2009</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/12/">December 2008</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/07/">July 2008</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/archives/84181.html">Github Runner 配置</a>
          </li>
        
          <li>
            <a href="/archives/84180.html">使用python编写帝国时代2修改器</a>
          </li>
        
          <li>
            <a href="/archives/84179.html">使用Vagrant和Docker搭建Kubernetes集群</a>
          </li>
        
          <li>
            <a href="/archives/84178.html">Github Actions使用</a>
          </li>
        
          <li>
            <a href="/archives/84177.html">使用Vagrant在Ubuntu系统上搭建Kubernetes集群</a>
          </li>
        
      </ul>
    </div>
  </div>

  
    <div class="widget-wrap">
  <h3 class="widget-title">Link</h3>
    <div class="widget">
      <ul id="category-list">
        <li><a target="_blank" title="我的Github" href="https://github.com/wusuopu">@Github</a></li>
        <li><a target="_blank" title="我的微博" href="http://www.weibo.com/u/1768691343">@Weibo</a></li>
        <li><a target="_blank" title="我的Twitter" href="https://twitter.com/longchangjin">@Twitter</a></li>
        <li><a target="_blank" title="我的豆瓣" href="http://www.douban.com/people/lchj/">@Douban</a></li>

        <li><a target="_blank" title="" href="http://pythoner.net/">python开发者社区</a></li>
        <li><a target="_blank" title="" href="http://simple-is-better.com/">python.cn(news, jobs)</a></li>
        <li><a target="_blank" title="" href="http://gtk.awaysoft.com/">GTK+ 中文社区</a></li>
        <li><a target="_blank" title="小智LOGO - LOGO在线制作神器 - 3分钟完成公司LOGO设计" href="http://xzlogo.com/">小智LOGO</a></li>
      </ul>
    </div>
</div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2020 龍昌<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
<div style="display:none;"><script src="http://s94.cnzz.com/stat.php?id=1259846&web_id=1259846&show=pic" language="JavaScript"></script></div>

    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
    <a href="/about" class="mobile-nav-link">About</a>
  
    <a href="/gbook" class="mobile-nav-link">留言板</a>
  
</nav>
    

<script src="/js/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css">
  <script src="/fancybox/jquery.fancybox.pack.js"></script>


<script src="/js/script.js"></script>

  </div>
</body>
</html>